/*! For license information please see main.c3cfea68.js.LICENSE.txt */
!function(){var e={200:function(e,t,n){"use strict";n(791);t.Z=n.p+"static/media/lenin.fcb268396b31b4882e96723715bb8667.svg"},899:function(e){e.exports=function(){"use strict";var e={935:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Arcs=void 0;var i=n(426),a=n(941),o=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var n=t.canvas,o=n.height,u=n.width,s=new i.Shapes(t),c=new a.AudioData(e),l=o/2,f=u/2;this._options=r({count:30,diameter:o/3,lineWidth:3,frequencyBand:"mids",rounded:!0},this._options),this._options.frequencyBand&&c.setFrequencyBand(this._options.frequencyBand),c.scaleData(Math.min(u,o));for(var h=0;h<=this._options.count/2;h++){var d=Math.floor(c.data.length/this._options.count)*h,p=c.data[d],v=(u-this._options.diameter)/this._options.count*h,m=180-45/(255/p/2),y=180+45/(255/p/2),g=2*p;s.arc(v+g/2,l,g,m,y,this._options)}var b=Math.floor(c.data.length/2),k=c.data[b];for(s.circle(f,l,this._options.diameter*(k/255),this._options),h=this._options.count/2;h<=this._options.count;h++){var w=Math.floor(c.data.length/this._options.count)*h,_=c.data[w];v=(u-this._options.diameter)/this._options.count*h+this._options.diameter,m=180-45/(255/_/2),y=180+45/(255/_/2),g=2*_,s.arc(v-g/2,l,g,m+180,y+180,this._options)}},e}();t.Arcs=o},519:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Circles=void 0;var i=n(426),a=n(941),o=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var n=t.canvas,o=n.height,u=n.width,s=new i.Shapes(t),c=new a.AudioData(e),l=u/2,f=o/2;this._options=r({count:40,diameter:0,fillColor:"rgba(0,0,0,0)",frequencyBand:"mids"},this._options),this._options.frequencyBand&&c.setFrequencyBand(this._options.frequencyBand),c.scaleData(Math.min(u,o));for(var h=0;h<this._options.count;h++){var d=Math.floor(c.data.length/this._options.count)*h,p=c.data[d];s.circle(l,f,this._options.diameter+p,this._options)}},e}();t.Circles=o},938:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Cubes=void 0;var i=n(426),a=n(941),o=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var n,o,u,s,c,l,f,h,d,p,v,m,y=t.canvas,g=y.height,b=y.width,k=new i.Shapes(t),w=new a.AudioData(e);this._options=r({count:20,frequencyBand:"mids",gap:5},this._options);var _=Math.floor((b-this._options.gap*this._options.count)/this._options.count);if((null===(n=this._options)||void 0===n?void 0:n.cubeHeight)||(this._options.cubeHeight=_),this._options.frequencyBand&&w.setFrequencyBand(this._options.frequencyBand),w.scaleData(Math.min(b,g)),null===(o=this._options)||void 0===o?void 0:o.mirroredX)for(var x=1,E=Math.ceil(w.data.length/2);E<w.data.length;E++)w.data[E]=w.data[Math.ceil(w.data.length/2)-x],x++;if(null===(u=this._options)||void 0===u?void 0:u.top)for(E=0;E<this._options.count;E++)for(var S=Math.floor(w.data.length/this._options.count)*E,A=w.data[S],T=(this._options.gap+_)*E,I=Math.ceil(A/_),C=0;C<I;C++){var D=C*(this._options.cubeHeight+this._options.gap);k.rectangle(T,D,_,this._options.cubeHeight,this._options)}if(null===(s=this._options)||void 0===s?void 0:s.right)for(E=0;E<this._options.count;E++)for(S=Math.floor(w.data.length/this._options.count)*E,A=w.data[S],D=E*(this._options.cubeHeight+this._options.gap),I=Math.ceil(A/_),C=0;C<I;C++)T=b-(this._options.gap+_)*C,k.rectangle(T,D,_,this._options.cubeHeight,this._options);if((null===(c=this._options)||void 0===c?void 0:c.bottom)||!(null===(l=this._options)||void 0===l?void 0:l.top)&&!(null===(f=this._options)||void 0===f?void 0:f.right)&&!(null===(h=this._options)||void 0===h?void 0:h.left)&&!(null===(d=this._options)||void 0===d?void 0:d.center))for(E=0;E<this._options.count;E++)for(S=Math.floor(w.data.length/this._options.count)*E,A=w.data[S],T=(this._options.gap+_)*E,I=Math.ceil(A/_),C=0;C<I;C++)D=g-C*(this._options.cubeHeight+this._options.gap),k.rectangle(T,D,_,this._options.cubeHeight,this._options);if(null===(p=this._options)||void 0===p?void 0:p.left)for(E=0;E<this._options.count;E++)for(S=Math.floor(w.data.length/this._options.count)*E,A=w.data[S],D=E*(this._options.cubeHeight+this._options.gap),I=Math.ceil(A/_),C=0;C<I;C++)T=(this._options.gap+_)*C,k.rectangle(T,D,_,this._options.cubeHeight,this._options);if(null===(v=this._options)||void 0===v?void 0:v.center){for(E=0;E<this._options.count;E++)for(S=Math.floor(w.data.length/this._options.count)*E,A=w.data[S],T=(this._options.gap+_)*E,I=Math.ceil(A/_),C=0;C<I;C++)D=g/2-C*(this._options.cubeHeight+this._options.gap),k.rectangle(T,D,_,this._options.cubeHeight,this._options);if(null===(m=this._options)||void 0===m?void 0:m.mirroredY)for(E=0;E<this._options.count;E++)for(S=Math.floor(w.data.length/this._options.count)*E,A=w.data[S],T=(this._options.gap+_)*E,I=Math.ceil(A/_),C=0;C<I;C++)D=g/2+C*(this._options.cubeHeight+this._options.gap),k.rectangle(T,D,_,this._options.cubeHeight,this._options)}},e}();t.Cubes=o},540:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Flower=void 0;var i=n(426),a=n(941),o=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var n=t.canvas,o=n.height,u=n.width,s=new i.Shapes(t),c=new a.AudioData(e);this._options=r({count:20,diameter:o/3,frequencyBand:"mids",rotate:0},this._options);var l=u/2,f=o/2,h=360/this._options.count;this._options.frequencyBand&&c.setFrequencyBand(this._options.frequencyBand),c.scaleData(Math.min(u,o));for(var d=0;d<this._options.count;d++){var p=Math.floor(c.data.length/this._options.count)*d,v=c.data[p],m=s.toRadians(h*d+this._options.rotate),y=s.toRadians(h*(d+1)+this._options.rotate),g=this._options.diameter/2*Math.cos(m)+l,b=this._options.diameter/2*Math.sin(m)+f,k=this._options.diameter/2*Math.cos(y)+l,w=this._options.diameter/2*Math.sin(y)+f,_=this._options.diameter+v,x=_/2*Math.cos(m)+l,E=_/2*Math.sin(m)+f,S=_/2*Math.cos(y)+l,A=_/2*Math.sin(y)+f;s.polygon([{x:g,y:b},{x:x,y:E},{x:S,y:A},{x:k,y:w}],this._options)}},e}();t.Flower=o},522:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Glob=void 0;var i=n(426),a=n(941),o=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var n,o=t.canvas,u=o.height,s=o.width,c=new i.Shapes(t),l=new a.AudioData(e),f=s/2,h=u/2;if(this._options=r({count:100,diameter:u/3,frequencyBand:"mids",rounded:!0},this._options),this._options.frequencyBand&&l.setFrequencyBand(this._options.frequencyBand),l.scaleData(Math.min(s,u)),null===(n=this._options)||void 0===n?void 0:n.mirroredX)for(var d=1,p=Math.ceil(l.data.length/2);p<l.data.length;p++)l.data[p]=l.data[Math.ceil(l.data.length/2)-d],d++;var v=[];for(p=0;p<this._options.count;p++){var m=Math.floor(l.data.length/this._options.count)*p,y=l.data[m],g=360/this._options.count,b=this._options.diameter+y,k=f+b/2*Math.cos(c.toRadians(g*p)),w=h+b/2*Math.sin(c.toRadians(g*p));v.push({x:k,y:w})}v.push(v[0]),c.polygon(v,this._options)},e}();t.Glob=o},658:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Lines=void 0;var i=n(426),a=n(941),o=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var n,o,u,s,c,l,f,h,d,p,v,m=t.canvas,y=m.height,g=m.width,b=new i.Shapes(t),k=new a.AudioData(e);if(this._options=r({count:64,frequencyBand:"mids"},this._options),this._options.frequencyBand&&k.setFrequencyBand(this._options.frequencyBand),k.scaleData(Math.min(g,y)),null===(n=this._options)||void 0===n?void 0:n.mirroredX)for(var w=1,_=Math.ceil(k.data.length/2);_<k.data.length;_++)k.data[_]=k.data[Math.ceil(k.data.length/2)-w],w++;if(null===(o=this._options)||void 0===o?void 0:o.top)for(_=1;_<=this._options.count;_++){var x=Math.floor(k.data.length/this._options.count)*_,E=k.data[x],S=0,A=I=g/this._options.count*_,T=E;b.line(I,S,A,T,this._options)}if(null===(u=this._options)||void 0===u?void 0:u.right)for(_=1;_<=this._options.count;_++){x=Math.floor(k.data.length/this._options.count)*_;var I=g;A=g-(E=k.data[x]),T=S=y/this._options.count*_,b.line(I,S,A,T,this._options)}if((null===(s=this._options)||void 0===s?void 0:s.bottom)||!(null===(c=this._options)||void 0===c?void 0:c.top)&&!(null===(l=this._options)||void 0===l?void 0:l.right)&&!(null===(f=this._options)||void 0===f?void 0:f.left)&&!(null===(h=this._options)||void 0===h?void 0:h.center))for(_=1;_<=this._options.count;_++)x=Math.floor(k.data.length/this._options.count)*_,E=k.data[x],A=I=g/this._options.count*_,T=(S=y)-E,b.line(I,S,A,T,this._options);if(null===(d=this._options)||void 0===d?void 0:d.left)for(_=1;_<=this._options.count;_++)x=Math.floor(k.data.length/this._options.count)*_,I=0,A=E=k.data[x],T=S=y/this._options.count*_,b.line(I,S,A,T,this._options);if(null===(p=this._options)||void 0===p?void 0:p.center)for(_=1;_<=this._options.count;_++)x=Math.floor(k.data.length/this._options.count)*_,E=k.data[x],A=I=g/this._options.count*_,T=(S=y/2)-E,b.line(I,S,A,T,this._options),(null===(v=this._options)||void 0===v?void 0:v.mirroredY)&&(A=I=g/this._options.count*_,T=(S=y/2)+E,b.line(I,S,A,T,this._options))},e}();t.Lines=o},817:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Shine=void 0;var i=n(426),a=n(941),o=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var n,o=t.canvas,u=o.height,s=o.width,c=new i.Shapes(t),l=new a.AudioData(e);this._options=r({count:30,rotate:0,diameter:u/3,frequencyBand:"mids"},this._options);var f=s/2,h=u/2,d=360/this._options.count;this._options.frequencyBand&&l.setFrequencyBand(this._options.frequencyBand),l.scaleData(Math.min(s,u));for(var p=0;p<this._options.count;p++){var v=Math.floor(l.data.length/this._options.count)*p,m=l.data[v],y=c.toRadians(d*p+this._options.rotate),g=(null===(n=this._options)||void 0===n?void 0:n.offset)?this._options.diameter-m/2:this._options.diameter,b=this._options.diameter+m,k=g/2*Math.cos(y)+f,w=g/2*Math.sin(y)+h,_=b/2*Math.cos(y)+f,x=b/2*Math.sin(y)+h;c.line(k,w,_,x,this._options)}},e}();t.Shine=o},123:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Square=void 0;var i=n(426),a=n(941),o=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var n=t.canvas,o=n.height,u=n.width,s=new i.Shapes(t),c=new a.AudioData(e);this._options=r({count:40,diameter:o/3,frequencyBand:"mids"},this._options);var l=this._options.count/4,f=u/2,h=o/2;this._options.frequencyBand&&c.setFrequencyBand(this._options.frequencyBand),c.scaleData(Math.min(u,o));for(var d=0;d<l;d++){var p=Math.floor(c.data.length/this._options.count)*d,v=c.data[p],m=this._options.diameter/l,y=f-this._options.diameter/2+m*d,g=h-this._options.diameter/2;s.line(y,g,y,g-v,this._options)}for(d=0;d<l;d++){p=Math.floor(c.data.length/this._options.count)*(2*d),v=c.data[p];var b=this._options.diameter/l;y=f+this._options.diameter/2,g=h-this._options.diameter/2+b*d,s.line(y,g,y+v,g,this._options)}for(d=0;d<l;d++)p=Math.floor(c.data.length/this._options.count)*(3*d),v=c.data[p],m=this._options.diameter/l,y=f-this._options.diameter/2+m*d,g=h+this._options.diameter/2,s.line(y,g,y,g+v,this._options);for(d=0;d<l;d++)p=Math.floor(c.data.length/this._options.count)*(4*d),v=c.data[p],b=this._options.diameter/l,y=f-this._options.diameter/2,g=h-this._options.diameter/2+b*d,s.line(y,g,y-v,g,this._options)},e}();t.Square=o},270:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Turntable=void 0;var i=n(426),a=n(941),o=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var n=t.canvas,o=n.height,u=n.width,s=new i.Shapes(t),c=new a.AudioData(e);this._options=r({count:20,rotate:0,diameter:o/3,cubeHeight:20,frequencyBand:"mids",gap:5},this._options);var l=u/2,f=o/2,h=360/this._options.count;this._options.frequencyBand&&c.setFrequencyBand(this._options.frequencyBand),c.scaleData(Math.min(u,o));for(var d=0;d<this._options.count;d++)for(var p=Math.floor(c.data.length/this._options.count)*d,v=c.data[p],m=0;m<v/this._options.cubeHeight;m++){var y=this._options.diameter+this._options.cubeHeight*m+this._options.gap,g=this._options.diameter+this._options.cubeHeight*(m+1),b=s.toRadians(h*d+this._options.rotate+this._options.gap/4),k=s.toRadians(h*(d+1)+this._options.rotate),w=y/2*Math.cos(b)+l,_=y/2*Math.sin(b)+f,x=y/2*Math.cos(k)+l,E=y/2*Math.sin(k)+f,S=g/2*Math.cos(b)+l,A=g/2*Math.sin(b)+f,T=g/2*Math.cos(k)+l,I=g/2*Math.sin(k)+f;s.polygon([{x:w,y:_},{x:S,y:A},{x:T,y:I},{x:x,y:E}],this._options)}},e}();t.Turntable=o},857:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Wave=void 0;var i=n(426),a=n(941),o=function(){function e(e){this._options=null!=e?e:{}}return e.prototype.draw=function(e,t){var n=t.canvas,o=n.height,u=n.width,s=new a.AudioData(e),c=new i.Shapes(t);if(this._options=r({count:64,frequencyBand:"mids"},this._options),this._options.frequencyBand&&s.setFrequencyBand(this._options.frequencyBand),s.scaleData(Math.min(u,o)),this._options.mirroredX)for(var l=1,f=Math.ceil(s.data.length/2);f<s.data.length;f++)s.data[f]=s.data[Math.ceil(s.data.length/2)-l],l++;if(this._options.top){var h=[{x:0,y:0}];for(f=0;f<=this._options.count;f++){var d=Math.floor(s.data.length/this._options.count)*f,p=s.data[d];h.push({x:Math.floor(u/this._options.count)*f,y:p})}h.push({x:u,y:0}),c.polygon(h,this._options)}if(this._options.right){for(h=[{x:u,y:0}],f=0;f<=this._options.count;f++)d=Math.floor(s.data.length/this._options.count)*f,p=s.data[d],h.push({x:u-p,y:Math.floor(u/this._options.count)*f});h.push({x:u,y:o}),c.polygon(h,this._options)}if(this._options.bottom||!this._options.top&&!this._options.right&&!this._options.left&&!this._options.center){for(h=[{x:0,y:o}],f=0;f<=this._options.count;f++)d=Math.floor(s.data.length/this._options.count)*f,p=s.data[d],h.push({x:Math.floor(u/this._options.count)*f,y:o-p});h.push({x:u,y:o}),c.polygon(h,this._options)}if(this._options.left){for(h=[{x:0,y:0}],f=0;f<=this._options.count;f++)d=Math.floor(s.data.length/this._options.count)*f,p=s.data[d],h.push({x:p,y:Math.floor(u/this._options.count)*f});h.push({x:0,y:o}),c.polygon(h,this._options)}if(this._options.center){for(h=[{x:0,y:o/2}],f=0;f<=this._options.count;f++)d=Math.floor(s.data.length/this._options.count)*f,p=s.data[d],h.push({x:Math.floor(u/this._options.count)*f,y:o/2-p});if(h.push({x:u,y:o/2}),c.polygon(h,this._options),this._options.mirroredY){for(h=[{x:0,y:o/2}],f=0;f<=this._options.count;f++)d=Math.floor(s.data.length/this._options.count)*f,p=s.data[d],h.push({x:Math.floor(u/this._options.count)*f,y:o/2+p});h.push({x:u,y:o/2}),c.polygon(h,this._options)}}},e}();t.Wave=o},941:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioData=void 0;var n=function(){function e(e){this.data=e}return e.prototype.setFrequencyBand=function(e){var t=Math.floor(.0625*this.data.length),n=Math.floor(.0625*this.data.length),r=Math.floor(.375*this.data.length),i={base:this.data.slice(0,t),lows:this.data.slice(t+1,t+n),mids:this.data.slice(t+n+1,t+n+r),highs:this.data.slice(t+n+r+1)};this.data=i[e]},e.prototype.scaleData=function(e){e<255&&(this.data=this.data.map((function(t){var n=Math.round(t/255*100)/100;return e*n})))},e}();t.AudioData=n},426:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Shapes=void 0;var i=function(){function e(e){this._canvasContext=e}return e.prototype.toRadians=function(e){return e*Math.PI/180},e.prototype.toDegrees=function(e){return 180*e/Math.PI},e.prototype._rotatePoint=function(e,t,n,r,i){var a=this.toRadians(i);return{x:Math.cos(a)*(n-e)-Math.sin(a)*(r-t)+e,y:Math.sin(a)*(n-e)+Math.cos(a)*(r-t)+t}},e.prototype._makeGradient=function(e,t){var n=0,r=this._canvasContext.canvas.height/2,i=this._canvasContext.canvas.width,a=this._canvasContext.canvas.height/2;if(t){var o=this._canvasContext.canvas.width/2,u=this._canvasContext.canvas.height/2,s=this._rotatePoint(o,u,n,r,t);n=s.x,r=s.y;var c=this._rotatePoint(o,u,i,a,t);i=c.x,a=c.y}var l=this._canvasContext.createLinearGradient(n,r,i,a);return e.forEach((function(t,n){l.addColorStop(1/e.length*n,t)})),l},e.prototype._makeImage=function(e){return n(this,void 0,void 0,(function(){var t,n=this;return r(this,(function(r){return(t=new Image).src=e,[2,new Promise((function(e,r){t.onload=function(){var r=n._canvasContext.createPattern(t,"repeat");e(r)}}))]}))}))},e.prototype._implementOptions=function(e,t){var n,r,i,a,o,u,s,c,l,f,h,d,p=this;void 0===t&&(t=!0),"string"==typeof(null==e?void 0:e.lineColor)?this._canvasContext.strokeStyle=e.lineColor:(null===(n=null==e?void 0:e.lineColor)||void 0===n?void 0:n.gradient)?this._canvasContext.strokeStyle=this._makeGradient(e.lineColor.gradient,e.lineColor.rotate):(null===(r=null==e?void 0:e.lineColor)||void 0===r?void 0:r.image)?this._makeImage(null===(i=null==e?void 0:e.lineColor)||void 0===i?void 0:i.image).then((function(e){return p._canvasContext.strokeStyle=e})):this._canvasContext.strokeStyle="#000","string"==typeof(null==e?void 0:e.fillColor)?this._canvasContext.fillStyle=e.fillColor:(null===(a=null==e?void 0:e.fillColor)||void 0===a?void 0:a.gradient)?this._canvasContext.fillStyle=this._makeGradient(e.fillColor.gradient,e.fillColor.rotate):(null===(o=null==e?void 0:e.fillColor)||void 0===o?void 0:o.image)?this._makeImage(null===(u=null==e?void 0:e.fillColor)||void 0===u?void 0:u.image).then((function(e){return p._canvasContext.fillStyle=e})):this._canvasContext.fillStyle="#000",this._canvasContext.lineCap=null!==(s=(null==e?void 0:e.rounded)?"round":"butt")&&void 0!==s?s:"butt",this._canvasContext.lineWidth=null!==(c=null==e?void 0:e.lineWidth)&&void 0!==c?c:1,this._canvasContext.shadowColor=null!==(f=null===(l=null==e?void 0:e.glow)||void 0===l?void 0:l.color)&&void 0!==f?f:"rgba(0,0,0,0)",this._canvasContext.shadowBlur=null!==(d=null===(h=null==e?void 0:e.glow)||void 0===h?void 0:h.strength)&&void 0!==d?d:0,this._canvasContext.shadowOffsetX=0,this._canvasContext.shadowOffsetY=0,t&&this._canvasContext.closePath(),this._canvasContext.stroke(),t&&this._canvasContext.fill()},e.prototype.arc=function(e,t,n,r,i,a){return this._canvasContext.beginPath(),this._canvasContext.arc(e,t,n/2,this.toRadians(r),this.toRadians(i)),this._implementOptions(a,!1),this},e.prototype.circle=function(e,t,n,r){return this._canvasContext.beginPath(),this._canvasContext.arc(e,t,n/2,0,2*Math.PI),this._implementOptions(r),this},e.prototype.line=function(e,t,n,r,i){return this._canvasContext.beginPath(),this._canvasContext.moveTo(e,t),this._canvasContext.lineTo(n,r),this._implementOptions(i),this},e.prototype.polygon=function(e,t){var n;this._canvasContext.beginPath(),this._canvasContext.moveTo(e[0].x,e[0].y);for(var r=0;r<e.length;r++){var i=e[r],a=null!==(n=e[r+1])&&void 0!==n?n:i,o=(i.x+a.x)/2,u=(i.y+a.y)/2;(null==t?void 0:t.rounded)?this._canvasContext.quadraticCurveTo(e[r].x,e[r].y,o,u):this._canvasContext.lineTo(e[r].x,e[r].y)}return this._implementOptions(t),this},e.prototype.rectangle=function(e,t,n,r,i){var a,o=null!==(a=null==i?void 0:i.radius)&&void 0!==a?a:0;return n<2*o&&(o=n/2),r<2*o&&(o=r/2),this._canvasContext.beginPath(),this._canvasContext.moveTo(e+o,t),this._canvasContext.arcTo(e+n,t,e+n,t+r,o),this._canvasContext.arcTo(e+n,t+r,e,t+r,o),this._canvasContext.arcTo(e,t+r,e,t,o),this._canvasContext.arcTo(e,t,e+n,t,o),this._implementOptions(i),this},e}();t.Shapes=i}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}var r={};return function(){var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.Wave=void 0;var t=n(935),i=n(519),a=n(938),o=n(540),u=n(522),s=n(658),c=n(817),l=n(123),f=n(270),h=n(857),d=function(){function e(e,n,r){void 0===r&&(r=!1);var d=this;this.animations={Arcs:t.Arcs,Circles:i.Circles,Cubes:a.Cubes,Flower:o.Flower,Glob:u.Glob,Lines:s.Lines,Shine:c.Shine,Square:l.Square,Turntable:f.Turntable,Wave:h.Wave},this._activeAnimations=[],this._canvasElement=n,this._canvasContext=this._canvasElement.getContext("2d"),this._muteAudio=r,e instanceof HTMLAudioElement?(this._audioElement=e,this._audioElement.addEventListener("play",(function(){d._audioContext=new AudioContext,d._audioSource=d._audioContext.createMediaElementSource(d._audioElement),d._audioAnalyser=d._audioContext.createAnalyser(),d._play()}),{once:!0})):(this._audioContext=e.context,this._audioSource=e.source,this._audioAnalyser=this._audioContext.createAnalyser(),this._play())}return e.prototype._play=function(){var e=this;this._audioSource.connect(this._audioAnalyser),this._muteAudio||this._audioSource.connect(this._audioContext.destination),this._audioAnalyser.smoothingTimeConstant=.85,this._audioAnalyser.fftSize=1024;var t=new Uint8Array(this._audioAnalyser.frequencyBinCount);!function n(){e._audioAnalyser.getByteFrequencyData(t),e._canvasContext.clearRect(0,0,e._canvasContext.canvas.width,e._canvasContext.canvas.height),e._activeAnimations.forEach((function(n){n.draw(t,e._canvasContext)})),window.requestAnimationFrame(n)}()},e.prototype.addAnimation=function(e){this._activeAnimations.push(e)},e.prototype.clearAnimations=function(){this._activeAnimations=[]},e}();e.Wave=d}(),r}()},109:function(e,t){t.Z={body:'<path d="M13 6v12l8.5-6M4 18l8.5-6L4 6v12z" fill="currentColor"/>',width:24,height:24}},147:function(e,t){t.Z={body:'<path d="M15 16h-2V8h2m-4 8H9V8h2m1-6A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2z" fill="currentColor"/>',width:24,height:24}},978:function(e,t){t.Z={body:'<path d="M10 16.5v-9l6 4.5M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2z" fill="currentColor"/>',width:24,height:24}},467:function(e,t){t.Z={body:'<path d="M2 5.27L3.28 4L20 20.72L18.73 22l-3-3H7v3l-4-4l4-4v3h6.73L7 10.27V11H5V8.27l-3-3M17 13h2v4.18l-2-2V13m0-8V2l4 4l-4 4V7H8.82l-2-2H17z" fill="currentColor"/>',width:24,height:24}},858:function(e,t){t.Z={body:'<path d="M17 17H7v-3l-4 4l4 4v-3h12v-6h-2M7 7h10v3l4-4l-4-4v3H5v6h2V7z" fill="currentColor"/>',width:24,height:24}},974:function(e,t){t.Z={body:'<path d="M11.5 12l8.5 6V6m-9 12V6l-8.5 6l8.5 6z" fill="currentColor"/>',width:24,height:24}},685:function(e,t){t.Z={body:'<path d="M16 18h2V6h-2M6 18l8.5-6L6 6v12z" fill="currentColor"/>',width:24,height:24}},967:function(e,t){t.Z={body:'<path d="M6 18V6h2v12H6m3.5-6L18 6v12l-8.5-6z" fill="currentColor"/>',width:24,height:24}},922:function(e,t){t.Z={body:'<path d="M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.84-5 6.7v2.07c4-.91 7-4.49 7-8.77c0-4.28-3-7.86-7-8.77M16.5 12c0-1.77-1-3.29-2.5-4.03V16c1.5-.71 2.5-2.24 2.5-4M3 9v6h4l5 5V4L7 9H3z" fill="currentColor"/>',width:24,height:24}},382:function(e,t){t.Z={body:'<path d="M3 9h4l5-5v16l-5-5H3V9m13.59 3L14 9.41L15.41 8L18 10.59L20.59 8L22 9.41L19.41 12L22 14.59L20.59 16L18 13.41L15.41 16L14 14.59L16.59 12z" fill="currentColor"/>',width:24,height:24}},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var P,F=Object.assign;function V(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function j(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case C:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Se(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ae(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ie(e,t){return e(t)}function Ce(){}var De=!1;function Ne(e,t,n){if(De)return e(t,n);De=!0;try{return Ie(e,t,n)}finally{De=!1,(null!==xe||null!==Ee)&&(Ce(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Me=!1;if(l)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(le){Me=!1}function Re(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Pe=!1,Fe=null,Ve=!1,Ue=null,Be={onError:function(e){Pe=!0,Fe=e}};function je(e,t,n,r,i,a,o,u,s){Pe=!1,Fe=null,Re.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,Et,St,At=!1,Tt=[],It=null,Ct=null,Dt=null,Nt=new Map,Ot=new Map,Mt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Pt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function Ut(e,t,n){Vt(e)&&n.delete(t)}function Bt(){At=!1,null!==It&&Vt(It)&&(It=null),null!==Ct&&Vt(Ct)&&(Ct=null),null!==Dt&&Vt(Dt)&&(Dt=null),Nt.forEach(Ut),Ot.forEach(Ut)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return jt(t,e)}if(0<Tt.length){jt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&jt(It,e),null!==Ct&&jt(Ct,e),null!==Dt&&jt(Dt,e),Nt.forEach(t),Ot.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Mt.shift()}var qt=k.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,r){var i=bt,a=qt.transition;qt.transition=null;try{bt=1,Ht(e,t,n,r)}finally{bt=i,qt.transition=a}}function Kt(e,t,n,r){var i=bt,a=qt.transition;qt.transition=null;try{bt=4,Ht(e,t,n,r)}finally{bt=i,qt.transition=a}}function Ht(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Pt(It,e,t,n,r,i),!0;case"dragenter":return Ct=Pt(Ct,e,t,n,r,i),!0;case"mouseover":return Dt=Pt(Dt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Nt.set(a,Pt(Nt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Pt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(gn),kn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return En}var An=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(An),In=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Dn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Nn),Mn=[9,13,27,32],Ln=l&&"CompositionEvent"in window,Rn=null;l&&"documentMode"in document&&(Rn=document.documentMode);var Pn=l&&"TextEvent"in window&&!Rn,Fn=l&&(!Ln||Rn&&8<Rn&&11>=Rn),Vn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ae(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Hn=null;function Qn(e){Vr(e,0)}function Yn(e){if(H(ki(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Hn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Wn(t,Hn,e,we(e)),Ne(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,br=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Er={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Ar=Sr("animationend"),Tr=Sr("animationiteration"),Ir=Sr("animationstart"),Cr=Sr("transitionend"),Dr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Dr.set(e,t),s(t,[e])}for(var Mr=0;Mr<Nr.length;Mr++){var Lr=Nr[Mr];Or(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Or(Ar,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Ir,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(je.apply(this,arguments),Pe){if(!Pe)throw Error(a(198));var l=Fe;Pe=!1,Fe=null,Ve||(Ve=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Pr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ne((function(){var r=a,i=we(n),o=[];e:{var u=Dr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Cn;break;case Ar:case Tr:case Ir:s=yn;break;case Cr:s=Dn;break;case"scroll":s=hn;break;case"wheel":s=On;break;case"copy":case"cut":case"paste":s=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=In}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===ke||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ki(s),d=null==c?u:ki(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?ki(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Xn;else if(Gn(u))if($n)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?ki(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,kr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":kr(o,n,i)}var g;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(g=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Kr(r,b)).length&&(b=new kn(b,e,null,n,i),o.push({event:b,listeners:y}),g?b.data=g:null!==(g=jn(n))&&(b.data=g))),(g=Pn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Ln&&Bn(e,t)?(e=en(),Zt=Jt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Vr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Oe(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=Oe(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ei(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ai(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ii=Ei(Ti),Ci=Ei(!1),Di=Ti;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mi(){Si(Ci),Si(Ii)}function Li(e,t,n){if(Ii.current!==Ti)throw Error(a(168));Ai(Ii,t),Ai(Ci,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Pi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Di=Ii.current,Ai(Ii,e),Ai(Ci,Ci.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ri(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Si(Ci),Si(Ii),Ai(Ii,e)):Si(Ci),Ai(Ci,n)}var Vi=null,Ui=!1,Bi=!1;function ji(e){null===Vi?Vi=[e]:Vi.push(e)}function zi(){if(!Bi&&null!==Vi){Bi=!0;var e=0,t=bt;try{var n=Vi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,Ui=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),He(Ze,zi),i}finally{bt=t,Bi=!1}}return null}var qi=[],Gi=0,Wi=null,Ki=0,Hi=[],Qi=0,Yi=null,Xi=1,$i="";function Ji(e,t){qi[Gi++]=Ki,qi[Gi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Hi[Qi++]=Xi,Hi[Qi++]=$i,Hi[Qi++]=Yi,Yi=e;var r=Xi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Xi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=qi[--Gi],qi[Gi]=null,Ki=qi[--Gi],qi[Gi]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null,Xi=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=k.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ba=null,ka=null;function wa(){ka=ba=ga=null}function _a(e){var t=ya.current;Si(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ka=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ku=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===ga)throw Error(a(308));ba=e,ga.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var Aa=null;function Ta(e){null===Aa?Aa=[e]:Aa.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ma(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function La(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function Ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Pa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Da=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ma(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=La(e,a,i))&&(rc(t,e,i,r),Ra(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ma(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=La(e,a,i))&&(rc(t,e,i,r),Ra(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ma(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=La(e,i,r))&&(rc(t,e,r,n),Ra(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Oi(t)?Di:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Oi(t)?Di:Ii.current,i.context=Ni(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Pc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Pc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=R(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var b=d(i,v,g.value,c);if(null===b){null===v&&(v=y);break}e&&v&&null===b.alternate&&t(i,v),u=o(b,u,m),null===f?l=b:f.sibling=b,f=b,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Pc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Rc(o.type,o.key,o.props,null,r.mode,s)).ref=Ka(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case O:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(R(o))return m(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Vc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=Ya(!0),$a=Ya(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ai(to,t),Ai(eo,e),Ai(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ai(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ai(eo,e),Ai(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=k.ReactCurrentDispatcher,ho=k.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,bo=!1,ko=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),bo){o=0;do{if(bo=!1,ko=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(bo)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==ko;return ko=0,e}function Ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Io(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(ku=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(ku=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function Oo(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,ku=!0),r=r.queue,Go(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Lo.bind(null,n,r,i,t),void 0,null),null===Ds)throw Error(a(349));0!==(30&po)||Mo(n,t,i)}return i}function Mo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Lo(e,t,n,r){t.value=n,t.getSnapshot=r,Po(t)&&Fo(e)}function Ro(e,t,n){return n((function(){Po(t)&&Fo(e)}))}function Po(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Ca(e,1);null!==t&&rc(t,e,1,-1)}function Vo(e){var t=Ao();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return To().memoizedState}function jo(e,t,n,r){var i=Ao();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return jo(8390656,8,e,t)}function Go(e,t){return zo(2048,8,e,t)}function Wo(e,t){return zo(4,2,e,t)}function Ko(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ku=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{bt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ia(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ia(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){bo=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Ao().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=Ao();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ao();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ao().memoizedState=e},useState:Vo,useDebugValue:Yo,useDeferredValue:function(e){return Ao().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Zo.bind(null,e[1]),Ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Ao();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ds)throw Error(a(349));0!==(30&po)||Mo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Ro.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Lo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ao(),t=Ds.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:Co,useRef:Bo,useState:function(){return Co(Io)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[Co(Io)[0],To().memoizedState]},useMutableSource:No,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:Do,useRef:Bo,useState:function(){return Do(Io)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Do(Io)[0],To().memoizedState]},useMutableSource:No,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ma(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Ks=r),hu(0,t)},n}function vu(e,t,n){(n=Ma(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ac.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ma(-1,1)).tag=2,La(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bu=k.ReactCurrentOwner,ku=!1;function wu(e,t,n,r){t.child=null===e?$a(t,null,n,r):Xa(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||ku?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Mc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Lc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(ku=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(ku=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Ls,Ms),Ms|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Ls,Ms),Ms|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ai(Ls,Ms),Ms|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ai(Ls,Ms),Ms|=r;return wu(e,t,i,n),t.child}function Au(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Oi(n)?Di:Ii.current;return a=Ni(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||ku?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Iu(e,t,n,r,i){if(Oi(n)){var a=!0;Pi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Gu(e,t),qa(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ni(t,c=Oi(n)?Di:Ii.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ga(t,o,r,c),Da=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ci.current||Da?("function"===typeof l&&(Ba(t,n,l,r),s=t.memoizedState),(u=Da||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ni(t,s=Oi(n)?Di:Ii.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ga(t,o,r,s),Da=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ci.current||Da?("function"===typeof d&&(Ba(t,n,d,r),p=t.memoizedState),(c=Da||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cu(e,t,n,r,a,i)}function Cu(e,t,n,r,i,a){Au(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,bu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),ro(e,t.containerInfo)}function Nu(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ou,Mu,Lu,Ru,Pu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ai(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Pc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Pu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Bu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Pc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Pu,o);if(0===(1&t.mode))return Bu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Bu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),ku||s){if(null!==(r=Ds)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ca(e,i),rc(r,e,i,-1))}return mc(),Bu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Xi,Hi[Qi++]=$i,Hi[Qi++]=Yi,Xi=e.id,$i=e.overflow,Yi=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Lc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Lc(r,u):(u=Pc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Pu,i}return e=(u=e.child).sibling,i=Lc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bu(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ai(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Oi(t.type)&&Mi(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Ci),Si(Ii),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Mu(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Lu(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Ur(Rr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ou(e,t,!1,!1),t.stateNode=e;e:{switch(s=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Ur(Rr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&b(e,o,l,s))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ru(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Rs&&(Rs=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Mu(e,t),null===e&&zr(t.stateNode.containerInfo),Hu(t),null;case 10:return _a(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Rs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ai(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*$e()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=uo.current,Ai(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ms)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Mi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ci),Si(Ii),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ou=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Mu=function(){},Lu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ru=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xu=!1,$u=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!$u&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,ds(e,t,n),$u=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Sc(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),be(s,u);var l=be(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):b(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Sc(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Sc(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=$e())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,ms(t,e),$u=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==p?(p.return=d,Zu=p):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bs(e,t,n){Zu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Xu;var c=$u;if(Xu=o,($u=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,ks(a,t,n),a=a.sibling;Zu=i,Xu=u,$u=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&as(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Ss=Math.ceil,As=k.ReactCurrentDispatcher,Ts=k.ReactCurrentOwner,Is=k.ReactCurrentBatchConfig,Cs=0,Ds=null,Ns=null,Os=0,Ms=0,Ls=Ei(0),Rs=0,Ps=null,Fs=0,Vs=0,Us=0,Bs=null,js=null,zs=0,qs=1/0,Gs=null,Ws=!1,Ks=null,Hs=null,Qs=!1,Ys=null,Xs=0,$s=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&Cs)?$e():-1!==Zs?Zs:Zs=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Os?Os&-Os:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<$s)throw $s=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Cs)&&e===Ds||(e===Ds&&(0===(2&Cs)&&(Vs|=n),4===Rs&&sc(e,Os)),ic(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(qs=$e()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ds?Os:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,ji(e)}(cc.bind(null,e)):ji(cc.bind(null,e)),oi((function(){0===(6&Cs)&&zi()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ds?Os:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=vc();for(Ds===e&&Os===t||(Gs=null,qs=$e()+500,dc(e,t));;)try{bc();break}catch(s){pc(e,s)}wa(),As.current=o,Cs=i,null!==Ns?t=0:(Ds=null,Os=0,t=Rs)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ps,dc(e,0),sc(e,r),ic(e,$e()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ps,dc(e,0),sc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,js,Gs);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,js,Gs),t);break}_c(e,js,Gs);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,js,Gs),r);break}_c(e,js,Gs);break;default:throw Error(a(329))}}}return ic(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Bs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=js,js=n,null!==t&&uc(t)),e}function uc(e){null===js?js=e:js.push.apply(js,e)}function sc(e,t){for(t&=~Us,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Cs))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ps,dc(e,0),sc(e,t),ic(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,js,Gs),ic(e,$e()),null}function lc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(qs=$e()+500,Ui&&zi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Cs)&&xc();var t=Cs;Cs|=1;var n=Is.transition,r=bt;try{if(Is.transition=null,bt=1,e)return e()}finally{bt=r,Is.transition=n,0===(6&(Cs=t))&&zi()}}function hc(){Ms=Ls.current,Si(Ls)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mi();break;case 3:io(),Si(Ci),Si(Ii),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ds=e,Ns=e=Lc(e.current,null),Os=Ms=t,Rs=0,Ps=null,Us=Vs=Fs=0,js=Bs=null,null!==Aa){for(t=0;t<Aa.length;t++)if(null!==(r=(n=Aa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Aa=null}return e}function pc(e,t){for(;;){var n=Ns;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,bo=!1,ko=0,Ts.current=null,null===n||null===n.return){Rs=1,Ps=t,Ns=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Os,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Rs&&(Rs=2),null===Bs?Bs=[o]:Bs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Pa(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hs||!Hs.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Pa(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(k){t=k,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function vc(){var e=As.current;return As.current=ou,null===e?ou:e}function mc(){0!==Rs&&3!==Rs&&2!==Rs||(Rs=4),null===Ds||0===(268435455&Fs)&&0===(268435455&Vs)||sc(Ds,Os)}function yc(e,t){var n=Cs;Cs|=2;var r=vc();for(Ds===e&&Os===t||(Gs=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Cs=n,As.current=r,null!==Ns)throw Error(a(261));return Ds=null,Os=0,Rs}function gc(){for(;null!==Ns;)kc(Ns)}function bc(){for(;null!==Ns&&!Ye();)kc(Ns)}function kc(e){var t=Es(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?wc(e):Ns=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Ms)))return void(Ns=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Rs=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Rs&&(Rs=5)}function _c(e,t,n){var r=bt,i=Is.transition;try{Is.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==Ys);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ds&&(Ns=Ds=null,Os=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Dc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=bt;bt=1;var s=Cs;Cs|=4,Ts.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,bs(n,e,i),Xe(),Cs=s,bt=u,Is.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,Xs=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Ks,Ks=null,e;0!==(1&Xs)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Js?$s++:($s=0,Js=e):$s=0,zi()}(e,t,n,r)}finally{Is.transition=i,bt=r}return null}function xc(){if(null!==Ys){var e=kt(Xs),t=Is.transition,n=bt;try{if(Is.transition=null,bt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,Xs=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var b=e.current;for(Zu=b;null!==Zu;){var k=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==k)k.return=u,Zu=k;else e:for(u=b;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Sc(s,s.return,_)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Cs=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,Is.transition=t}}return!1}function Ec(e,t,n){e=La(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=La(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Ac(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Os&n)===n&&(4===Rs||3===Rs&&(130023424&Os)===Os&&500>$e()-zs?dc(e,0):Us|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Ca(e,t))&&(yt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Dc(e,t){return He(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Nc(e,t,n,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Mc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Pc(n.children,i,o,t);case E:u=8,i|=8;break;case S:return(e=Oc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case C:return(e=Oc(13,n,t,i)).elementType=C,e.lanes=o,e;case D:return(e=Oc(19,n,t,i)).elementType=D,e.lanes=o,e;case M:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:u=10;break e;case T:u=9;break e;case I:u=11;break e;case N:u=14;break e;case O:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Oc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Pc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Vc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Bc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Oc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Na(a),e}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Ri(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Ma(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,La(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ma(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=La(i,t,o))&&(rc(e,i,o,a),Ra(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)ku=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ku=!1,function(e,t,n){switch(t.tag){case 3:Du(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Pi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ai(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ai(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Vu(e,t,n):(Ai(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Ai(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Wu(e,t,n)}(e,t,n);ku=0!==(131072&e.flags)}else ku=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gu(e,t),e=t.pendingProps;var i=Ni(t,Ii.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Pi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Na(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Cu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===N)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Iu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Du(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Nu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Nu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Au(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Vu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ai(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ci.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ma(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Gu(e,t),t.tag=1,Oi(r)?(e=!0,Pi(t)):e=!1,Ea(t,n),qa(t,r,i),Wa(t,r,i,n),Cu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wc(o);u.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Gc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Gc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,$e()),0===(6&Cs)&&(qs=$e()+500,zi()))}break;case 13:fc((function(){var t=Ca(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},_t=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Ca(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},Et=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=lc,Ce=fc;var tl={usingClientEntryPoint:!1,Events:[bi,ki,wi,Ae,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var k=b.prototype=new g;k.constructor=b,v(k,y.prototype),k.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+I(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(A(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+I(u=e[c],c);s+=C(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=C(u=u.value,t,i,l=a+I(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function D(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},M={transition:null},L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:M,ReactCurrentOwner:x};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,k(e),!v)if(null!==r(c))v=!0,M(_);else{var t=r(l);null!==t&&L(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(A),A=-1),p=!0;var a=d;try{for(k(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),k(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&L(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,S=null,A=-1,T=5,I=-1;function C(){return!(t.unstable_now()-I<T)}function D(){if(null!==S){var e=t.unstable_now();I=e;var n=!0;try{n=S(!0,e)}finally{n?x():(E=!1,S=null)}}else E=!1}if("function"===typeof b)x=function(){b(D)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,O=N.port2;N.port1.onmessage=D,x=function(){O.postMessage(null)}}else x=function(){y(D,0)};function M(e){S=e,E||(E=!0,x())}function L(e,n){A=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,M(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(A),A=-1):m=!0,L(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,M(_))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},270:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAACZAgMAAABGcK48AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADFBMVEUAAAAAOabVKx7////PigyjAAAAAWJLR0QDEQxM8gAAAAd0SU1FB+YCFxQ2BsCXUZUAAAA5SURBVGje7cuxCQAwCAAwT3Txv8690h8cBCHZEwEAANxRU6mqqqqqqqqq6nr9U09VVVVVVVVV1e3aAKmAG9OU3NIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjItMDItMjNUMjA6NTQ6MDYrMDA6MDBRjnAZAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIyLTAyLTIzVDIwOjU0OjA2KzAwOjAwINPIpQAAAABJRU5ErkJggg=="},901:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABLAAAAMgBAMAAADBzoYxAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEVkyP9DmeIAOaaOMEvVKx7///+AmppyAAAAAWJLR0QF+G/pxwAAAAd0SU1FB+YFHxITBlt9CT8AAARUSURBVHja7dJBDQAgEAPBWsACFrCAf02YuD5IZiRsNgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPrCgIBsKjIWxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWBhLAoyFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2NhLDAWxsJYMD3WgYJcKDAWxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2NhLAkwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMBcbCWBgLjIWxMBYYC2NhLDAWxsJYYCyMhbHAWBgLY4GxMBbGAmNhLIwFxsJYGAuMhbEwFhgLY2EsMBbGwlhgLIyFscBYGAtjgbEwFsYCY2EsjAXGwlgYC4yFsTAWGAtjYSwwFsbCWGAsjIWxwFgYC2OBsTAWxgJjYSyMhbHAWBgLY8GwB2DTFJhG2Cf4AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA1LTMxVDE4OjE5OjA2KzAwOjAwePMb9gAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNS0zMVQxODoxOTowNiswMDowMAmuo0oAAAAASUVORK5CYII="}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/soviet_tunes/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return G},SDK_VERSION:function(){return Xe},_DEFAULT_ENTRY_NAME:function(){return Fe},_addComponent:function(){return je},_addOrOverwriteComponent:function(){return ze},_apps:function(){return Ue},_clearComponents:function(){return Ke},_components:function(){return Be},_getProvider:function(){return Ge},_registerComponent:function(){return qe},_removeServiceInstance:function(){return We},deleteApp:function(){return et},getApp:function(){return Je},getApps:function(){return Ze},initializeApp:function(){return $e},onLog:function(){return rt},registerVersion:function(){return nt},setLogLevel:function(){return it}});var t=n(791),r=n(250);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(T_){c=!0,i=T_}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(T_){l=function(e,t,n){return e[t]=n}}function f(e,t,n,i){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T_){return{type:"throw",arg:T_}}}e.wrap=f;var d={};function p(){}function v(){}function m(){}var y={};l(y,a,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(I([])));b&&b!==t&&n.call(b,a)&&(y=b);var k=m.prototype=p.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(r,a,o,s){var c=h(e[r],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==u(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return i("throw",e,o,s)}))}s(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=m,r(k,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:v,configurable:!0}),v.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(_.prototype),l(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(f(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),l(k,c,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function c(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){c(a,r,i,o,u,"next",e)}function u(e){c(a,r,i,o,u,"throw",e)}o(void 0)}))}}function f(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}function h(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function E(e,t){if(t&&("object"===u(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function S(e){var t=x();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}function A(e,t,n){return A=x()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&k(i,n.prototype),i},A.apply(null,arguments)}function T(e){var t="function"===typeof Map?new Map:void 0;return T=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return A(e,arguments,_(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),k(n,e)},T(e)}var I=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(I(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new D;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},D=function(e){w(n,e);var t=S(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return y(n)}(T(Error)),N=function(e){return function(e){var t=I(e);return C.encodeByteArray(t,!0)}(e).replace(/\./g,"")},O=function(e){try{return C.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function M(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&L(n)&&(e[n]=M(e[n],t[n]));return e}function L(e){return"__proto__"!==e}var R=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},P=function(){try{return R()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/soviet_tunes",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&O(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},F=function(e){var t=function(e){var t,n;return null===(n=null===(t=P())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},V=function(){var e;return null===(e=P())||void 0===e?void 0:e.config},U=function(){function e(){var t=this;v(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function B(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[N(JSON.stringify({alg:"none",type:"JWT"})),N(JSON.stringify(a)),""].join(".")}function j(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function z(){var e,t=null===(e=P())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function q(){try{return"object"===typeof indexedDB}catch(e){return!1}}var G=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(b(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(b(a),W.prototype.create),a}return y(n)}(T(Error)),W=function(){function e(t,n,r){v(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(K,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new G(n,a,t)}}]),e}();var K=/\{\$([^}]+)}/g;function H(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Q(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Y(u)&&Y(s)){if(!Q(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Y(e){return null!==e&&"object"===typeof e}function X(e,t){var n=new $(e,t);return n.subscribe.bind(n)}var $=function(){function e(t,n){var r=this;v(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=g(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(T_){r.e(T_)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=J),void 0===r.error&&(r.error=J),void 0===r.complete&&(r.complete=J);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function J(){}function Z(e){return e&&e._delegate?e._delegate:e}function ee(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var te=function(){function e(t,n,r){v(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ne="[DEFAULT]",re=function(){function e(t,n){v(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new U;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ne})}catch(c){}var t,n=g(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=o(t.value,2),i=r[0],a=r[1],u=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:u});a.resolve(s)}catch(c){}}}catch(T_){n.e(T_)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=l(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ee(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ee(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),u=g(this.instancesDeferred.entries());try{for(u.s();!(i=u.n()).done;){var s=o(i.value,2),c=s[0],l=s[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(T_){u.e(T_)}finally{u.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(cm){}}}catch(T_){i.e(T_)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ne?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(cm){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;return this.component?this.component.multipleInstances?e:ne:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ie,ae,oe=function(){function e(t){v(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new re(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ue=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ae||(ae={}));var se={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},ce=ae.INFO,le=(h(ie={},ae.DEBUG,"log"),h(ie,ae.VERBOSE,"log"),h(ie,ae.INFO,"info"),h(ie,ae.WARN,"warn"),h(ie,ae.ERROR,"error"),ie),fe=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=le[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},he=function(){function e(t){v(this,e),this.name=t,this._logLevel=ce,this._logHandler=fe,this._userLogHandler=null,ue.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ae))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?se[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.DEBUG].concat(t)),this._logHandler.apply(this,[this,ae.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ae.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.INFO].concat(t)),this._logHandler.apply(this,[this,ae.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.WARN].concat(t)),this._logHandler.apply(this,[this,ae.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.ERROR].concat(t)),this._logHandler.apply(this,[this,ae.ERROR].concat(t))}}]),e}();var de,pe,ve=function(e,t){return t.some((function(t){return e instanceof t}))};var me=new WeakMap,ye=new WeakMap,ge=new WeakMap,be=new WeakMap,ke=new WeakMap;var we={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ye.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ge.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ee(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function _e(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Se(this),n),Ee(me.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(e.apply(Se(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Se(this),t].concat(r));return ge.set(a,t.sort?t.sort():[t]),Ee(a)}}function xe(e){return"function"===typeof e?_e(e):(e instanceof IDBTransaction&&function(e){if(!ye.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ye.set(e,t)}}(e),ve(e,de||(de=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,we):e)}function Ee(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ee(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&me.set(t,e)})).catch((function(){})),ke.set(t,e),t}(e);if(be.has(e))return be.get(e);var t=xe(e);return t!==e&&(be.set(e,t),ke.set(t,e)),t}var Se=function(e){return ke.get(e)};var Ae,Te,Ie,Ce=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Ne=new Map;function Oe(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Ne.get(t))return Ne.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=De.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ce.includes(n))){var a=function(){var e=l(s().mark((function e(t){var a,o,u,c,l,f,h=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,c=h.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=h[f];return r&&(u=u.index(l.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,l),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ne.set(t,a),a}}}Ae=function(e){return p(p({},e),{},{get:function(t,n,r){return Oe(t,n)||e.get(t,n,r)},has:function(t,n){return!!Oe(t,n)||e.has(t,n)}})},we=Ae(we);var Me=function(){function e(t){v(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Le="@firebase/app",Re="0.9.9",Pe=new he("@firebase/app"),Fe="[DEFAULT]",Ve=(h(Te={},Le,"fire-core"),h(Te,"@firebase/app-compat","fire-core-compat"),h(Te,"@firebase/analytics","fire-analytics"),h(Te,"@firebase/analytics-compat","fire-analytics-compat"),h(Te,"@firebase/app-check","fire-app-check"),h(Te,"@firebase/app-check-compat","fire-app-check-compat"),h(Te,"@firebase/auth","fire-auth"),h(Te,"@firebase/auth-compat","fire-auth-compat"),h(Te,"@firebase/database","fire-rtdb"),h(Te,"@firebase/database-compat","fire-rtdb-compat"),h(Te,"@firebase/functions","fire-fn"),h(Te,"@firebase/functions-compat","fire-fn-compat"),h(Te,"@firebase/installations","fire-iid"),h(Te,"@firebase/installations-compat","fire-iid-compat"),h(Te,"@firebase/messaging","fire-fcm"),h(Te,"@firebase/messaging-compat","fire-fcm-compat"),h(Te,"@firebase/performance","fire-perf"),h(Te,"@firebase/performance-compat","fire-perf-compat"),h(Te,"@firebase/remote-config","fire-rc"),h(Te,"@firebase/remote-config-compat","fire-rc-compat"),h(Te,"@firebase/storage","fire-gcs"),h(Te,"@firebase/storage-compat","fire-gcs-compat"),h(Te,"@firebase/firestore","fire-fst"),h(Te,"@firebase/firestore-compat","fire-fst-compat"),h(Te,"fire-js","fire-js"),h(Te,"firebase","fire-js-all"),Te),Ue=new Map,Be=new Map;function je(e,t){try{e.container.addComponent(t)}catch(n){Pe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ze(e,t){e.container.addOrOverwriteComponent(t)}function qe(e){var t=e.name;if(Be.has(t))return Pe.debug("There were multiple attempts to register component ".concat(t,".")),!1;Be.set(t,e);var n,r=g(Ue.values());try{for(r.s();!(n=r.n()).done;){je(n.value,e)}}catch(T_){r.e(T_)}finally{r.f()}return!0}function Ge(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function We(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fe;Ge(e,t).clearInstance(n)}function Ke(){Be.clear()}var He=(h(Ie={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(Ie,"bad-app-name","Illegal App name: '{$appName}"),h(Ie,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),h(Ie,"app-deleted","Firebase App named '{$appName}' already deleted"),h(Ie,"no-options","Need to provide options, when not being deployed to hosting via source."),h(Ie,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),h(Ie,"invalid-log-argument","First argument to `onLog` must be null or a function."),h(Ie,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),h(Ie,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),h(Ie,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),h(Ie,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ie),Qe=new W("app","Firebase",He),Ye=function(){function e(t,n,r){var i=this;v(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new te("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Qe.create("app-deleted",{appName:this._name})}}]),e}(),Xe="9.21.0";function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Fe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Qe.create("bad-app-name",{appName:String(i)});if(n||(n=V()),!n)throw Qe.create("no-options");var a=Ue.get(i);if(a){if(Q(n,a.options)&&Q(r,a.config))return a;throw Qe.create("duplicate-app",{appName:i})}var o,u=new oe(i),s=g(Be.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(T_){s.e(T_)}finally{s.f()}var l=new Ye(n,r,u);return Ue.set(i,l),l}function Je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=Ue.get(e);if(!t&&e===Fe)return $e();if(!t)throw Qe.create("no-app",{appName:e});return t}function Ze(){return Array.from(Ue.values())}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=l(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ue.has(n)){e.next=6;break}return Ue.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e,t,n){var r,i=null!==(r=Ve[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Pe.warn(u.join(" "))}qe(new te("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function rt(e,t){if(null!==e&&"function"!==typeof e)throw Qe.create("invalid-log-argument");!function(e,t){var n,r=g(ue);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=se[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ae[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(T_){r.e(T_)}finally{r.f()}}(e,t)}function it(e){var t;t=e,ue.forEach((function(e){e.setLogLevel(t)}))}var at="firebase-heartbeat-database",ot=1,ut="firebase-heartbeat-store",st=null;function ct(){return st||(st=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Ee(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Ee(u.result),e.oldVersion,e.newVersion,Ee(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(at,ot,{upgrade:function(e,t){if(0===t)e.createObjectStore(ut)}}).catch((function(e){throw Qe.create("idb-open",{originalErrorMessage:e.message})}))),st}function lt(e){return ft.apply(this,arguments)}function ft(){return ft=l(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct();case 3:return n=e.sent,e.abrupt("return",n.transaction(ut).objectStore(ut).get(pt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof G?Pe.warn(e.t0.message):(r=Qe.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Pe.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ft.apply(this,arguments)}function ht(e,t){return dt.apply(this,arguments)}function dt(){return dt=l(s().mark((function e(t,n){var r,i,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct();case 3:return r=e.sent,i=r.transaction(ut,"readwrite"),a=i.objectStore(ut),e.next=8,a.put(n,pt(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof G?Pe.warn(e.t0.message):(o=Qe.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Pe.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),dt.apply(this,arguments)}function pt(e){return"".concat(e.name,"!").concat(e.options.appId)}var vt=function(){function e(t){var n=this;v(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new kt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return y(e,[{key:"triggerHeartbeat",value:function(){var e=l(s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=mt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=l(s().mark((function e(){var t,n,r,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=mt(),n=yt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=N(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function mt(){return(new Date).toISOString().substring(0,10)}function yt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=g(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),wt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),wt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(T_){a.e(T_)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var gt,bt,kt=function(){function e(t){v(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return y(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=l(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,lt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=l(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ht(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=l(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ht(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ee(r.heartbeats),ee(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function wt(e){return N(JSON.stringify({version:2,heartbeats:e})).length}gt="",qe(new te("platform-logger",(function(e){return new Me(e)}),"PRIVATE")),qe(new te("heartbeat",(function(e){return new vt(e)}),"PRIVATE")),nt(Le,Re,gt),nt(Le,Re,"esm2017"),nt("fire-js","");var _t=function(){function e(t,n){var r=this;v(this,e),this._delegate=t,this.firebase=n,je(t,new te("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),et(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fe;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fe;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){je(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){ze(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),xt=(h(bt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(bt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),bt),Et=new W("app-compat","Firebase",xt);var St=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=$e(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(H(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:nt,setLogLevel:it,onLog:rt,apps:null,SDK_VERSION:Xe,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(qe(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Et.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&M(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!H(n,e=e||Fe))throw Et.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(_t);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){M(n,e)},createSubscribe:X,ErrorFactory:W,deepExtend:M}),n}(),At=new he("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){At.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Tt=self.firebase.SDK_VERSION;Tt&&Tt.indexOf("LITE")>=0&&At.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var It=St;!function(e){nt("@firebase/app-compat","0.2.9",e)}();function Ct(){return Ct="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ct.apply(this,arguments)}It.registerVersion("firebase","9.21.0","app-compat");var Dt,Nt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ot={},Mt=Mt||{},Lt=Nt||self;function Rt(){}function Pt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ft(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Vt="closure_uid_"+(1e9*Math.random()>>>0),Ut=0;function Bt(e,t,n){return e.call.apply(e.bind,arguments)}function jt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function zt(e,t,n){return(zt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bt:jt).apply(null,arguments)}function qt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Gt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Wt(){this.s=this.s,this.o=this.o}Wt.prototype.s=!1,Wt.prototype.ra=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Vt)&&e[Vt]||(e[Vt]=++Ut))},Wt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Kt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ht(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Qt(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Pt(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Yt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Yt.prototype.h=function(){this.defaultPrevented=!0};var Xt=function(){if(!Lt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Lt.addEventListener("test",Rt,t),Lt.removeEventListener("test",Rt,t)}catch(n){}return e}();function $t(e){return/^[\s\xa0]*$/.test(e)}var Jt=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Zt(e,t){return e<t?-1:e>t?1:0}function en(){var e=Lt.navigator;return e&&(e=e.userAgent)?e:""}function tn(e){return-1!=en().indexOf(e)}function nn(e){return nn[" "](e),e}function rn(e,t,n){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}nn[" "]=Rt;var an,on=tn("Opera"),un=tn("Trident")||tn("MSIE"),sn=tn("Edge"),cn=sn||un,ln=tn("Gecko")&&!(-1!=en().toLowerCase().indexOf("webkit")&&!tn("Edge"))&&!(tn("Trident")||tn("MSIE"))&&!tn("Edge"),fn=-1!=en().toLowerCase().indexOf("webkit")&&!tn("Edge");function hn(){var e=Lt.document;return e?e.documentMode:void 0}e:{var dn="",pn=function(){var e=en();return ln?/rv:([^\);]+)(\)|;)/.exec(e):sn?/Edge\/([\d\.]+)/.exec(e):un?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):fn?/WebKit\/(\S+)/.exec(e):on?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(pn&&(dn=pn?pn[1]:""),un){var vn=hn();if(null!=vn&&vn>parseFloat(dn)){an=String(vn);break e}}an=dn}var mn,yn={};if(Lt.document&&un){var gn=hn();mn=gn||(parseInt(an,10)||void 0)}else mn=void 0;var bn=mn;function kn(e,t){if(Yt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ln){e:{try{nn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:wn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&kn.$.h.call(this)}}Gt(kn,Yt);var wn={2:"touch",3:"pen",4:"mouse"};kn.prototype.h=function(){kn.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var _n="closure_listenable_"+(1e6*Math.random()|0),xn=0;function En(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++xn,this.fa=this.ia=!1}function Sn(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function An(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Tn(e){var t={};for(var n in e)t[n]=e[n];return t}var In="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<In.length;a++)n=In[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Dn(e){this.src=e,this.g={},this.h=0}function Nn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Kt(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Sn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function On(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Dn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=On(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new En(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Mn="closure_lm_"+(1e6*Math.random()|0),Ln={};function Rn(e,t,n,r,i){if(r&&r.once)return Fn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Rn(e,t[a],n,r,i);return null}return n=Gn(n),e&&e[_n]?e.O(t,n,Ft(r)?!!r.capture:!!r,i):Pn(e,t,n,!1,r,i)}function Pn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Ft(i)?!!i.capture:!!i,u=zn(e);if(u||(e[Mn]=u=new Dn(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=jn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Xt||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Bn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Fn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Fn(e,t[a],n,r,i);return null}return n=Gn(n),e&&e[_n]?e.P(t,n,Ft(r)?!!r.capture:!!r,i):Pn(e,t,n,!0,r,i)}function Vn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Vn(e,t[a],n,r,i);else r=Ft(r)?!!r.capture:!!r,n=Gn(n),e&&e[_n]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=On(a=e.g[t],n,r,i))&&(Sn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=zn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=On(t,n,r,i)),(n=-1<e?t[e]:null)&&Un(n))}function Un(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[_n])Nn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Bn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=zn(t))?(Nn(n,e),0==n.h&&(n.src=null,t[Mn]=null)):Sn(e)}}}function Bn(e){return e in Ln?Ln[e]:Ln[e]="on"+e}function jn(e,t){if(e.fa)e=!0;else{t=new kn(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Un(e),e=n.call(r,t)}return e}function zn(e){return(e=e[Mn])instanceof Dn?e:null}var qn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gn(e){return"function"===typeof e?e:(e[qn]||(e[qn]=function(t){return e.handleEvent(t)}),e[qn])}function Wn(){Wt.call(this),this.i=new Dn(this),this.S=this,this.J=null}function Kn(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Yt(t,e);else if(t instanceof Yt)t.target=t.target||e;else{var i=t;Cn(t=new Yt(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Hn(o,r,!0,t)&&i}if(i=Hn(o=t.g=e,r,!0,t)&&i,i=Hn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Hn(o=t.g=n[a],r,!1,t)&&i}function Hn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Nn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Gt(Wn,Wt),Wn.prototype[_n]=!0,Wn.prototype.removeEventListener=function(e,t,n,r){Vn(this,e,t,n,r)},Wn.prototype.N=function(){if(Wn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Sn(n[r]);delete t.g[e],t.h--}}this.J=null},Wn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Wn.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Qn=Lt.JSON.stringify;function Yn(){var e=rr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Xn,$n=function(){function e(){v(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=Jn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Jn=new(function(){function e(t,n){v(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Zn}),(function(e){return e.reset()})),Zn=function(){function e(){v(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function er(e){Lt.setTimeout((function(){throw e}),0)}function tr(e,t){Xn||function(){var e=Lt.Promise.resolve(void 0);Xn=function(){e.then(ir)}}(),nr||(Xn(),nr=!0),rr.add(e,t)}var nr=!1,rr=new $n;function ir(){for(var e;e=Yn();){try{e.h.call(e.g)}catch(n){er(n)}var t=Jn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}nr=!1}function ar(e,t){Wn.call(this),this.h=e||1,this.g=t||Lt,this.j=zt(this.qb,this),this.l=Date.now()}function or(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ur(e,t,n){if("function"===typeof e)n&&(e=zt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=zt(e.handleEvent,e)}return 2147483647<Number(t)?-1:Lt.setTimeout(e,t||0)}function sr(e){e.g=ur((function(){e.g=null,e.i&&(e.i=!1,sr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Gt(ar,Wn),(Dt=ar.prototype).ga=!1,Dt.T=null,Dt.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Kn(this,"tick"),this.ga&&(or(this),this.start()))}},Dt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Dt.N=function(){ar.$.N.call(this),or(this),delete this.g};var cr=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:sr(this)}},{key:"N",value:function(){Ct(_(n.prototype),"N",this).call(this),this.g&&(Lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Wt);function lr(e){Wt.call(this),this.h=e,this.g={}}Gt(lr,Wt);var fr=[];function hr(e,t,n,r){Array.isArray(n)||(n&&(fr[0]=n.toString()),n=fr);for(var i=0;i<n.length;i++){var a=Rn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function dr(e){An(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Un(e)}),e),e.g={}}function pr(){this.g=!0}function vr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Qn(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}lr.prototype.N=function(){lr.$.N.call(this),dr(this)},lr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},pr.prototype.Ea=function(){this.g=!1},pr.prototype.info=function(){};var mr={},yr=null;function gr(){return yr=yr||new Wn}function br(e){Yt.call(this,mr.Ta,e)}function kr(e){var t=gr();Kn(t,new br(t))}function wr(e,t){Yt.call(this,mr.STAT_EVENT,e),this.stat=t}function _r(e){var t=gr();Kn(t,new wr(t,e))}function xr(e,t){Yt.call(this,mr.Ua,e),this.size=t}function Er(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Lt.setTimeout((function(){e()}),t)}mr.Ta="serverreachability",Gt(br,Yt),mr.STAT_EVENT="statevent",Gt(wr,Yt),mr.Ua="timingevent",Gt(xr,Yt);var Sr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ar={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Tr(){}function Ir(e){return e.h||(e.h=e.i())}function Cr(){}Tr.prototype.h=null;var Dr,Nr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Or(){Yt.call(this,"d")}function Mr(){Yt.call(this,"c")}function Lr(){}function Rr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new lr(this),this.P=Fr,e=cn?125:void 0,this.V=new ar(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Pr}function Pr(){this.i=null,this.g="",this.h=!1}Gt(Or,Yt),Gt(Mr,Yt),Gt(Lr,Tr),Lr.prototype.g=function(){return new XMLHttpRequest},Lr.prototype.i=function(){return{}},Dr=new Lr;var Fr=45e3,Vr={},Ur={};function Br(e,t,n){e.L=1,e.v=ai(ei(t)),e.s=n,e.S=!0,jr(e,null)}function jr(e,t){e.G=Date.now(),Wr(e),e.A=ei(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),gi(n.i,"t",r),e.C=0,n=e.l.I,e.h=new Pr,e.g=ba(e.l,n?t:null,!e.s),0<e.O&&(e.M=new cr(zt(e.Pa,e,e.g),e.O)),hr(e.U,e.g,"readystatechange",e.nb),t=e.I?Tn(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),kr(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function zr(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function qr(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Gr(e,n))==Ur){4==t&&(e.o=4,_r(14),i=!1),vr(e.j,e.m,null,"[Incomplete Response]");break}if(r==Vr){e.o=4,_r(15),vr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}vr(e.j,e.m,r,null),Xr(e,r)}zr(e)&&r!=Ur&&r!=Vr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,_r(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ca&&(e.ca=!0,(t=e.l).g==e&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),fa(t),t.L=!0,_r(11))):(vr(e.j,e.m,n,"[Invalid Chunked Response]"),Yr(e),Qr(e))}function Gr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ur:(n=Number(t.substring(n,r)),isNaN(n)?Vr:(r+=1)+n>t.length?Ur:(t=t.substr(r,n),e.C=r+n,t))}function Wr(e){e.Y=Date.now()+e.P,Kr(e,e.P)}function Kr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Er(zt(e.lb,e),t)}function Hr(e){e.B&&(Lt.clearTimeout(e.B),e.B=null)}function Qr(e){0==e.l.H||e.J||pa(e.l,e)}function Yr(e){Hr(e);var t=e.M;t&&"function"==typeof t.ra&&t.ra(),e.M=null,or(e.V),dr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ra())}function Xr(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Ai(n.h,e)))if(!e.K&&Ai(n.h,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;da(n),ra(n)}la(n),_r(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.M&&0==n.A&&!n.v&&(n.v=Er(zt(n.ib,n),6e3));if(1>=Si(n.h)&&n.na){try{n.na()}catch(a){}n.na=void 0}}else ma(n,11)}else if((e.K||n.g==e)&&da(n),!$t(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.J=a[1],n.oa=a[2];var o=a[3];null!=o&&(n.qa=o,n.j.info("VER="+n.qa));var u=a[4];null!=u&&(n.Ga=u,n.j.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Ti(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,ii(r.G,r.F,h))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-e.G,n.j.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=ga(r,r.I?r.oa:null,r.Y),d.K){Ii(r.h,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Hr(p),Wr(p)),r.g=d}else ca(r);0<n.i.length&&aa(n)}else"stop"!=a[0]&&"close"!=a[0]||ma(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ma(n,7):na(n):"noop"!=a[0]&&n.l&&n.l.Aa(a),n.A=0)}kr()}catch(a){}}function $r(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Pt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.sa&&"function"==typeof e.sa)return e.sa();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Pt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Pt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Dt=Rr.prototype).setTimeout=function(e){this.P=e},Dt.nb=function(e){e=e.target;var t=this.M;t&&3==Xi(e)?t.l():this.Pa(e)},Dt.Pa=function(e){try{if(e==this.g)e:{var t=Xi(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||cn||this.g&&(this.h.h||this.g.ja()||$i(this.g)))){this.J||4!=t||7==n||kr(),Hr(this);var r=this.g.da();this.aa=r;t:if(zr(this)){var i=$i(this.g);e="";var a=i.length,o=4==Xi(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Yr(this),Qr(this);var u="";break t}this.h.i=new Lt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.ba&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$t(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,_r(12),Yr(this),Qr(this);break e}vr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xr(this,r)}this.S?(qr(this,t,u),cn&&this.i&&3==t&&(hr(this.U,this.V,"tick",this.mb),this.V.start())):(vr(this.j,this.m,u,null),Xr(this,u)),4==t&&Yr(this),this.i&&!this.J&&(4==t?pa(this.l,this):(this.i=!1,Wr(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,_r(12)):(this.o=0,_r(13)),Yr(this),Qr(this)}}}catch(t){}},Dt.mb=function(){if(this.g){var e=Xi(this.g),t=this.g.ja();this.C<t.length&&(Hr(this),qr(this,e,t),this.i&&4!=e&&Wr(this))}},Dt.cancel=function(){this.J=!0,Yr(this)},Dt.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(kr(),_r(17)),Yr(this),this.o=2,Qr(this)):Kr(this,this.Y-e)};var Jr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zr(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Zr){this.h=void 0!==t?t:e.h,ti(this,e.j),this.s=e.s,this.g=e.g,ni(this,e.m),this.l=e.l,t=e.i;var n=new pi;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ri(this,n),this.o=e.o}else e&&(n=String(e).match(Jr))?(this.h=!!t,ti(this,n[1]||"",!0),this.s=oi(n[2]||""),this.g=oi(n[3]||"",!0),ni(this,n[4]),this.l=oi(n[5]||"",!0),ri(this,n[6]||"",!0),this.o=oi(n[7]||"")):(this.h=!!t,this.i=new pi(null,this.h))}function ei(e){return new Zr(e)}function ti(e,t,n){e.j=n?oi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ni(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ri(e,t,n){t instanceof pi?(e.i=t,function(e,t){t&&!e.j&&(vi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(mi(this,t),gi(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ui(t,hi)),e.i=new pi(t,e.h))}function ii(e,t,n){e.i.set(t,n)}function ai(e){return ii(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function oi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ui(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,si),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function si(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Zr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ui(t,ci,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ui(t,ci,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ui(n,"/"==n.charAt(0)?fi:li,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ui(n,di)),e.join("")};var ci=/[#\/\?@]/g,li=/[#\?:]/g,fi=/[#\?]/g,hi=/[#\?@]/g,di=/#/g;function pi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function vi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function mi(e,t){vi(e),t=bi(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yi(e,t){return vi(e),t=bi(e,t),e.g.has(t)}function gi(e,t,n){mi(e,t),0<n.length&&(e.i=null,e.g.set(bi(e,t),Ht(n)),e.h+=n.length)}function bi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Dt=pi.prototype).add=function(e,t){vi(this),this.i=null,e=bi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Dt.forEach=function(e,t){vi(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Dt.sa=function(){vi(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Dt.Z=function(e){vi(this);var t=[];if("string"===typeof e)yi(this,e)&&(t=t.concat(this.g.get(bi(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Dt.set=function(e,t){return vi(this),this.i=null,yi(this,e=bi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Dt.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var ki=y((function e(t,n){v(this,e),this.h=t,this.g=n}));function wi(e){this.l=e||xi,Lt.PerformanceNavigationTiming?e=0<(e=Lt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Lt.g&&Lt.g.Ka&&Lt.g.Ka()&&Lt.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _i,xi=10;function Ei(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Si(e){return e.h?1:e.g?e.g.size:0}function Ai(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ti(e,t){e.g?e.g.add(t):e.h=t}function Ii(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ci(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=g(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(T_){r.e(T_)}finally{r.f()}return n}return Ht(e.i)}function Di(){}function Ni(){this.g=new Di}function Oi(e,t,n){var r=n||"";try{$r(e,(function(e,n){var i=e;Ft(e)&&(i=Qn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Mi(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Li(e){this.l=e.fc||null,this.j=e.ob||!1}function Ri(e,t){Wn.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Pi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wi.prototype.cancel=function(){if(this.i=Ci(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=g(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(T_){t.e(T_)}finally{t.f()}this.g.clear()}},Di.prototype.stringify=function(e){return Lt.JSON.stringify(e,void 0)},Di.prototype.parse=function(e){return Lt.JSON.parse(e,void 0)},Gt(Li,Tr),Li.prototype.g=function(){return new Ri(this.l,this.j)},Li.prototype.i=(_i={},function(){return _i}),Gt(Ri,Wn);var Pi=0;function Fi(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Vi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ui(e)}function Ui(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Dt=Ri.prototype).open=function(e,t){if(this.readyState!=Pi)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ui(this)},Dt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Lt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vi(this)),this.readyState=Pi},Dt.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Lt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fi(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Dt.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Vi(this):Ui(this),3==this.readyState&&Fi(this)}},Dt.Za=function(e){this.g&&(this.response=this.responseText=e,Vi(this))},Dt.Ya=function(e){this.g&&(this.response=e,Vi(this))},Dt.ka=function(){this.g&&Vi(this)},Dt.setRequestHeader=function(e,t){this.v.append(e,t)},Dt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Dt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ri.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Bi=Lt.JSON.parse;function ji(e){Wn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=zi,this.L=this.M=!1}Gt(ji,Wn);var zi="",qi=/^https?$/i,Gi=["POST","PUT"];function Wi(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ki(e),Qi(e)}function Ki(e){e.F||(e.F=!0,Kn(e,"complete"),Kn(e,"error"))}function Hi(e){if(e.h&&"undefined"!=typeof Mt&&(!e.C[1]||4!=Xi(e)||2!=e.da()))if(e.v&&4==Xi(e))ur(e.La,0,e);else if(Kn(e,"readystatechange"),4==Xi(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Jr)[1]||null;if(!a&&Lt.self&&Lt.self.location){var o=Lt.self.location.protocol;a=o.substr(0,o.length-1)}i=!qi.test(a?a.toLowerCase():"")}t=i}if(t)Kn(e,"complete"),Kn(e,"success");else{e.m=6;try{var u=2<Xi(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.da()+"]",Ki(e)}}finally{Qi(e)}}}function Qi(e,t){if(e.g){Yi(e);var n=e.g,r=e.C[0]?Rt:null;e.g=null,e.C=null,t||Kn(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Yi(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Lt.clearTimeout(e.A),e.A=null)}function Xi(e){return e.g?e.g.readyState:0}function $i(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case zi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(no){return null}}function Ji(e){var t="";return An(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Zi(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ji(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ii(e,t,n))}function ea(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ta(e){this.Ga=0,this.i=[],this.j=new pr,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ea("failFast",!1,e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ea("baseRetryDelayMs",5e3,e),this.hb=ea("retryDelaySeedMs",1e4,e),this.eb=ea("forwardChannelMaxRetries",2,e),this.xa=ea("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.K=void 0,this.I=e&&e.supportsCrossDomainXhr||!1,this.J="",this.h=new wi(e&&e.concurrentRequestLimit),this.Ja=new Ni,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.j.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function na(e){if(ia(e),3==e.H){var t=e.W++,n=ei(e.G);ii(n,"SID",e.J),ii(n,"RID",t),ii(n,"TYPE","terminate"),ua(e,n),(t=new Rr(e,e.j,t,void 0)).L=2,t.v=ai(ei(n)),n=!1,Lt.navigator&&Lt.navigator.sendBeacon&&(n=Lt.navigator.sendBeacon(t.v.toString(),"")),!n&&Lt.Image&&((new Image).src=t.v,n=!0),n||(t.g=ba(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Wr(t)}ya(e)}function ra(e){e.g&&(fa(e),e.g.cancel(),e.g=null)}function ia(e){ra(e),e.u&&(Lt.clearTimeout(e.u),e.u=null),da(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Lt.clearTimeout(e.m),e.m=null)}function aa(e){Ei(e.h)||e.m||(e.m=!0,tr(e.Na,e),e.C=0)}function oa(e,t){var n;n=t?t.m:e.W++;var r=ei(e.G);ii(r,"SID",e.J),ii(r,"RID",n),ii(r,"AID",e.V),ua(e,r),e.o&&e.s&&Zi(r,e.o,e.s),n=new Rr(e,e.j,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.i=t.F.concat(e.i)),t=sa(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ti(e.h,n),Br(n,r,t)}function ua(e,t){e.ma&&An(e.ma,(function(e,n){ii(t,n,e)})),e.l&&$r({},(function(e,n){ii(t,n,e)}))}function sa(e,t,n){n=Math.min(e.i.length,n);var r=e.l?zt(e.l.Va,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Oi(l,o,"req"+c+"_")}catch(po){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.F=e,r}function ca(e){e.g||e.u||(e.ba=1,tr(e.Ma,e),e.A=0)}function la(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Er(zt(e.Ma,e),va(e,e.A)),e.A++,!0)}function fa(e){null!=e.B&&(Lt.clearTimeout(e.B),e.B=null)}function ha(e){e.g=new Rr(e,e.j,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=ei(e.wa);ii(t,"RID","rpc"),ii(t,"SID",e.J),ii(t,"CI",e.M?"0":"1"),ii(t,"AID",e.V),ii(t,"TYPE","xmlhttp"),ua(e,t),e.o&&e.s&&Zi(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.oa,n.L=1,n.v=ai(ei(t)),n.s=null,n.S=!0,jr(n,e)}function da(e){null!=e.v&&(Lt.clearTimeout(e.v),e.v=null)}function pa(e,t){var n=null;if(e.g==t){da(e),fa(e),e.g=null;var r=2}else{if(!Ai(e.h,t))return;n=t.F,Ii(e.h,t),r=1}if(0!=e.H)if(e.ta=t.aa,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Kn(r=gr(),new xr(r,n)),aa(e)}else ca(e);else if(3==(i=t.o)||0==i&&0<e.ta||!(1==r&&function(e,t){return!(Si(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.F.concat(e.i),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Er(zt(e.Na,e,t),va(e,e.C)),e.C++,!0))}(e,t)||2==r&&la(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:ma(e,5);break;case 4:ma(e,10);break;case 3:ma(e,6);break;default:ma(e,2)}}function va(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.l||(n*=2),n*t}function ma(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=zt(e.pb,e);n||(n=new Zr("//www.google.com/images/cleardot.gif"),Lt.location&&"http"==Lt.location.protocol||ti(n,"https"),ai(n)),function(e,t){var n=new pr;if(Lt.Image){var r=new Image;r.onload=qt(Mi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qt(Mi,n,r,"TestLoadImage: error",!1,t),r.onabort=qt(Mi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qt(Mi,n,r,"TestLoadImage: timeout",!1,t),Lt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else _r(2);e.H=0,e.l&&e.l.za(t),ya(e),ia(e)}function ya(e){if(e.H=0,e.pa=[],e.l){var t=Ci(e.h);0==t.length&&0==e.i.length||(Qt(e.pa,t),Qt(e.pa,e.i),e.h.i.length=0,Ht(e.i),e.i.length=0),e.l.ya()}}function ga(e,t,n){var r=n instanceof Zr?ei(n):new Zr(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),ni(r,r.m);else{var i=Lt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Zr(null,void 0);r&&ti(a,r),t&&(a.g=t),i&&ni(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&ii(r,n,t),ii(r,"VER",e.qa),ua(e,r),r}function ba(e,t,n){if(t&&!e.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new ji(new Li({ob:!0})):new ji(e.va)).Oa(e.I),t}function ka(){}function wa(){if(un&&!(10<=Number(bn)))throw Error("Environmental error: no available transport.")}function _a(e,t){Wn.call(this),this.g=new ta(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!$t(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!$t(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Sa(this)}function xa(e){Or.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ea(){Mr.call(this),this.status=1}function Sa(e){this.g=e}function Aa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ta(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Ia(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Dt=ji.prototype).Oa=function(e){this.M=e},Dt.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Dr.g(),this.C=this.u?Ir(this.u):Ir(Dr),this.g.onreadystatechange=zt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Wi(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,u=g(r.keys());try{for(u.s();!(a=u.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(T_){u.e(T_)}finally{u.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Lt.FormData&&e instanceof Lt.FormData,!(0<=Kt(Gi,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=g(n);try{for(l.s();!(c=l.n()).done;){var f=o(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(T_){l.e(T_)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Yi(this),0<this.B&&((this.L=function(e){return un&&rn(yn,9,(function(){for(var e=0,t=Jt(String(an)).split("."),n=Jt("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Zt(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Zt(0==a[2].length,0==o[2].length)||Zt(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zt(this.ua,this)):this.A=ur(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Wi(this,s)}},Dt.ua=function(){"undefined"!=typeof Mt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kn(this,"timeout"),this.abort(8))},Dt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Kn(this,"complete"),Kn(this,"abort"),Qi(this))},Dt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qi(this,!0)),ji.$.N.call(this)},Dt.La=function(){this.s||(this.G||this.v||this.l?Hi(this):this.kb())},Dt.kb=function(){Hi(this)},Dt.da=function(){try{return 2<Xi(this)?this.g.status:-1}catch(_i){return-1}},Dt.ja=function(){try{return this.g?this.g.responseText:""}catch(_i){return""}},Dt.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Bi(t)}},Dt.Ia=function(){return this.m},Dt.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Dt=ta.prototype).qa=8,Dt.H=1,Dt.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Rr(this,this.j,e,void 0),n=this.s;if(this.U&&(n?Cn(n=Tn(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=sa(this,t,r),ii(i=ei(this.G),"RID",e),ii(i,"CVER",22),this.F&&ii(i,"X-HTTP-Session-Id",this.F),ua(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Ji(n)))+"&"+r:this.o&&Zi(i,this.o,n)),Ti(this.h,t),this.bb&&ii(i,"TYPE","init"),this.P?(ii(i,"$req",r),ii(i,"SID","null"),t.ba=!0,Br(t,i,null)):Br(t,i,r),this.H=2}}else 3==this.H&&(e?oa(this,e):0==this.i.length||Ei(this.h)||oa(this))},Dt.Ma=function(){if(this.u=null,ha(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var e=2*this.S;this.j.info("BP detection timer enabled: "+e),this.B=Er(zt(this.jb,this),e)}},Dt.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,_r(10),ra(this),ha(this))},Dt.ib=function(){null!=this.v&&(this.v=null,ra(this),la(this),_r(19))},Dt.pb=function(e){e?(this.j.info("Successfully pinged google.com"),_r(2)):(this.j.info("Failed to ping google.com"),_r(1))},(Dt=ka.prototype).Ba=function(){},Dt.Aa=function(){},Dt.za=function(){},Dt.ya=function(){},Dt.Va=function(){},wa.prototype.g=function(e,t){return new _a(e,t)},Gt(_a,Wn),_a.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var e=this.g,t=this.l,n=this.h||void 0;_r(0),e.Y=t,e.ma=n||{},e.M=e.aa,e.G=ga(e,null,e.Y),aa(e)},_a.prototype.close=function(){na(this.g)},_a.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Qn(e),e=n);t.i.push(new ki(t.fb++,e)),3==t.H&&aa(t)},_a.prototype.N=function(){this.g.l=null,delete this.j,na(this.g),delete this.g,_a.$.N.call(this)},Gt(xa,Or),Gt(Ea,Mr),Gt(Sa,ka),Sa.prototype.Ba=function(){Kn(this.g,"a")},Sa.prototype.Aa=function(e){Kn(this.g,new xa(e))},Sa.prototype.za=function(e){Kn(this.g,new Ea)},Sa.prototype.ya=function(){Kn(this.g,"b")},Gt(Aa,(function(){this.blockSize=-1})),Aa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Aa.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Ta(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Ta(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Ta(this,r),i=0;break}}this.h=i,this.i+=t},Aa.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Ca={};function Da(e){return-128<=e&&128>e?rn(Ca,e,(function(e){return new Ia([0|e],0>e?-1:0)})):new Ia([0|e],0>e?-1:0)}function Na(e){if(isNaN(e)||!isFinite(e))return Ma;if(0>e)return Va(Na(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Oa;return new Ia(t,0)}var Oa=4294967296,Ma=Da(0),La=Da(1),Ra=Da(16777216);function Pa(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Fa(e){return-1==e.h}function Va(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ia(n,~e.h).add(La)}function Ua(e,t){return e.add(Va(t))}function Ba(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ja(e,t){this.g=e,this.h=t}function za(e,t){if(Pa(t))throw Error("division by zero");if(Pa(e))return new ja(Ma,Ma);if(Fa(e))return t=za(Va(e),t),new ja(Va(t.g),Va(t.h));if(Fa(t))return t=za(e,Va(t)),new ja(Va(t.g),t.h);if(30<e.g.length){if(Fa(e)||Fa(t))throw Error("slowDivide_ only works with positive integers.");for(var n=La,r=t;0>=r.X(e);)n=qa(n),r=qa(r);var i=Ga(n,1),a=Ga(r,1);for(r=Ga(r,2),n=Ga(n,2);!Pa(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Ga(r,1),n=Ga(n,1)}return t=Ua(e,i.R(t)),new ja(i,t)}for(i=Ma;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Na(n)).R(t);Fa(o)||0<o.X(e);)o=(a=Na(n-=r)).R(t);Pa(a)&&(a=La),i=i.add(a),e=Ua(e,o)}return new ja(i,e)}function qa(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ia(n,e.h)}function Ga(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Ia(i,e.h)}(Dt=Ia.prototype).ea=function(){if(Fa(this))return-Va(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Oa+r)*t,t*=Oa}return e},Dt.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Pa(this))return"0";if(Fa(this))return"-"+Va(this).toString(e);for(var t=Na(Math.pow(e,6)),n=this,r="";;){var i=za(n,t).g,a=((0<(n=Ua(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Pa(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Dt.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Dt.X=function(e){return Fa(e=Ua(this,e))?-1:Pa(e)?0:1},Dt.abs=function(){return Fa(this)?Va(this):this},Dt.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Ia(n,-2147483648&n[n.length-1]?-1:0)},Dt.R=function(e){if(Pa(this)||Pa(e))return Ma;if(Fa(this))return Fa(e)?Va(this).R(Va(e)):Va(Va(this).R(e));if(Fa(e))return Va(this.R(Va(e)));if(0>this.X(Ra)&&0>e.X(Ra))return Na(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Ba(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Ba(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Ba(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Ba(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ia(n,0)},Dt.gb=function(e){return za(this,e).h},Dt.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ia(n,this.h&e.h)},Dt.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ia(n,this.h|e.h)},Dt.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ia(n,this.h^e.h)},wa.prototype.createWebChannel=wa.prototype.g,_a.prototype.send=_a.prototype.u,_a.prototype.open=_a.prototype.m,_a.prototype.close=_a.prototype.close,Sr.NO_ERROR=0,Sr.TIMEOUT=8,Sr.HTTP_ERROR=6,Ar.COMPLETE="complete",Cr.EventType=Nr,Nr.OPEN="a",Nr.CLOSE="b",Nr.ERROR="c",Nr.MESSAGE="d",Wn.prototype.listen=Wn.prototype.O,ji.prototype.listenOnce=ji.prototype.P,ji.prototype.getLastError=ji.prototype.Sa,ji.prototype.getLastErrorCode=ji.prototype.Ia,ji.prototype.getStatus=ji.prototype.da,ji.prototype.getResponseJson=ji.prototype.Wa,ji.prototype.getResponseText=ji.prototype.ja,ji.prototype.send=ji.prototype.ha,ji.prototype.setWithCredentials=ji.prototype.Oa,Aa.prototype.digest=Aa.prototype.l,Aa.prototype.reset=Aa.prototype.reset,Aa.prototype.update=Aa.prototype.j,Ia.prototype.add=Ia.prototype.add,Ia.prototype.multiply=Ia.prototype.R,Ia.prototype.modulo=Ia.prototype.gb,Ia.prototype.compare=Ia.prototype.X,Ia.prototype.toNumber=Ia.prototype.ea,Ia.prototype.toString=Ia.prototype.toString,Ia.prototype.getBits=Ia.prototype.D,Ia.fromNumber=Na,Ia.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Va(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Na(Math.pow(n,8)),i=Ma,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Na(Math.pow(n,o)),i=i.R(o).add(Na(u))):i=(i=i.R(r)).add(Na(u))}return i};var Wa=Ot.createWebChannelTransport=function(){return new wa},Ka=Ot.getStatEventTarget=function(){return gr()},Ha=Ot.ErrorCode=Sr,Qa=Ot.EventType=Ar,Ya=Ot.Event=mr,Xa=Ot.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},$a=Ot.FetchXmlHttpFactory=Li,Ja=Ot.WebChannel=Cr,Za=Ot.XhrIo=ji,eo=Ot.Md5=Aa,to=Ot.Integer=Ia,no="@firebase/firestore",ro=function(){function e(t){v(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ro.UNAUTHENTICATED=new ro(null),ro.GOOGLE_CREDENTIALS=new ro("google-credentials-uid"),ro.FIRST_PARTY=new ro("first-party-uid"),ro.MOCK_USER=new ro("mock-user");var io="9.21.0",ao=new he("@firebase/firestore");function oo(){return ao.logLevel}function uo(e){if(ao.logLevel<=ae.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(lo);ao.debug.apply(ao,["Firestore (".concat(io,"): ").concat(e)].concat(ee(i)))}}function so(e){if(ao.logLevel<=ae.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(lo);ao.error.apply(ao,["Firestore (".concat(io,"): ").concat(e)].concat(ee(i)))}}function co(e){if(ao.logLevel<=ae.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(lo);ao.warn.apply(ao,["Firestore (".concat(io,"): ").concat(e)].concat(ee(i)))}}function lo(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(io,") INTERNAL ASSERTION FAILED: ")+e;throw so(t),new Error(t)}function ho(e,t){e||fo()}function po(e,t){return e}var vo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},mo=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(G),yo=y((function e(){var t=this;v(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),go=y((function e(t,n){v(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),bo=function(){function e(){v(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ro.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),ko=function(){function e(t){v(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),wo=function(){function e(t){v(this,e),this.t=t,this.currentUser=ro.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new yo;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new yo,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){uo("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(uo("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new yo)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(uo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ho("string"==typeof n.accessToken),new go(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return ho(null===e||"string"==typeof e),new ro(e)}}]),e}(),_o=function(){function e(t,n,r){v(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=ro.FIRST_PARTY,this.g=new Map}return y(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),xo=function(){function e(t,n,r){v(this,e),this.h=t,this.l=n,this.m=r}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new _o(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ro.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Eo=y((function e(t){v(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),So=function(){function e(t){v(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&uo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,uo("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){uo("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):uo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(ho("string"==typeof t.token),e.T=t.token,new Eo(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Ao(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var To=function(){function e(){v(this,e)}return y(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Ao(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Io(e,t){return e<t?-1:e>t?1:0}function Co(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Do(e){return e+"\0"}var No=function(){function e(t,n){if(v(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new mo(vo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new mo(vo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new mo(vo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mo(vo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Io(this.nanoseconds,e.nanoseconds):Io(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Oo=function(){function e(t){v(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new No(0,0))}},{key:"max",value:function(){return new e(new No(253402300799,999999999))}}]),e}(),Mo=function(){function e(t,n,r){v(this,e),void 0===n?n=0:n>t.length&&fo(),void 0===r?r=t.length-n:r>t.length-n&&fo(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Lo=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new mo(vo.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ee(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Mo),Ro=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Po=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ro.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new mo(vo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new mo(vo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new mo(vo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new mo(vo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Mo),Fo=function(){function e(t){v(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Lo.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Lo.fromString(t))}},{key:"fromName",value:function(t){return new e(Lo.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Lo.emptyPath())}},{key:"comparator",value:function(e,t){return Lo.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Lo(t.slice()))}}]),e}(),Vo=y((function e(t,n,r,i){v(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Uo(e){return e.fields.find((function(e){return 2===e.kind}))}function Bo(e){return e.fields.filter((function(e){return 2!==e.kind}))}Vo.UNKNOWN_ID=-1;var jo=y((function e(t,n){v(this,e),this.fieldPath=t,this.kind=n}));var zo=function(){function e(t,n){v(this,e),this.sequenceNumber=t,this.offset=n}return y(e,null,[{key:"empty",value:function(){return new e(0,Wo.min())}}]),e}();function qo(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Oo.fromTimestamp(1e9===r?new No(n+1,0):new No(n,r));return new Wo(i,Fo.empty(),t)}function Go(e){return new Wo(e.readTime,e.key,-1)}var Wo=function(){function e(t,n,r){v(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e(Oo.min(),Fo.empty(),-1)}},{key:"max",value:function(){return new e(Oo.max(),Fo.empty(),-1)}}]),e}();function Ko(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Fo.comparator(e.documentKey,t.documentKey))?n:Io(e.largestBatchId,t.largestBatchId)}var Ho="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qo=function(){function e(){v(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Yo(e){return Xo.apply(this,arguments)}function Xo(){return(Xo=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===vo.FAILED_PRECONDITION&&t.message===Ho){e.next=2;break}throw t;case 2:uo("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $o=function(){function e(t){var n=this;v(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&fo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=g(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(T_){i.e(T_)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Jo=function(){function e(t,n){var r=this;v(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new yo,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new tu(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=ou(e.target.error);r.R.reject(new tu(t,n))}}return y(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(uo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new ru(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new tu(n,t)}}}]),e}(),Zo=function(){function e(t,n,r){v(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(j())&&so("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"O",value:function(){var e=l(s().mark((function e(t){var n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return uo("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new tu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new mo(vo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new mo(vo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new tu(t,n))},i.onupgradeneeded=function(e){uo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.$(t,i.transaction,e.oldVersion,n.version).next((function(){uo("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=l(s().mark((function e(t,n,r,i){var a,o,u,c,l=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=s().mark((function e(){var n,u,c,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,l.O(t);case 4:return l.db=e.sent,n=Jo.open(l.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),$o.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),c=e.t1,f="FirebaseError"!==c.name&&o<3,uo("SimpleDb","Transaction failed with error:",c.message,"Retrying:",f),l.close(),f){e.next=18;break}return e.abrupt("return",{v:Promise.reject(c)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(c=e.t0)){e.next=7;break}return e.abrupt("return",c.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return uo("SimpleDb","Removing database:",e),iu(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!q())return!1;if(e.C())return!0;var t=j(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/soviet_tunes",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),eu=function(){function e(t){v(this,e),this.L=t,this.q=!1,this.U=null}return y(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return iu(this.L.delete())}}]),e}(),tu=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,vo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return y(n)}(mo);function nu(e){return"IndexedDbTransactionError"===e.name}var ru=function(){function e(t){v(this,e),this.store=t}return y(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(uo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(uo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),iu(n)}},{key:"add",value:function(e){return uo("SimpleDb","ADD",this.store.name,e,e),iu(this.store.add(e))}},{key:"get",value:function(e){var t=this;return iu(this.store.get(e)).next((function(n){return void 0===n&&(n=null),uo("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return uo("SimpleDb","DELETE",this.store.name,e),iu(this.store.delete(e))}},{key:"count",value:function(){return uo("SimpleDb","COUNT",this.store.name),iu(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new $o((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new $o((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){uo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new $o((function(n,r){t.onerror=function(e){var t=ou(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new $o((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new eu(i),o=t(i.primaryKey,i.value,a);if(o instanceof $o){var u=o.catch((function(e){return a.done(),$o.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return $o.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function iu(e){return new $o((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ou(e.target.error);n(t)}}))}var au=!1;function ou(e){var t=Zo.S(j());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new mo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return au||(au=!0,setTimeout((function(){throw r}),0)),r}}return e}var uu=function(){function e(t,n){v(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return y(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;uo("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=uo,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!nu(e.t4)){e.next=17;break}uo("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Yo(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),su=function(){function e(t,n){v(this,e),this.localStore=t,this.persistence=n}return y(e,[{key:"nt",value:function(){var e=l(s().mark((function e(){var t,n=this,r=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return $o.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return uo("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return uo("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Go(t);Ko(r,n)>0&&(n=r)})),new Wo(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),cu=function(){function e(t,n){var r=this;v(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function lu(e){return null==e}function fu(e){return 0===e&&1/e==-1/0}function hu(e){return"number"==typeof e&&Number.isInteger(e)&&!fu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function du(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=vu(t)),t=pu(e.get(n),t);return vu(t)}function pu(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function vu(e){return e+"\x01\x01"}function mu(e){var t=e.length;if(ho(t>=2),2===t)return ho("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Lo.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&fo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:fo()}a=o+2}return new Lo(r)}cu.ct=-1;var yu=["userId","batchId"];function gu(e,t){return[e,du(t)]}function bu(e,t,n){return[e,du(t),n]}var ku={},wu=["prefixPath","collectionGroup","readTime","documentId"],_u=["prefixPath","collectionGroup","documentId"],xu=["collectionGroup","readTime","prefixPath","documentId"],Eu=["canonicalId","targetId"],Su=["targetId","path"],Au=["path","targetId"],Tu=["collectionId","parent"],Iu=["indexId","uid"],Cu=["uid","sequenceNumber"],Du=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Nu=["indexId","uid","orderedDocumentKey"],Ou=["userId","collectionPath","documentId"],Mu=["userId","collectionPath","largestBatchId"],Lu=["userId","collectionGroup","largestBatchId"],Ru=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Pu=[].concat(ee(Ru),["documentOverlays"]),Fu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vu=Fu,Uu=[].concat(Vu,["indexConfiguration","indexState","indexEntries"]),Bu=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).at=e,i.currentSequenceNumber=r,i}return y(n)}(Qo);function ju(e,t){var n=po(e);return Zo.M(n.at,t)}function zu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function qu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Gu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Wu=function(){function e(t,n){v(this,e),this.comparator=t,this.root=n||Hu.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Hu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Hu.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ku(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ku(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ku(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ku(this.root,e,this.comparator,!0)}}]),e}(),Ku=function(){function e(t,n,r,i){v(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Hu=function(){function e(t,n,r,i,a){v(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw fo();if(this.right.isRed())throw fo();var e=this.left.check();if(e!==this.right.check())throw fo();return e+(this.isRed()?0:1)}}]),e}();Hu.EMPTY=null,Hu.RED=!0,Hu.BLACK=!1,Hu.EMPTY=new(function(){function e(){v(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw fo()}},{key:"value",get:function(){throw fo()}},{key:"color",get:function(){throw fo()}},{key:"left",get:function(){throw fo()}},{key:"right",get:function(){throw fo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Hu(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Qu=function(){function e(t){v(this,e),this.comparator=t,this.data=new Wu(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Yu(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Yu(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Yu=function(){function e(t){v(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Xu(e){return e.hasNext()?e.getNext():void 0}var $u=function(){function e(t){v(this,e),this.fields=t,t.sort(Po.comparator)}return y(e,[{key:"unionWith",value:function(t){var n,r=new Qu(Po.comparator),i=g(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(T_){i.e(T_)}finally{i.f()}var o,u=g(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(T_){u.e(T_)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=g(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(T_){n.e(T_)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Co(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Ju=function(e){w(n,e);var t=S(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return y(n)}(T(Error));var Zu=function(e){function t(e){v(this,t),this.binaryString=e}return y(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Io(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ju("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Zu.EMPTY_BYTE_STRING=new Zu("");var es=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ts(e){if(ho(!!e),"string"==typeof e){var t=0,n=es.exec(e);if(ho(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ns(e.seconds),nanos:ns(e.nanos)}}function ns(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function rs(e){return"string"==typeof e?Zu.fromBase64String(e):Zu.fromUint8Array(e)}function is(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function as(e){var t=e.mapValue.fields.__previous_value__;return is(t)?as(t):t}function os(e){var t=ts(e.mapValue.fields.__local_write_time__.timestampValue);return new No(t.seconds,t.nanos)}var us=y((function e(t,n,r,i,a,o,u,s){v(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),ss=function(){function e(t,n){v(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),cs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ls={nullValue:"NULL_VALUE"};function fs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?is(e)?4:Ss(e)?9007199254740991:10:fo()}function hs(e,t){if(e===t)return!0;var n=fs(e);if(n!==fs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return os(e).isEqual(os(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=ts(e.timestampValue),r=ts(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return rs(e.bytesValue).isEqual(rs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ns(e.geoPointValue.latitude)===ns(t.geoPointValue.latitude)&&ns(e.geoPointValue.longitude)===ns(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ns(e.integerValue)===ns(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=ns(e.doubleValue),r=ns(t.doubleValue);return n===r?fu(n)===fu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Co(e.arrayValue.values||[],t.arrayValue.values||[],hs);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(zu(n)!==zu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hs(n[i],r[i])))return!1;return!0}(e,t);default:return fo()}}function ds(e,t){return void 0!==(e.values||[]).find((function(e){return hs(e,t)}))}function ps(e,t){if(e===t)return 0;var n=fs(e),r=fs(t);if(n!==r)return Io(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Io(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=ns(e.integerValue||e.doubleValue),r=ns(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return vs(e.timestampValue,t.timestampValue);case 4:return vs(os(e),os(t));case 5:return Io(e.stringValue,t.stringValue);case 6:return function(e,t){var n=rs(e),r=rs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Io(n[i],r[i]);if(0!==a)return a}return Io(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Io(ns(e.latitude),ns(t.latitude));return 0!==n?n:Io(ns(e.longitude),ns(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ps(n[i],r[i]);if(a)return a}return Io(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===cs.mapValue&&t===cs.mapValue)return 0;if(e===cs.mapValue)return 1;if(t===cs.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Io(r[o],a[o]);if(0!==u)return u;var s=ps(n[r[o]],i[a[o]]);if(0!==s)return s}return Io(r.length,a.length)}(e.mapValue,t.mapValue);default:throw fo()}}function vs(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Io(e,t);var n=ts(e),r=ts(t),i=Io(n.seconds,r.seconds);return 0!==i?i:Io(n.nanos,r.nanos)}function ms(e){return ys(e)}function ys(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=ts(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?rs(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Fo.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=g(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ys(a)}}catch(T_){i.e(T_)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=g(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ys(e.fields[a]))}}catch(T_){i.e(T_)}finally{i.f()}return n+"}"}(e.mapValue):fo();var t,n}function gs(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function bs(e){return!!e&&"integerValue"in e}function ks(e){return!!e&&"arrayValue"in e}function ws(e){return!!e&&"nullValue"in e}function _s(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function xs(e){return!!e&&"mapValue"in e}function Es(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return qu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Es(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Es(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Ss(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function As(e){return"nullValue"in e?ls:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?gs(ss.empty(),Fo.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:fo()}function Ts(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?gs(ss.empty(),Fo.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?cs:fo()}function Is(e,t){var n=ps(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Cs(e,t){var n=ps(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ds=function(){function e(t){v(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!xs(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Es(t)}},{key:"setAll",value:function(e){var t=this,n=Po.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Es(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());xs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return hs(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];xs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){qu(t,(function(t,n){return e[t]=n}));var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(T_){i.e(T_)}finally{i.f()}}},{key:"clone",value:function(){return new e(Es(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Ns(e){var t=[];return qu(e.fields,(function(e,n){var r=new Po([e]);if(xs(n)){var i=Ns(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=g(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(T_){o.e(T_)}finally{o.f()}}}else t.push(r)})),new $u(t)}var Os=function(){function e(t,n,r,i,a,o,u){v(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Oo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ds.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ds.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Oo.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Oo.min(),Oo.min(),Oo.min(),Ds.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Oo.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Oo.min(),Oo.min(),Ds.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Oo.min(),Oo.min(),Ds.empty(),2)}}]),e}(),Ms=y((function e(t,n){v(this,e),this.position=t,this.inclusive=n}));function Ls(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Fo.comparator(Fo.fromName(o.referenceValue),n.key):ps(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Rs(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!hs(e.position[n],t.position[n]))return!1;return!0}var Ps=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";v(this,e),this.field=t,this.dir=n}));function Fs(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Vs=y((function e(){v(this,e)})),Us=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ps(t,this.value)):null!==t&&fs(this.value)===fs(t)&&this.matchesComparison(ps(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fo()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Ys(e,t,r):"array-contains"===t?new Zs(e,r):"in"===t?new ec(e,r):"not-in"===t?new tc(e,r):"array-contains-any"===t?new nc(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Xs(e,n):new $s(e,n)}}]),n}(Vs),Bs=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return y(n,[{key:"matches",value:function(e){return js(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=g(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(T_){n.e(T_)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Vs);function js(e){return"and"===e.op}function zs(e){return"or"===e.op}function qs(e){return Gs(e)&&js(e)}function Gs(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Bs)return!1}}catch(T_){n.e(T_)}finally{n.f()}return!0}function Ws(e){if(e instanceof Us)return e.field.canonicalString()+e.op.toString()+ms(e.value);if(qs(e))return e.filters.map((function(e){return Ws(e)})).join(",");var t=e.filters.map((function(e){return Ws(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Ks(e,t){return e instanceof Us?function(e,t){return t instanceof Us&&e.op===t.op&&e.field.isEqual(t.field)&&hs(e.value,t.value)}(e,t):e instanceof Bs?function(e,t){return t instanceof Bs&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Ks(n,t.filters[r])}),!0)}(e,t):void fo()}function Hs(e,t){var n=e.filters.concat(t);return Bs.create(n,e.op)}function Qs(e){return e instanceof Us?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ms(e.value))}(e):e instanceof Bs?function(e){return e.op.toString()+" {"+e.getFilters().map(Qs).join(" ,")+"}"}(e):"Filter"}var Ys=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r,i)).key=Fo.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=Fo.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Us),Xs=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,"in",r)).keys=Js("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Us),$s=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,"not-in",r)).keys=Js("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Us);function Js(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Fo.fromName(e.referenceValue)}))}var Zs=function(e){w(n,e);var t=S(n);function n(e,r){return v(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ks(t)&&ds(t.arrayValue,this.value)}}]),n}(Us),ec=function(e){w(n,e);var t=S(n);function n(e,r){return v(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ds(this.value.arrayValue,t)}}]),n}(Us),tc=function(e){w(n,e);var t=S(n);function n(e,r){return v(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(ds(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ds(this.value.arrayValue,t)}}]),n}(Us),nc=function(e){w(n,e);var t=S(n);function n(e,r){return v(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ks(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ds(t.value.arrayValue,e)}))}}]),n}(Us),rc=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;v(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function ic(e){return new rc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ac(e){var t=po(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Ws(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),lu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ms(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ms(e)})).join(",")),t.ft=n}return t.ft}function oc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Fs(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Ks(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Rs(e.startAt,t.startAt)&&Rs(e.endAt,t.endAt)}function uc(e){return Fo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function sc(e,t){return e.filters.filter((function(e){return e instanceof Us&&e.field.isEqual(t)}))}function cc(e,t,n){var r,i=ls,a=!0,o=g(sc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ls,c=!0;switch(u.op){case"<":case"<=":s=As(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=ls}Is({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(T_){o.e(T_)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Is({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function lc(e,t,n){var r,i=cs,a=!0,o=g(sc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=cs,c=!0;switch(u.op){case">=":case">":s=Ts(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=cs}Cs({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(T_){o.e(T_)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Cs({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var fc=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;v(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}));function hc(e,t,n,r,i,a,o,u){return new fc(e,t,n,r,i,a,o,u)}function dc(e){return new fc(e)}function pc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function vc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function mc(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(T_){n.e(T_)}finally{n.f()}return null}function yc(e){return null!==e.collectionGroup}function gc(e){var t=po(e);if(null===t.dt){t.dt=[];var n=mc(t),r=vc(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Ps(n)),t.dt.push(new Ps(Po.keyField(),"asc"));else{var i,a=!1,o=g(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(T_){o.e(T_)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Ps(Po.keyField(),s))}}}return t.dt}function bc(e){var t=po(e);if(!t._t)if("F"===t.limitType)t._t=ic(t.path,t.collectionGroup,gc(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=g(gc(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Ps(a.field,o))}}catch(T_){i.e(T_)}finally{i.f()}var u=t.endAt?new Ms(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ms(t.startAt.position,t.startAt.inclusive):null;t._t=ic(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function kc(e,t){t.getFirstInequalityField(),mc(e);var n=e.filters.concat([t]);return new fc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wc(e,t,n){return new fc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _c(e,t){return oc(bc(e),bc(t))&&e.limitType===t.limitType}function xc(e){return"".concat(ac(bc(e)),"|lt:").concat(e.limitType)}function Ec(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Qs(e)})).join(", "),"]")),lu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ms(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ms(e)})).join(",")),"Target(".concat(t,")")}(bc(e)),"; limitType=").concat(e.limitType,")")}function Sc(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Fo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=g(gc(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(T_){r.e(T_)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=g(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(T_){r.e(T_)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ls(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,gc(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ls(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,gc(e),t))}(e,t)}function Ac(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Tc(e){return function(t,n){var r,i=!1,a=g(gc(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Ic(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(T_){a.e(T_)}finally{a.f()}return 0}}function Ic(e,t,n){var r=e.field.isKeyField()?Fo.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ps(r,i):fo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return fo()}}var Cc=function(){function e(t,n){v(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=o(r.value,2),u=a[0],s=a[1];if(this.equalsFn(u,e))return s}}catch(T_){i.e(T_)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){qu(this.inner,(function(t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=o(r.value,2),u=a[0],s=a[1];e(u,s)}}catch(T_){i.e(T_)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Gu(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Dc=new Wu(Fo.comparator);function Nc(){return Dc}var Oc=new Wu(Fo.comparator);function Mc(){for(var e=Oc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Lc(e){var t=Oc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Rc(){return Fc()}function Pc(){return Fc()}function Fc(){return new Cc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Vc=new Wu(Fo.comparator),Uc=new Qu(Fo.comparator);function Bc(){for(var e=Uc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var jc=new Qu(Io);function zc(){return jc}function qc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fu(t)?"-0":t}}function Gc(e){return{integerValue:""+e}}function Wc(e,t){return hu(t)?Gc(t):qc(e,t)}var Kc=y((function e(){v(this,e),this._=void 0}));function Hc(e,t,n){return e instanceof Xc?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&is(t)&&(t=as(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof $c?Jc(e,t):e instanceof Zc?el(e,t):function(e,t){var n=Yc(e,t),r=nl(n)+nl(e.wt);return bs(n)&&bs(e.wt)?Gc(r):qc(e.serializer,r)}(e,t)}function Qc(e,t,n){return e instanceof $c?Jc(e,t):e instanceof Zc?el(e,t):n}function Yc(e,t){return e instanceof tl?bs(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Xc=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n)}(Kc),$c=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Kc);function Jc(e,t){var n,r=rl(t),i=g(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return hs(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(T_){i.e(T_)}finally{i.f()}return{arrayValue:{values:r}}}var Zc=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Kc);function el(e,t){var n,r=rl(t),i=g(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!hs(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(T_){i.e(T_)}finally{i.f()}return{arrayValue:{values:r}}}var tl=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).serializer=e,i.wt=r,i}return y(n)}(Kc);function nl(e){return ns(e.integerValue||e.doubleValue)}function rl(e){return ks(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var il=y((function e(t,n){v(this,e),this.field=t,this.transform=n}));var al=y((function e(t,n){v(this,e),this.version=t,this.transformResults=n})),ol=function(){function e(t,n){v(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ul(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var sl=y((function e(){v(this,e)}));function cl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new wl(e.key,ol.none()):new pl(e.key,e.data,ol.none());var n,r=e.data,i=Ds.empty(),a=new Qu(Po.comparator),o=g(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(T_){o.e(T_)}finally{o.f()}return new vl(e.key,i,new $u(a.toArray()),ol.none())}function ll(e,t,n){e instanceof pl?function(e,t,n){var r=e.value.clone(),i=yl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof vl?function(e,t,n){if(ul(e.precondition,t)){var r=yl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ml(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function fl(e,t,n,r){return e instanceof pl?function(e,t,n,r){if(!ul(e.precondition,t))return n;var i=e.value.clone(),a=gl(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof vl?function(e,t,n,r){if(!ul(e.precondition,t))return n;var i=gl(e.fieldTransforms,r,t),a=t.data;return a.setAll(ml(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return ul(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function hl(e,t){var n,r=null,i=g(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Yc(a.transform,o||null);null!=u&&(null===r&&(r=Ds.empty()),r.set(a.field,u))}}catch(T_){i.e(T_)}finally{i.f()}return r||null}function dl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Co(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof $c&&t instanceof $c||e instanceof Zc&&t instanceof Zc?Co(e.elements,t.elements,hs):e instanceof tl&&t instanceof tl?hs(e.wt,t.wt):e instanceof Xc&&t instanceof Xc}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var pl=function(e){w(n,e);var t=S(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return v(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(sl),vl=function(e){w(n,e);var t=S(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return v(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return y(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(sl);function ml(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function yl(e,t,n){var r=new Map;ho(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Qc(o,u,n[i]))}return r}function gl(e,t,n){var r,i=new Map,a=g(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Hc(u,s,t))}}catch(T_){a.e(T_)}finally{a.f()}return i}var bl,kl,wl=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(sl),_l=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(sl),xl=function(){function e(t,n,r,i){v(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ll(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=g(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=fl(i,e,t,this.localWriteTime))}}catch(T_){r.e(T_)}finally{r.f()}var a,o=g(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=fl(u,e,t,this.localWriteTime))}}catch(T_){o.e(T_)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Pc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=cl(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Oo.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Bc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,(function(e,t){return dl(e,t)}))&&Co(this.baseMutations,e.baseMutations,(function(e,t){return dl(e,t)}))}}]),e}(),El=function(){function e(t,n,r,i){v(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){ho(t.mutations.length===r.length);for(var i=Vc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Sl=function(){function e(t,n){v(this,e),this.largestBatchId=t,this.mutation=n}return y(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Al=y((function e(t,n){v(this,e),this.count=t,this.unchangedNames=n}));function Tl(e){switch(e){default:return fo();case vo.CANCELLED:case vo.UNKNOWN:case vo.DEADLINE_EXCEEDED:case vo.RESOURCE_EXHAUSTED:case vo.INTERNAL:case vo.UNAVAILABLE:case vo.UNAUTHENTICATED:return!1;case vo.INVALID_ARGUMENT:case vo.NOT_FOUND:case vo.ALREADY_EXISTS:case vo.PERMISSION_DENIED:case vo.FAILED_PRECONDITION:case vo.ABORTED:case vo.OUT_OF_RANGE:case vo.UNIMPLEMENTED:case vo.DATA_LOSS:return!0}}function Il(e){if(void 0===e)return so("GRPC error has no .code"),vo.UNKNOWN;switch(e){case bl.OK:return vo.OK;case bl.CANCELLED:return vo.CANCELLED;case bl.UNKNOWN:return vo.UNKNOWN;case bl.DEADLINE_EXCEEDED:return vo.DEADLINE_EXCEEDED;case bl.RESOURCE_EXHAUSTED:return vo.RESOURCE_EXHAUSTED;case bl.INTERNAL:return vo.INTERNAL;case bl.UNAVAILABLE:return vo.UNAVAILABLE;case bl.UNAUTHENTICATED:return vo.UNAUTHENTICATED;case bl.INVALID_ARGUMENT:return vo.INVALID_ARGUMENT;case bl.NOT_FOUND:return vo.NOT_FOUND;case bl.ALREADY_EXISTS:return vo.ALREADY_EXISTS;case bl.PERMISSION_DENIED:return vo.PERMISSION_DENIED;case bl.FAILED_PRECONDITION:return vo.FAILED_PRECONDITION;case bl.ABORTED:return vo.ABORTED;case bl.OUT_OF_RANGE:return vo.OUT_OF_RANGE;case bl.UNIMPLEMENTED:return vo.UNIMPLEMENTED;case bl.DATA_LOSS:return vo.DATA_LOSS;default:return fo()}}(kl=bl||(bl={}))[kl.OK=0]="OK",kl[kl.CANCELLED=1]="CANCELLED",kl[kl.UNKNOWN=2]="UNKNOWN",kl[kl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kl[kl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kl[kl.NOT_FOUND=5]="NOT_FOUND",kl[kl.ALREADY_EXISTS=6]="ALREADY_EXISTS",kl[kl.PERMISSION_DENIED=7]="PERMISSION_DENIED",kl[kl.UNAUTHENTICATED=16]="UNAUTHENTICATED",kl[kl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kl[kl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kl[kl.ABORTED=10]="ABORTED",kl[kl.OUT_OF_RANGE=11]="OUT_OF_RANGE",kl[kl.UNIMPLEMENTED=12]="UNIMPLEMENTED",kl[kl.INTERNAL=13]="INTERNAL",kl[kl.UNAVAILABLE=14]="UNAVAILABLE",kl[kl.DATA_LOSS=15]="DATA_LOSS";var Cl=function(){function e(){v(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return y(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return Dl}},{key:"getOrCreateInstance",value:function(){return null===Dl&&(Dl=new e),Dl}}]),e}(),Dl=null;function Nl(){return new TextEncoder}var Ol=new to([4294967295,4294967295],0);function Ml(e){var t=Nl().encode(e),n=new eo;return n.update(t),new Uint8Array(n.digest())}function Ll(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new to([n,r],0),new to([i,a],0)]}var Rl=function(){function e(t,n,r){if(v(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pl("Invalid padding: ".concat(n));if(r<0)throw new Pl("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Pl("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Pl("Invalid padding when bitmap length is 0: ".concat(n));this.yt=8*t.length-n,this.It=to.fromNumber(this.yt)}return y(e,[{key:"Tt",value:function(e,t,n){var r=e.add(t.multiply(to.fromNumber(n)));return 1===r.compare(Ol)&&(r=new to([r.getBits(0),r.getBits(1)],0)),r.modulo(this.It).toNumber()}},{key:"Et",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"At",value:function(e){if(0===this.yt)return!1;for(var t=o(Ll(Ml(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Tt(n,r,i);if(!this.Et(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.yt)for(var t=o(Ll(Ml(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Tt(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Pl=function(e){w(n,e);var t=S(n);function n(){var e;return v(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return y(n)}(T(Error)),Fl=function(){function e(t,n,r,i,a){v(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Vl.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Oo.min(),i,new Wu(Io),Nc(),Bc())}}]),e}(),Vl=function(){function e(t,n,r,i,a){v(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Bc(),Bc(),Bc())}}]),e}(),Ul=y((function e(t,n,r,i){v(this,e),this.vt=t,this.removedTargetIds=n,this.key=r,this.Pt=i})),Bl=y((function e(t,n){v(this,e),this.targetId=t,this.bt=n})),jl=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;v(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),zl=function(){function e(){v(this,e),this.Vt=0,this.St=Wl(),this.Dt=Zu.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}return y(e,[{key:"current",get:function(){return this.Ct}},{key:"resumeToken",get:function(){return this.Dt}},{key:"Nt",get:function(){return 0!==this.Vt}},{key:"kt",get:function(){return this.xt}},{key:"Mt",value:function(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}},{key:"Ot",value:function(){var e=Bc(),t=Bc(),n=Bc();return this.St.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:fo()}})),new Vl(this.Dt,this.Ct,e,t,n)}},{key:"$t",value:function(){this.xt=!1,this.St=Wl()}},{key:"Ft",value:function(e,t){this.xt=!0,this.St=this.St.insert(e,t)}},{key:"Bt",value:function(e){this.xt=!0,this.St=this.St.remove(e)}},{key:"Lt",value:function(){this.Vt+=1}},{key:"qt",value:function(){this.Vt-=1}},{key:"Ut",value:function(){this.xt=!0,this.Ct=!0}}]),e}(),ql=function(){function e(t){v(this,e),this.Kt=t,this.Gt=new Map,this.Qt=Nc(),this.jt=Gl(),this.zt=new Wu(Io)}return y(e,[{key:"Wt",value:function(e){var t,n=g(e.vt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Pt&&e.Pt.isFoundDocument()?this.Ht(r,e.Pt):this.Jt(r,e.key,e.Pt)}}catch(T_){n.e(T_)}finally{n.f()}var i,a=g(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Jt(o,e.key,e.Pt)}}catch(T_){a.e(T_)}finally{a.f()}}},{key:"Yt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Xt(n);switch(e.state){case 0:t.Zt(n)&&r.Mt(e.resumeToken);break;case 1:r.qt(),r.Nt||r.$t(),r.Mt(e.resumeToken);break;case 2:r.qt(),r.Nt||t.removeTarget(n);break;case 3:t.Zt(n)&&(r.Ut(),r.Mt(e.resumeToken));break;case 4:t.Zt(n)&&(t.te(n),r.Mt(e.resumeToken));break;default:fo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((function(e,r){n.Zt(r)&&t(r)}))}},{key:"ee",value:function(e){var t,n=e.targetId,r=e.bt.count,i=this.ne(n);if(i){var a=i.target;if(uc(a))if(0===r){var o=new Fo(a.path);this.Jt(n,o,Os.newNoDocument(o,Oo.min()))}else ho(1===r);else{var u=this.se(n);if(u!==r){var s=this.ie(e,u);if(0!==s){this.te(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.zt=this.zt.insert(n,c)}null===(t=Cl.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.bt))}}}}},{key:"ie",value:function(e,t){var n=e.bt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=rs(c).toUint8Array()}catch(e){if(e instanceof Ju)return co("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new Rl(a,f,d)}catch(e){return co(e instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.yt?1:i!==t-this.re(e.targetId,o)?2:0}},{key:"re",value:function(e,t){var n=this,r=this.Kt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Kt.oe(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.At(o)||(n.Jt(e,r,null),i++)})),i}},{key:"ue",value:function(e){var t=this,n=new Map;this.Gt.forEach((function(r,i){var a=t.ne(i);if(a){if(r.current&&uc(a.target)){var o=new Fo(a.target.path);null!==t.Qt.get(o)||t.ce(i,o)||t.Jt(i,o,Os.newNoDocument(o,e))}r.kt&&(n.set(i,r.Ot()),r.$t())}}));var r=Bc();this.jt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ne(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Qt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Fl(e,n,this.zt,this.Qt,r);return this.Qt=Nc(),this.jt=Gl(),this.zt=new Wu(Io),i}},{key:"Ht",value:function(e,t){if(this.Zt(e)){var n=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,n),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}}},{key:"Jt",value:function(e,t,n){if(this.Zt(e)){var r=this.Xt(e);this.ce(e,t)?r.Ft(t,1):r.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),n&&(this.Qt=this.Qt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Gt.delete(e)}},{key:"se",value:function(e){var t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Lt",value:function(e){this.Xt(e).Lt()}},{key:"Xt",value:function(e){var t=this.Gt.get(e);return t||(t=new zl,this.Gt.set(e,t)),t}},{key:"ae",value:function(e){var t=this.jt.get(e);return t||(t=new Qu(Io),this.jt=this.jt.insert(e,t)),t}},{key:"Zt",value:function(e){var t=null!==this.ne(e);return t||uo("WatchChangeAggregator","Detected inactive target",e),t}},{key:"ne",value:function(e){var t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}},{key:"te",value:function(e){var t=this;this.Gt.set(e,new zl),this.Kt.getRemoteKeysForTarget(e).forEach((function(n){t.Jt(e,n,null)}))}},{key:"ce",value:function(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Gl(){return new Wu(Fo.comparator)}function Wl(){return new Wu(Fo.comparator)}var Kl={asc:"ASCENDING",desc:"DESCENDING"},Hl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ql={and:"AND",or:"OR"},Yl=y((function e(t,n){v(this,e),this.databaseId=t,this.useProto3Json=n}));function Xl(e,t){return e.useProto3Json||lu(t)?t:{value:t}}function $l(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Zl(e,t){return $l(e,t.toTimestamp())}function ef(e){return ho(!!e),Oo.fromTimestamp(function(e){var t=ts(e);return new No(t.seconds,t.nanos)}(e))}function tf(e,t){return function(e){return new Lo(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function nf(e){var t=Lo.fromString(e);return ho(Af(t)),t}function rf(e,t){return tf(e.databaseId,t.path)}function af(e,t){var n=nf(t);if(n.get(1)!==e.databaseId.projectId)throw new mo(vo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new mo(vo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Fo(cf(n))}function of(e,t){return tf(e.databaseId,t)}function uf(e){var t=nf(e);return 4===t.length?Lo.emptyPath():cf(t)}function sf(e){return new Lo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function cf(e){return ho(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function lf(e,t,n){return{name:rf(e,t),fields:n.value.mapValue.fields}}function ff(e,t,n){var r=af(e,t.name),i=ef(t.updateTime),a=t.createTime?ef(t.createTime):Oo.min(),o=new Ds({mapValue:{fields:t.fields}}),u=Os.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function hf(e,t){return"found"in t?function(e,t){ho(!!t.found),t.found.name,t.found.updateTime;var n=af(e,t.found.name),r=ef(t.found.updateTime),i=t.found.createTime?ef(t.found.createTime):Oo.min(),a=new Ds({mapValue:{fields:t.found.fields}});return Os.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){ho(!!t.missing),ho(!!t.readTime);var n=af(e,t.missing),r=ef(t.readTime);return Os.newNoDocument(n,r)}(e,t):fo()}function df(e,t){var n;if(t instanceof pl)n={update:lf(e,t.key,t.value)};else if(t instanceof wl)n={delete:rf(e,t.key)};else if(t instanceof vl)n={update:lf(e,t.key,t.data),updateMask:Sf(t.fieldMask)};else{if(!(t instanceof _l))return fo();n={verify:rf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Xc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $c)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Zc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof tl)return{fieldPath:t.field.canonicalString(),increment:n.wt};throw fo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Zl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:fo()}(e,t.precondition)),n}function pf(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ol.updateTime(ef(e.updateTime)):void 0!==e.exists?ol.exists(e.exists):ol.none()}(t.currentDocument):ol.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)ho("REQUEST_TIME"===t.setToServerValue),n=new Xc;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new $c(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Zc(i)}else"increment"in t?n=new tl(e,t.increment):fo();var a=Po.fromServerFormat(t.fieldPath);return new il(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=af(e,t.update.name),a=new Ds({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new $u(t.map((function(e){return Po.fromServerFormat(e)})))}(t.updateMask);return new vl(i,a,o,n,r)}return new pl(i,a,n,r)}if(t.delete){var u=af(e,t.delete);return new wl(u,n)}if(t.verify){var s=af(e,t.verify);return new _l(s,n)}return fo()}function vf(e,t){return{documents:[of(e,t.path)]}}function mf(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=of(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=of(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Ef(Bs.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:_f(e.field),direction:bf(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=Xl(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function yf(e){var t=uf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ho(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=gf(e);return t instanceof Bs&&qs(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Ps(xf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return lu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Ms(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Ms(n,t)}(n.endAt)),hc(t,i,u,o,s,"F",c,l)}function gf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=xf(e.unaryFilter.field);return Us.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=xf(e.unaryFilter.field);return Us.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=xf(e.unaryFilter.field);return Us.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=xf(e.unaryFilter.field);return Us.create(i,"!=",{nullValue:"NULL_VALUE"});default:return fo()}}(e):void 0!==e.fieldFilter?function(e){return Us.create(xf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Bs.create(e.compositeFilter.filters.map((function(e){return gf(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return fo()}}(e.compositeFilter.op))}(e):fo()}function bf(e){return Kl[e]}function kf(e){return Hl[e]}function wf(e){return Ql[e]}function _f(e){return{fieldPath:e.canonicalString()}}function xf(e){return Po.fromServerFormat(e.fieldPath)}function Ef(e){return e instanceof Us?function(e){if("=="===e.op){if(_s(e.value))return{unaryFilter:{field:_f(e.field),op:"IS_NAN"}};if(ws(e.value))return{unaryFilter:{field:_f(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_s(e.value))return{unaryFilter:{field:_f(e.field),op:"IS_NOT_NAN"}};if(ws(e.value))return{unaryFilter:{field:_f(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_f(e.field),op:kf(e.op),value:e.value}}}(e):e instanceof Bs?function(e){var t=e.getFilters().map((function(e){return Ef(e)}));return 1===t.length?t[0]:{compositeFilter:{op:wf(e.op),filters:t}}}(e):fo()}function Sf(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Af(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Tf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Oo.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Oo.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Zu.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;v(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),If=y((function e(t){v(this,e),this.le=t}));function Cf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Df(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:rf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:$l(e,t.version.toTimestamp()),createTime:$l(e,t.createTime.toTimestamp())}}(e.le,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Nf(t.version)};else{if(!t.isUnknownDocument())return fo();r.unknownDocument={path:n.path.toArray(),version:Nf(t.version)}}return r}function Df(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Nf(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Of(e){var t=new No(e.seconds,e.nanoseconds);return Oo.fromTimestamp(t)}function Mf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return pf(e.le,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return pf(e.le,t)})),u=No.fromMillis(t.localWriteTimeMs);return new xl(t.batchId,u,n,o)}function Lf(e){var t,n,r=Of(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Of(e.lastLimboFreeSnapshotVersion):Oo.min();return void 0!==e.query.documents?(ho(1===(n=e.query).documents.length),t=bc(dc(uf(n.documents[0])))):t=function(e){return bc(yf(e))}(e.query),new Tf(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Zu.fromBase64String(e.resumeToken))}function Rf(e,t){var n,r=Nf(t.snapshotVersion),i=Nf(t.lastLimboFreeSnapshotVersion);n=uc(t.target)?vf(e.le,t.target):mf(e.le,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ac(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Pf(e){var t=yf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?wc(t,t.limit,"L"):t}function Ff(e,t){return new Sl(t.largestBatchId,pf(e.le,t.overlayMutation))}function Vf(e,t){var n=t.path.lastSegment();return[e,du(t.path.popLast()),n]}function Uf(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Nf(r.readTime),documentKey:du(r.documentKey.path),largestBatchId:r.largestBatchId}}var Bf=function(){function e(){v(this,e)}return y(e,[{key:"getBundleMetadata",value:function(e,t){return jf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Of(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return jf(e).put({bundleId:(n=t).id,createTime:Nf(ef(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return zf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Pf(t.bundledQuery),readTime:Of(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return zf(e).put(function(e){return{name:e.name,readTime:Nf(ef(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function jf(e){return ju(e,"bundles")}function zf(e){return ju(e,"namedQueries")}var qf=function(){function e(t,n){v(this,e),this.serializer=t,this.userId=n}return y(e,[{key:"getOverlay",value:function(e,t){var n=this;return Gf(e).get(Vf(this.userId,t)).next((function(e){return e?Ff(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Rc();return $o.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Sl(t,a);i.push(r.de(e,o))})),$o.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(du(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Gf(e).J("collectionPathOverlayIndex",i))})),$o.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Rc(),a=du(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Gf(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Ff(r.serializer,a);i.set(o.getKey(),o)}}catch(T_){n.e(T_)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Rc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Gf(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Ff(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"de",value:function(e,t){return Gf(e).put(function(e,t,n){var r=o(Vf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:df(e.le,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"fe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Gf(e){return ju(e,"documentOverlays")}var Wf=function(){function e(){v(this,e)}return y(e,[{key:"_e",value:function(e,t){this.we(e,t),t.me()}},{key:"we",value:function(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(ns(e.integerValue));else if("doubleValue"in e){var n=ns(e.doubleValue);isNaN(n)?this.ge(t,13):(this.ge(t,15),fu(n)?t.ye(0):t.ye(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ge(t,20),"string"==typeof r?t.pe(r):(t.pe("".concat(r.seconds||"")),t.ye(r.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(rs(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ge(t,45),t.ye(i.latitude||0),t.ye(i.longitude||0)}else"mapValue"in e?Ss(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):fo()}},{key:"Ie",value:function(e,t){this.ge(t,25),this.Pe(e,t)}},{key:"Pe",value:function(e,t){t.pe(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ge(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Ie(a,t),this.we(n[a],t)}}},{key:"ve",value:function(e,t){var n=e.values||[];this.ge(t,50);var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.we(a,t)}}catch(T_){i.e(T_)}finally{i.f()}}},{key:"Ae",value:function(e,t){var n=this;this.ge(t,37),Fo.fromName(e).path.forEach((function(e){n.ge(t,60),n.Pe(e,t)}))}},{key:"ge",value:function(e,t){e.ye(t)}},{key:"Te",value:function(e){e.ye(2)}}]),e}();function Kf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Hf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Kf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Wf.be=new Wf;var Qf=function(){function e(){v(this,e),this.buffer=new Uint8Array(1024),this.position=0}return y(e,[{key:"Ve",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Se(n.value),n=t.next();this.De()}},{key:"Ce",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.xe(n.value),n=t.next();this.Ne()}},{key:"ke",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Se(i);else if(i<2048)this.Se(960|i>>>6),this.Se(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Se(480|i>>>12),this.Se(128|63&i>>>6),this.Se(128|63&i);else{var a=r.codePointAt(0);this.Se(240|a>>>18),this.Se(128|63&a>>>12),this.Se(128|63&a>>>6),this.Se(128|63&a)}}}catch(T_){n.e(T_)}finally{n.f()}this.De()}},{key:"Me",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.xe(i);else if(i<2048)this.xe(960|i>>>6),this.xe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.xe(480|i>>>12),this.xe(128|63&i>>>6),this.xe(128|63&i);else{var a=r.codePointAt(0);this.xe(240|a>>>18),this.xe(128|63&a>>>12),this.xe(128|63&a>>>6),this.xe(128|63&a)}}}catch(T_){n.e(T_)}finally{n.f()}this.Ne()}},{key:"Oe",value:function(e){var t=this.$e(e),n=Hf(t);this.Fe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Be",value:function(e){var t=this.$e(e),n=Hf(t);this.Fe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Le",value:function(){this.qe(255),this.qe(255)}},{key:"Ue",value:function(){this.Ke(255),this.Ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Ge",value:function(){return this.buffer.slice(0,this.position)}},{key:"$e",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Se",value:function(e){var t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}},{key:"xe",value:function(e){var t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}},{key:"De",value:function(){this.qe(0),this.qe(1)}},{key:"Ne",value:function(){this.Ke(0),this.Ke(1)}},{key:"qe",value:function(e){this.Fe(1),this.buffer[this.position++]=e}},{key:"Ke",value:function(e){this.Fe(1),this.buffer[this.position++]=~e}},{key:"Fe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Yf=function(){function e(t){v(this,e),this.Qe=t}return y(e,[{key:"Ee",value:function(e){this.Qe.Ve(e)}},{key:"pe",value:function(e){this.Qe.ke(e)}},{key:"ye",value:function(e){this.Qe.Oe(e)}},{key:"me",value:function(){this.Qe.Le()}}]),e}(),Xf=function(){function e(t){v(this,e),this.Qe=t}return y(e,[{key:"Ee",value:function(e){this.Qe.Ce(e)}},{key:"pe",value:function(e){this.Qe.Me(e)}},{key:"ye",value:function(e){this.Qe.Be(e)}},{key:"me",value:function(){this.Qe.Ue()}}]),e}(),$f=function(){function e(){v(this,e),this.Qe=new Qf,this.je=new Yf(this.Qe),this.ze=new Xf(this.Qe)}return y(e,[{key:"seed",value:function(e){this.Qe.seed(e)}},{key:"We",value:function(e){return 0===e?this.je:this.ze}},{key:"Ge",value:function(){return this.Qe.Ge()}},{key:"reset",value:function(){this.Qe.reset()}}]),e}(),Jf=function(){function e(t,n,r,i){v(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return y(e,[{key:"He",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Zf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=eh(e.arrayValue,t.arrayValue))?n:0!==(n=eh(e.directionalValue,t.directionalValue))?n:Fo.comparator(e.documentKey,t.documentKey)}function eh(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var th=function(){function e(t){v(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Je=t.orderBy,this.Ye=[];var n,r=g(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Xe=i:this.Ye.push(i)}}catch(T_){r.e(T_)}finally{r.f()}}return y(e,[{key:"Ze",value:function(e){ho(e.collectionGroup===this.collectionId);var t=Uo(e);if(void 0!==t&&!this.tn(t))return!1;for(var n=Bo(e),r=0,i=0;r<n.length&&this.tn(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Xe){var a=n[r];if(!this.en(this.Xe,a)||!this.nn(this.Je[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Je.length||!this.nn(this.Je[i++],o))return!1}return!0}},{key:"tn",value:function(e){var t,n=g(this.Ye);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.en(r,e))return!0}}catch(T_){n.e(T_)}finally{n.f()}return!1}},{key:"en",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"nn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function nh(e){var t,n;if(ho(e instanceof Us||e instanceof Bs),e instanceof Us){if(e instanceof ec){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Us.create(e.field,"==",t)})))||[];return Bs.create(r,"or")}return e}var i=e.filters.map((function(e){return nh(e)}));return Bs.create(i,e.op)}function rh(e){if(0===e.getFilters().length)return[];var t=uh(nh(e));return ho(oh(t)),ih(t)||ah(t)?[t]:t.getFilters()}function ih(e){return e instanceof Us}function ah(e){return e instanceof Bs&&qs(e)}function oh(e){return ih(e)||ah(e)||function(e){if(e instanceof Bs&&zs(e)){var t,n=g(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!ih(r)&&!ah(r))return!1}}catch(T_){n.e(T_)}finally{n.f()}return!0}return!1}(e)}function uh(e){if(ho(e instanceof Us||e instanceof Bs),e instanceof Us)return e;if(1===e.filters.length)return uh(e.filters[0]);var t=e.filters.map((function(e){return uh(e)})),n=Bs.create(t,e.op);return oh(n=lh(n))?n:(ho(n instanceof Bs),ho(js(n)),ho(n.filters.length>1),n.filters.reduce((function(e,t){return sh(e,t)})))}function sh(e,t){var n;return ho(e instanceof Us||e instanceof Bs),ho(t instanceof Us||t instanceof Bs),n=e instanceof Us?t instanceof Us?function(e,t){return Bs.create([e,t],"and")}(e,t):ch(e,t):t instanceof Us?ch(t,e):function(e,t){if(ho(e.filters.length>0&&t.filters.length>0),js(e)&&js(t))return Hs(e,t.getFilters());var n=zs(e)?e:t,r=zs(e)?t:e,i=n.filters.map((function(e){return sh(e,r)}));return Bs.create(i,"or")}(e,t),lh(n)}function ch(e,t){if(js(t))return Hs(t,e.getFilters());var n=t.filters.map((function(t){return sh(e,t)}));return Bs.create(n,"or")}function lh(e){if(ho(e instanceof Us||e instanceof Bs),e instanceof Us)return e;var t=e.getFilters();if(1===t.length)return lh(t[0]);if(Gs(e))return e;var n=t.map((function(e){return lh(e)})),r=[];return n.forEach((function(t){t instanceof Us?r.push(t):t instanceof Bs&&(t.op===e.op?r.push.apply(r,ee(t.filters)):r.push(t))})),1===r.length?r[0]:Bs.create(r,e.op)}var fh=function(){function e(){v(this,e),this.sn=new hh}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.sn.add(t),$o.resolve()}},{key:"getCollectionParents",value:function(e,t){return $o.resolve(this.sn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return $o.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return $o.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return $o.resolve(null)}},{key:"getIndexType",value:function(e,t){return $o.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return $o.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return $o.resolve(null)}},{key:"getMinOffset",value:function(e,t){return $o.resolve(Wo.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return $o.resolve(Wo.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return $o.resolve()}},{key:"updateIndexEntries",value:function(e,t){return $o.resolve()}}]),e}(),hh=function(){function e(){v(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Qu(Lo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Qu(Lo.comparator)).toArray()}}]),e}(),dh=new Uint8Array(0),ph=function(){function e(t,n){v(this,e),this.user=t,this.databaseId=n,this.rn=new hh,this.on=new Cc((function(e){return ac(e)}),(function(e,t){return oc(e,t)})),this.uid=t.uid||""}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.rn.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.rn.add(t)}));var a={collectionId:r,parent:du(i)};return vh(e).put(a)}return $o.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Do(t),""],!1,!0);return vh(e).j(r).next((function(e){var r,i=g(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(mu(a.parent))}}catch(T_){i.e(T_)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=yh(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=gh(e);return a.next((function(e){o.put(Uf(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=yh(e),r=gh(e),i=mh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=mh(e),i=!0,a=new Map;return $o.forEach(this.un(t),(function(t){return n.cn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Bc(),o=[];return $o.forEach(a,(function(i,a){var u;uo("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(ac(t)));var s=function(e,t){var n=Uo(t);if(void 0===n)return null;var r,i=g(sc(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(T_){i.e(T_)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=g(Bo(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=g(sc(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(T_){u.e(T_)}finally{u.f()}}}catch(T_){i.e(T_)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=g(Bo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?cc(e,o.fieldPath,e.startAt):lc(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(T_){a.e(T_)}finally{a.f()}return new Ms(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=g(Bo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?lc(e,o.fieldPath,e.endAt):cc(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(T_){a.e(T_)}finally{a.f()}return new Ms(r,i)}(a,i),h=n.an(i,a,l),d=n.an(i,a,f),p=n.hn(i,a,c),v=n.ln(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return $o.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Fo.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return $o.resolve(null)}))}},{key:"un",value:function(e){var t=this.on.get(e);return t||(t=0===e.filters.length?[e]:rh(Bs.create(e.filters,"and")).map((function(t){return ic(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.on.set(e,t),t)}},{key:"ln",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.fn(t[h/c]):dh,f=u.dn(e,s,n[h%c],r),d=u._n(e,s,i[h%c],a),p=o.map((function(t){return u.dn(e,s,t,!0)}));l.push.apply(l,ee(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"dn",value:function(e,t,n,r){var i=new Jf(e,Fo.empty(),t,n);return r?i:i.He()}},{key:"_n",value:function(e,t,n,r){var i=new Jf(e,Fo.empty(),t,n);return r?i.He():i}},{key:"cn",value:function(e,t){var n=new th(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ze(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(T_){i.e(T_)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.un(t);return $o.forEach(i,(function(t){return n.cn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Qu(Po.comparator),r=!1,i=g(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=g(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(T_){o.e(T_)}finally{o.f()}}}catch(T_){i.e(T_)}finally{i.f()}var s,c=g(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(T_){c.e(T_)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"wn",value:function(e,t){var n,r=new $f,i=g(Bo(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.We(a.kind);Wf.be._e(o,u)}}catch(T_){i.e(T_)}finally{i.f()}return r.Ge()}},{key:"fn",value:function(e){var t=new $f;return Wf.be._e(e,t.We(0)),t.Ge()}},{key:"mn",value:function(e,t){var n=new $f;return Wf.be._e(gs(this.databaseId,t),n.We(function(e){var t=Bo(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ge()}},{key:"hn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new $f);var i,a=0,o=g(Bo(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=g(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.gn(t,s.fieldPath)&&ks(c))r=this.yn(r,s,c);else{var h=f.We(s.kind);Wf.be._e(c,h)}}}catch(T_){l.e(T_)}finally{l.f()}}}catch(T_){o.e(T_)}finally{o.f()}return this.pn(r)}},{key:"an",value:function(e,t,n){return this.hn(e,t,n.position)}},{key:"pn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Ge();return t}},{key:"yn",value:function(e,t,n){var r,i=ee(e),a=[],o=g(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=g(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new $f;f.seed(l.Ge()),Wf.be._e(s,f.We(t.kind)),a.push(f)}}catch(T_){c.e(T_)}finally{c.f()}}}catch(T_){o.e(T_)}finally{o.f()}return a}},{key:"gn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Us&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=yh(e),i=gh(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return $o.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new zo(t.sequenceNumber,new Wo(Of(t.readTime),new Fo(mu(t.documentKey)),t.largestBatchId)):zo.empty(),r=e.fields.map((function(e){var t=o(e,2),n=t[0],r=t[1];return new jo(Po.fromServerFormat(n),r)}));return new Vo(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Io(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=yh(e),a=gh(e);return this.In(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return $o.forEach(t,(function(t){return a.put(Uf(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return $o.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?$o.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),$o.forEach(a,(function(r){return n.Tn(e,t,r).next((function(t){var a=n.En(i,r);return t.isEqual(a)?$o.resolve():n.An(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return mh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"vn",value:function(e,t,n,r){return mh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}},{key:"Tn",value:function(e,t,n){var r=mh(e),i=new Qu(Zf);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},(function(e,r){i=i.add(new Jf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"En",value:function(e,t){var n=new Qu(Zf),r=this.wn(t,e);if(null==r)return n;var i=Uo(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ks(a)){var o,u=g(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Jf(t.indexId,e.key,this.fn(s),r))}}catch(T_){u.e(T_)}finally{u.f()}}}else n=n.add(new Jf(t.indexId,e.key,dh,r));return n}},{key:"An",value:function(e,t,n,r,i){var a=this;uo("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Xu(a),s=Xu(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Xu(o)):l?(i(u),u=Xu(a)):(u=Xu(a),s=Xu(o))}}(r,i,Zf,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.vn(e,t,n,r))})),$o.waitFor(o)}},{key:"In",value:function(e){var t=1;return gh(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Zf(e,t)})).filter((function(e,t,n){return!t||0!==Zf(e,n[t-1])}));var r=[];r.push(e);var i,a=g(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Zf(o,e),s=Zf(o,t);if(0===u)r[0]=e.He();else if(u>0&&s<0)r.push(o),r.push(o.He());else if(s>0)break}}catch(T_){a.e(T_)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Pn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,dh,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,dh,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Pn",value:function(e,t){return Zf(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(bh)}},{key:"getMinOffset",value:function(e,t){var n=this;return $o.mapArray(this.un(t),(function(t){return n.cn(e,t).next((function(e){return e||fo()}))})).next(bh)}}]),e}();function vh(e){return ju(e,"collectionParents")}function mh(e){return ju(e,"indexEntries")}function yh(e){return ju(e,"indexConfiguration")}function gh(e){return ju(e,"indexState")}function bh(e){ho(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Ko(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Wo(t.readTime,t.documentKey,n)}var kh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wh=function(){function e(t,n,r){v(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function _h(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){ho(1===u)})));var c,l=[],f=g(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=bu(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(T_){f.e(T_)}finally{f.f()}return $o.waitFor(a).next((function(){return l}))}function xh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw fo();t=e.noDocument}return JSON.stringify(t).length}wh.DEFAULT_COLLECTION_PERCENTILE=10,wh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wh.DEFAULT=new wh(41943040,wh.DEFAULT_COLLECTION_PERCENTILE,wh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wh.DISABLED=new wh(-1,0,0);var Eh=function(){function e(t,n,r,i){v(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.bn={}}return y(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ah(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Th(e),o=Ah(e);return o.add({}).next((function(u){ho("number"==typeof u);var s,c=new xl(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return df(e.le,t)})),i=n.mutations.map((function(t){return df(e.le,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Qu((function(e,t){return Io(e.canonicalString(),t.canonicalString())})),d=g(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=bu(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,ku))}}catch(T_){d.e(T_)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.bn[u]=c.keys()})),$o.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Ah(e).get(t).next((function(e){return e?(ho(e.userId===n.userId),Mf(n.serializer,e)):null}))}},{key:"Vn",value:function(e,t){var n=this;return this.bn[t]?$o.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.bn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Ah(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(ho(t.batchId>=r),a=Mf(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ah(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ah(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return Mf(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=gu(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Th(e).X({range:i},(function(r,i,u){var s=o(r,3),c=s[0],l=s[1],f=s[2],h=mu(l);if(c===n.userId&&t.path.isEqual(h))return Ah(e).get(f).next((function(e){if(!e)throw fo();ho(e.userId===n.userId),a.push(Mf(n.serializer,e))}));u.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Qu(Io),i=[];return t.forEach((function(t){var a=gu(n.userId,t.path),u=IDBKeyRange.lowerBound(a),s=Th(e).X({range:u},(function(e,i,a){var u=o(e,3),s=u[0],c=u[1],l=u[2],f=mu(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),$o.waitFor(i).next((function(){return n.Sn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=gu(this.userId,r),u=IDBKeyRange.lowerBound(a),s=new Qu(Io);return Th(e).X({range:u},(function(e,t,a){var u=o(e,3),c=u[0],l=u[1],f=u[2],h=mu(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.Sn(e,s)}))}},{key:"Sn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Ah(e).get(t).next((function(e){if(null===e)throw fo();ho(e.userId===n.userId),r.push(Mf(n.serializer,e))})))})),$o.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return _h(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Dn(t.batchId)})),$o.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Dn",value:function(e){delete this.bn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return $o.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Th(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=mu(e[1]);i.push(a)}else r.done()})).next((function(){ho(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Sh(e,this.userId,t)}},{key:"Cn",value:function(e){var t=this;return Ih(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"fe",value:function(t,n,r,i){return ho(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Sh(e,t,n){var r=gu(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),u=!1;return Th(e).X({range:a,Y:!0},(function(e,n,r){var a=o(e,3),s=a[0],c=a[1];a[2];s===t&&c===i&&(u=!0),r.done()})).next((function(){return u}))}function Ah(e){return ju(e,"mutations")}function Th(e){return ju(e,"documentMutations")}function Ih(e){return ju(e,"mutationQueues")}var Ch=function(){function e(t){v(this,e),this.xn=t}return y(e,[{key:"next",value:function(){return this.xn+=2,this.xn}}],[{key:"Nn",value:function(){return new e(0)}},{key:"kn",value:function(){return new e(-1)}}]),e}(),Dh=function(){function e(t,n){v(this,e),this.referenceDelegate=t,this.serializer=n}return y(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Mn(e).next((function(n){var r=new Ch(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Mn(e).next((function(e){return Oo.fromTimestamp(new No(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Mn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Mn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.$n(e,t).next((function(){return n.Mn(e).next((function(r){return r.targetCount+=1,n.Fn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.$n(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Nh(e).delete(t.targetId)})).next((function(){return n.Mn(e)})).next((function(t){return ho(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Nh(e).X((function(o,u){var s=Lf(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return $o.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Nh(e).X((function(e,n){var r=Lf(n);t(r)}))}},{key:"Mn",value:function(e){return Oh(e).get("targetGlobalKey").next((function(e){return ho(null!==e),e}))}},{key:"On",value:function(e,t){return Oh(e).put("targetGlobalKey",t)}},{key:"$n",value:function(e,t){return Nh(e).put(Rf(this.serializer,t))}},{key:"Fn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Mn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ac(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Nh(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Lf(n);oc(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Mh(e);return t.forEach((function(t){var o=du(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),$o.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Mh(e);return $o.forEach(t,(function(t){var a=du(t.path);return $o.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Mh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Mh(e),i=Bc();return r.X({range:n,Y:!0},(function(e,t,n){var r=mu(e[1]),a=new Fo(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=du(t.path),r=IDBKeyRange.bound([n],[Do(n)],!1,!0),i=0;return Mh(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=o(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"he",value:function(e,t){return Nh(e).get(t).next((function(e){return e?Lf(e):null}))}}]),e}();function Nh(e){return ju(e,"targets")}function Oh(e){return ju(e,"targetGlobal")}function Mh(e){return ju(e,"targetDocuments")}function Lh(e,t){var n=o(e,2),r=n[0],i=n[1],a=o(t,2),u=a[0],s=a[1],c=Io(r,u);return 0===c?Io(i,s):c}var Rh=function(){function e(t){v(this,e),this.Bn=t,this.buffer=new Qu(Lh),this.Ln=0}return y(e,[{key:"qn",value:function(){return++this.Ln}},{key:"Un",value:function(e){var t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Lh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Ph=function(){function e(t,n,r){v(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Kn=null}return y(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}},{key:"stop",value:function(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}},{key:"started",get:function(){return null!==this.Kn}},{key:"Gn",value:function(e){var t=this;uo("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Kn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!nu(e.t0)){e.next=12;break}uo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Yo(e.t0);case 14:return e.next=16,t.Gn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Fh=function(){function e(t,n){v(this,e),this.Qn=t,this.params=n}return y(e,[{key:"calculateTargetCount",value:function(e,t){return this.Qn.jn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return $o.resolve(cu.ct);var r=new Rh(t);return this.Qn.forEachTarget(e,(function(e){return r.Un(e.sequenceNumber)})).next((function(){return n.Qn.zn(e,(function(e){return r.Un(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Qn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Qn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(uo("LruGarbageCollector","Garbage collection skipped; disabled"),$o.resolve(kh)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(uo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),kh):n.Wn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Qn.getCacheSize(e)}},{key:"Wn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(uo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),oo()<=ae.DEBUG&&uo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),$o.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Vh(e,t){return new Fh(e,t)}var Uh=function(){function e(t,n){v(this,e),this.db=t,this.garbageCollector=Vh(this,n)}return y(e,[{key:"jn",value:function(e){var t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Hn",value:function(e){var t=0;return this.zn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"zn",value:function(e,t){return this.Jn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Bh(e,n)}},{key:"removeReference",value:function(e,t,n){return Bh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Bh(e,t)}},{key:"Yn",value:function(e,t){return function(e,t){var n=!1;return Ih(e).Z((function(r){return Sh(e,r,t).next((function(e){return e&&(n=!0),$o.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Jn(e,(function(o,u){if(u<=t){var s=n.Yn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Oo.min()),Mh(e).delete([0,du(o.path)])}))}));i.push(s)}})).next((function(){return $o.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Bh(e,t)}},{key:"Jn",value:function(e,t){var n,r=Mh(e),i=cu.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=o(e,2),u=a[0],s=(a[1],r.path),c=r.sequenceNumber;0===u?(i!==cu.ct&&t(new Fo(mu(n)),i),i=c,n=s):i=cu.ct})).next((function(){i!==cu.ct&&t(new Fo(mu(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Bh(e,t){return Mh(e).put(function(e,t){return{targetId:0,path:du(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var jh=function(){function e(){v(this,e),this.changes=new Cc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Os.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?$o.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),zh=function(){function e(t){v(this,e),this.serializer=t}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Kh(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Kh(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Df(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Xn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Os.newInvalidDocument(t);return Kh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Hh(t))},(function(e,i){r=n.Zn(t,i)})).next((function(){return r}))}},{key:"ts",value:function(e,t){var n=this,r={size:0,document:Os.newInvalidDocument(t)};return Kh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Hh(t))},(function(e,i){r={document:n.Zn(t,i),size:xh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Nc();return this.es(e,t,(function(e,t){var i=n.Zn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ns",value:function(e,t){var n=this,r=Nc(),i=new Wu(Fo.comparator);return this.es(e,t,(function(e,t){var a=n.Zn(e,t);r=r.insert(e,a),i=i.insert(e,xh(t))})).next((function(){return{documents:r,ss:i}}))}},{key:"es",value:function(e,t,n){if(t.isEmpty())return $o.resolve();var r=new Qu(Yh);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Hh(r.first()),Hh(r.last())),a=r.getIterator(),o=a.getNext();return Kh(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Fo.fromSegments([].concat(ee(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Yh(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(Hh(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Df(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Kh(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=Nc(),o=g(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Zn(Fo.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Sc(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(T_){o.e(T_)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Nc(),o=Qh(t,n),u=Qh(t,Wo.max());return Kh(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Zn(Fo.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Gh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Wh(e).get("remoteDocumentGlobalKey").next((function(e){return ho(!!e),e}))}},{key:"Xn",value:function(e,t){return Wh(e).put("remoteDocumentGlobalKey",t)}},{key:"Zn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=ff(e.le,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Fo.fromSegments(t.noDocument.path),i=Of(t.noDocument.readTime);n=Os.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return fo();var a=Fo.fromSegments(t.unknownDocument.path),o=Of(t.unknownDocument.version);n=Os.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new No(e[0],e[1]);return Oo.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Oo.min()))return n}return Os.newInvalidDocument(e)}}]),e}();function qh(e){return new zh(e)}var Gh=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).rs=e,i.trackRemovals=r,i.os=new Cc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Qu((function(e,t){return Io(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.os.get(a);if(n.push(t.rs.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Cf(t.rs.serializer,o);i=i.add(a.path.popLast());var c=xh(s);r+=c-u.size,n.push(t.rs.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Cf(t.rs.serializer,o.convertToNoDocument(Oo.min()));n.push(t.rs.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.rs.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.rs.updateMetadata(e,r)),$o.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.rs.ts(e,t).next((function(e){return n.os.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.rs.ns(e,t).next((function(e){var t=e.documents;return e.ss.forEach((function(e,r){n.os.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(jh);function Wh(e){return ju(e,"remoteDocumentGlobal")}function Kh(e){return ju(e,"remoteDocumentsV14")}function Hh(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Qh(e,t){var n=t.documentKey.path.toArray();return[e,Df(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Yh(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Io(n[a],r[a]))return i;return(i=Io(n.length,r.length))||((i=Io(n[n.length-2],r[r.length-2]))||Io(n[n.length-1],r[r.length-1]))}var Xh=y((function e(t,n){v(this,e),this.overlayedDocument=t,this.mutatedFields=n})),$h=function(){function e(t,n,r,i){v(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return y(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&fl(r.mutation,e,$u.empty(),No.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Bc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bc(),i=Rc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Mc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Rc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Bc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Nc(),a=Fc(),o=Fc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof vl)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),fl(o.mutation,t,o.mutation.getFieldMask(),No.now())):a.set(t.key,$u.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Xh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Fc(),i=new Wu((function(e,t){return e-t})),a=Bc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=g(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||$u.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Bc()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(T_){a.e(T_)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Pc();c.forEach((function(e){if(!a.has(e)){var n=cl(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return $o.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Fo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):$o.resolve(Rc()),u=-1,s=a;return o.next((function(t){return $o.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?$o.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Bc())})).next((function(e){return{batchId:u,changes:Lc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Fo(t)).next((function(e){var t=Mc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Mc();return this.indexManager.getCollectionParents(e,i).next((function(o){return $o.forEach(o,(function(o){var u=function(e,t){return new fc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Os.newInvalidDocument(r)))}));var n=Mc();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&fl(a.mutation,i,$u.empty(),No.now()),Sc(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Jh=function(){function e(t){v(this,e),this.serializer=t,this.us=new Map,this.cs=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return $o.resolve(this.us.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.us.set(t.id,{id:(n=t).id,version:n.version,createTime:ef(n.createTime)}),$o.resolve()}},{key:"getNamedQuery",value:function(e,t){return $o.resolve(this.cs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.cs.set(t.name,function(e){return{name:e.name,query:Pf(e.bundledQuery),readTime:ef(e.readTime)}}(t)),$o.resolve()}}]),e}(),Zh=function(){function e(){v(this,e),this.overlays=new Wu(Fo.comparator),this.hs=new Map}return y(e,[{key:"getOverlay",value:function(e,t){return $o.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Rc();return $o.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.de(e,t,i)})),$o.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.hs.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.hs.delete(n)),$o.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Rc(),i=t.length+1,a=new Fo(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return $o.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Wu((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Rc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Rc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return $o.resolve(s)}},{key:"de",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.hs.get(r.largestBatchId).delete(n.key);this.hs.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Sl(t,n));var a=this.hs.get(t);void 0===a&&(a=Bc(),this.hs.set(t,a)),this.hs.set(t,a.add(n.key))}}]),e}(),ed=function(){function e(){v(this,e),this.ls=new Qu(td.fs),this.ds=new Qu(td._s)}return y(e,[{key:"isEmpty",value:function(){return this.ls.isEmpty()}},{key:"addReference",value:function(e,t){var n=new td(e,t);this.ls=this.ls.add(n),this.ds=this.ds.add(n)}},{key:"ws",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.gs(new td(e,t))}},{key:"ys",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ps",value:function(e){var t=this,n=new Fo(new Lo([])),r=new td(n,e),i=new td(n,e+1),a=[];return this.ds.forEachInRange([r,i],(function(e){t.gs(e),a.push(e.key)})),a}},{key:"Is",value:function(){var e=this;this.ls.forEach((function(t){return e.gs(t)}))}},{key:"gs",value:function(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}},{key:"Ts",value:function(e){var t=new Fo(new Lo([])),n=new td(t,e),r=new td(t,e+1),i=Bc();return this.ds.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new td(e,0),n=this.ls.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),td=function(){function e(t,n){v(this,e),this.key=t,this.Es=n}return y(e,null,[{key:"fs",value:function(e,t){return Fo.comparator(e.key,t.key)||Io(e.Es,t.Es)}},{key:"_s",value:function(e,t){return Io(e.Es,t.Es)||Fo.comparator(e.key,t.key)}}]),e}(),nd=function(){function e(t,n){v(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.As=1,this.Rs=new Qu(td.fs)}return y(e,[{key:"checkEmpty",value:function(e){return $o.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new xl(i,t,n,r);this.mutationQueue.push(a);var o,u=g(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new td(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(T_){u.e(T_)}finally{u.f()}return $o.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return $o.resolve(this.vs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ps(n),i=r<0?0:r;return $o.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return $o.resolve(0===this.mutationQueue.length?-1:this.As-1)}},{key:"getAllMutationBatches",value:function(e){return $o.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new td(t,0),i=new td(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.vs(e.Es);a.push(t)})),$o.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Qu(Io);return t.forEach((function(e){var t=new td(e,0),i=new td(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.Es)}))})),$o.resolve(this.bs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Fo.isDocumentKey(i)||(i=i.child(""));var a=new td(new Fo(i),0),o=new Qu(Io);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Es)),!0)}),a),$o.resolve(this.bs(o))}},{key:"bs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.vs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;ho(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return $o.forEach(t.mutations,(function(i){var a=new td(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new td(t,0),r=this.Rs.firstAfterOrEqual(n);return $o.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,$o.resolve()}},{key:"Vs",value:function(e,t){return this.Ps(e)}},{key:"Ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"vs",value:function(e){var t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),rd=function(){function e(t){v(this,e),this.Ss=t,this.docs=new Wu(Fo.comparator),this.size=0}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ss(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return $o.resolve(n?n.document.mutableCopy():Os.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Nc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Os.newInvalidDocument(e))})),$o.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Nc(),a=t.path,o=new Fo(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Ko(Go(l),n)<=0||(r.has(l.key)||Sc(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return $o.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){fo()}},{key:"Ds",value:function(e,t){return $o.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new id(this)}},{key:"getSize",value:function(e){return $o.resolve(this.size)}}]),e}(),id=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).rs=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.rs.addEntry(e,i)):t.rs.removeEntry(r)})),$o.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.rs.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.rs.getEntries(e,t)}}]),n}(jh),ad=function(){function e(t){v(this,e),this.persistence=t,this.Cs=new Cc((function(e){return ac(e)}),oc),this.lastRemoteSnapshotVersion=Oo.min(),this.highestTargetId=0,this.xs=0,this.Ns=new ed,this.targetCount=0,this.ks=Ch.Nn()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.Cs.forEach((function(e,n){return t(n)})),$o.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return $o.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return $o.resolve(this.xs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.ks.next(),$o.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.xs&&(this.xs=t),$o.resolve()}},{key:"$n",value:function(e){this.Cs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ks=new Ch(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.$n(t),this.targetCount+=1,$o.resolve()}},{key:"updateTargetData",value:function(e,t){return this.$n(t),$o.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,$o.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Cs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Cs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),$o.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return $o.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Cs.get(t)||null;return $o.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ns.ws(t,n),$o.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ns.ys(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),$o.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ns.ps(t),$o.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ns.Ts(t);return $o.resolve(n)}},{key:"containsKey",value:function(e,t){return $o.resolve(this.Ns.containsKey(t))}}]),e}(),od=function(){function e(t,n){var r=this;v(this,e),this.Ms={},this.overlays={},this.Os=new cu(0),this.$s=!1,this.$s=!0,this.referenceDelegate=t(this),this.Fs=new ad(this),this.indexManager=new fh,this.remoteDocumentCache=new rd((function(e){return r.referenceDelegate.Bs(e)})),this.serializer=new If(n),this.Ls=new Jh(this.serializer)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.$s=!1,Promise.resolve()}},{key:"started",get:function(){return this.$s}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Zh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ms[e.toKey()];return n||(n=new nd(t,this.referenceDelegate),this.Ms[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Fs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ls}},{key:"runTransaction",value:function(e,t,n){var r=this;uo("MemoryPersistence","Starting transaction:",e);var i=new ud(this.Os.next());return this.referenceDelegate.qs(),n(i).next((function(e){return r.referenceDelegate.Us(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ks",value:function(e,t){return $o.or(Object.values(this.Ms).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),ud=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}(Qo),sd=function(){function e(t){v(this,e),this.persistence=t,this.Gs=new ed,this.Qs=null}return y(e,[{key:"zs",get:function(){if(this.Qs)return this.Qs;throw fo()}},{key:"addReference",value:function(e,t,n){return this.Gs.addReference(n,t),this.zs.delete(n.toString()),$o.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Gs.removeReference(n,t),this.zs.add(n.toString()),$o.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zs.add(t.toString()),$o.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Gs.ps(t.targetId).forEach((function(e){return n.zs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qs",value:function(){this.Qs=new Set}},{key:"Us",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $o.forEach(this.zs,(function(r){var i=Fo.fromPath(r);return t.Ws(e,i).next((function(e){e||n.removeEntry(i,Oo.min())}))})).next((function(){return t.Qs=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ws(e,t).next((function(e){e?n.zs.delete(t.toString()):n.zs.add(t.toString())}))}},{key:"Bs",value:function(e){return 0}},{key:"Ws",value:function(e,t){var n=this;return $o.or([function(){return $o.resolve(n.Gs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ks(e,t)}])}}],[{key:"js",value:function(t){return new e(t)}}]),e}(),cd=function(){function e(t){v(this,e),this.serializer=t}return y(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Jo("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yu,{unique:!0}),e.createObjectStore("documentMutations")}(e),ld(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=$o.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ld(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Oo.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yu,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return $o.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Js(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ys(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Xs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Zs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ti(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Ou});t.createIndex("collectionPathOverlayIndex",Mu,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Lu,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:wu});t.createIndex("documentKeyIndex",_u),t.createIndex("collectionGroupIndex",xu)}(e)})).next((function(){return i.ei(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ni(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Iu}).createIndex("sequenceNumberIndex",Cu,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Du}).createIndex("documentKeyIndex",Nu,{unique:!1})}(e)}))),o}},{key:"Ys",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=xh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Js",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return $o.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return $o.forEach(r,(function(r){ho(r.userId===n.userId);var i=Mf(t.serializer,r);return _h(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Xs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new Lo(n),o=function(e){return[0,du(e)]}(a);r.push(t.get(o).next((function(n){return n?$o.resolve():function(n){return t.put({targetId:0,path:du(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return $o.waitFor(r)}))}))}},{key:"Zs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Tu});var n=t.store("collectionParents"),r=new hh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:du(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new Lo(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=o(e,3),r=(n[0],n[1]),a=(n[2],mu(r));return i(a.popLast())}))}))}},{key:"ti",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=Lf(r),a=Rf(t.serializer,i);return n.put(a)}))}},{key:"ei",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Fo(Lo.fromString(i.document.name).popFirst(5)):i.noDocument?Fo.fromSegments(i.noDocument.path):i.unknownDocument?Fo.fromSegments(i.unknownDocument.path):fo()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return $o.waitFor(r)}))}},{key:"ni",value:function(e,t){var n=this,r=t.store("mutations"),i=qh(this.serializer),a=new od(sd.js,this.serializer.le);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Bc();Mf(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),$o.forEach(r,(function(e,r){var o=new ro(r),u=qf.fe(n.serializer,o),s=a.getIndexManager(o),c=Eh.fe(o,n.serializer,s,a.referenceDelegate);return new $h(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Bu(t,cu.ct),e).next()}))}))}}]),e}();function ld(e){e.createObjectStore("targetDocuments",{keyPath:Su}).createIndex("documentTargetsIndex",Au,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Eu,{unique:!0}),e.createObjectStore("targetGlobal")}var fd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",hd=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(v(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.si=a,this.window=o,this.document=u,this.ii=c,this.ri=l,this.oi=f,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=function(e){return Promise.resolve()},!e.D())throw new mo(vo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Uh(this,i),this.fi=n+"main",this.serializer=new If(s),this.di=new Zo(this.fi,this.oi,new cd(this.serializer)),this.Fs=new Dh(this.referenceDelegate,this.serializer),this.remoteDocumentCache=qh(this.serializer),this.Ls=new Bf,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&so("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return y(e,[{key:"start",value:function(){var e=this;return this.wi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new mo(vo.FAILED_PRECONDITION,fd);return e.mi(),e.gi(),e.yi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Fs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new cu(t,e.ii)})).then((function(){e.$s=!0})).catch((function(t){return e.di&&e.di.close(),Promise.reject(t)}))}},{key:"pi",value:function(e){var t=this;return this.li=function(){var n=l(s().mark((function n(r){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.di.B(function(){var t=l(s().mark((function t(n){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.wi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"wi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return pd(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ii(t).next((function(t){t||(e.isPrimary=!1,e.si.enqueueRetryable((function(){return e.li(!1)})))}))})).next((function(){return e.Ti(t)})).next((function(n){return e.isPrimary&&!n?e.Ei(t).next((function(){return!1})):!!n&&e.Ai(t).next((function(){return!0}))}))})).catch((function(t){if(nu(t))return uo("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return uo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.si.enqueueRetryable((function(){return e.li(t)})),e.isPrimary=t}))}},{key:"Ii",value:function(e){var t=this;return dd(e).get("owner").next((function(e){return $o.resolve(t.Ri(e))}))}},{key:"vi",value:function(e){return pd(e).delete(this.clientId)}},{key:"Pi",value:function(){var e=l(s().mark((function e(){var t,n,r,i,a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.bi(this.hi,18e5)){e.next=6;break}return this.hi=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=ju(e,"clientMetadata");return t.j().next((function(e){var n=a.Vi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return $o.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=g(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Si(i.clientId))}catch(T_){n.e(T_)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yi",value:function(){var e=this;this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.wi().then((function(){return e.Pi()})).then((function(){return e.yi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ti",value:function(e){var t=this;return this.ri?$o.resolve(!0):dd(e).get("owner").next((function(n){if(null!==n&&t.bi(n.leaseTimestampMs,5e3)&&!t.Di(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new mo(vo.FAILED_PRECONDITION,fd);return!1}}return!(!t.networkEnabled||!t.inForeground)||pd(e).j().next((function(e){return void 0===t.Vi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&uo("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=l(s().mark((function e(){var t=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$s=!1,this.Ci(),this.ai&&(this.ai.cancel(),this.ai=null),this.xi(),this.Ni(),e.next=7,this.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Bu(e,cu.ct);return t.Ei(n).next((function(){return t.vi(n)}))}));case 7:this.di.close(),this.ki();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vi",value:function(e,t){var n=this;return e.filter((function(e){return n.bi(e.updateTimeMs,t)&&!n.Di(e.clientId)}))}},{key:"Mi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return pd(t).j().next((function(t){return e.Vi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.$s}},{key:"getMutationQueue",value:function(e,t){return Eh.fe(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Fs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new ph(e,this.serializer.le.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return qf.fe(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Ls}},{key:"runTransaction",value:function(e,t,n){var r=this;uo("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.oi)?Uu:14===i?Vu:13===i?Fu:12===i?Pu:11===i?Ru:void fo();return this.di.runTransaction(e,o,u,(function(i){return a=new Bu(i,r.Os?r.Os.next():cu.ct),"readwrite-primary"===t?r.Ii(a).next((function(e){return!!e||r.Ti(a)})).next((function(t){if(!t)throw so("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.si.enqueueRetryable((function(){return r.li(!1)})),new mo(vo.FAILED_PRECONDITION,Ho);return n(a)})).next((function(e){return r.Ai(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return dd(e).get("owner").next((function(e){if(null!==e&&t.bi(e.leaseTimestampMs,5e3)&&!t.Di(e.ownerId)&&!t.Ri(e)&&!(t.ri||t.allowTabSynchronization&&e.allowTabSynchronization))throw new mo(vo.FAILED_PRECONDITION,fd)}))}},{key:"Ai",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dd(e).put("owner",t)}},{key:"Ei",value:function(e){var t=this,n=dd(e);return n.get("owner").next((function(e){return t.Ri(e)?(uo("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):$o.resolve()}))}},{key:"bi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(so("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"mi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=function(){e.si.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.wi()}))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}},{key:"xi",value:function(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}},{key:"gi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=function(){t.Ci();var e=/(?:Version|Mobile)\/1[456]/;!z()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.si.enterRestrictedMode(!0),t.si.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ui))}},{key:"Ni",value:function(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}},{key:"Di",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return uo("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return so("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ci",value:function(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){so("Failed to set zombie client id.",e)}}},{key:"ki",value:function(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch(e){}}},{key:"Si",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Zo.D()}}]),e}();function dd(e){return ju(e,"owner")}function pd(e){return ju(e,"clientMetadata")}function vd(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var md=function(){function e(t,n,r,i){v(this,e),this.targetId=t,this.fromCache=n,this.$i=r,this.Fi=i}return y(e,null,[{key:"Bi",value:function(t,n){var r,i=Bc(),a=Bc(),o=g(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(T_){o.e(T_)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),yd=function(){function e(){v(this,e),this.Li=!1}return y(e,[{key:"initialize",value:function(e,t){this.qi=e,this.indexManager=t,this.Li=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ui(e,t).next((function(a){return a||i.Ki(e,t,r,n)})).next((function(n){return n||i.Gi(e,t)}))}},{key:"Ui",value:function(e,t){var n=this;if(pc(t))return $o.resolve(null);var r=bc(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=wc(t,null,"F"),r=bc(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Bc.apply(void 0,ee(i));return n.qi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Qi(t,i);return n.ji(t,o,a,r.readTime)?n.Ui(e,wc(t,null,"F")):n.zi(e,o,t,r)}))}))})))}))}},{key:"Ki",value:function(e,t,n,r){var i=this;return pc(t)||r.isEqual(Oo.min())?this.Gi(e,t):this.qi.getDocuments(e,n).next((function(a){var o=i.Qi(t,a);return i.ji(t,o,n,r)?i.Gi(e,t):(oo()<=ae.DEBUG&&uo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ec(t)),i.zi(e,o,t,qo(r,-1)))}))}},{key:"Qi",value:function(e,t){var n=new Qu(Tc(e));return t.forEach((function(t,r){Sc(e,r)&&(n=n.add(r))})),n}},{key:"ji",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Gi",value:function(e,t){return oo()<=ae.DEBUG&&uo("QueryEngine","Using full collection scan to execute query:",Ec(t)),this.qi.getDocumentsMatchingQuery(e,t,Wo.min())}},{key:"zi",value:function(e,t,n,r){return this.qi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),gd=function(){function e(t,n,r,i){v(this,e),this.persistence=t,this.Wi=n,this.serializer=i,this.Hi=new Wu(Io),this.Ji=new Cc((function(e){return ac(e)}),oc),this.Yi=new Map,this.Xi=t.getRemoteDocumentCache(),this.Fs=t.getTargetCache(),this.Ls=t.getBundleCache(),this.Zi(r)}return y(e,[{key:"Zi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $h(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Hi)}))}}]),e}();function bd(e,t,n,r){return new gd(e,t,n,r)}function kd(e,t){return wd.apply(this,arguments)}function wd(){return wd=l(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=po(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Zi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Bc(),s=g(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=g(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(T_){f.e(T_)}finally{f.f()}}}catch(T_){s.e(T_)}finally{s.f()}var d,p=g(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=g(v.mutations);try{for(y.s();!(m=y.n()).done;){var b=m.value;u=u.add(b.key)}}catch(T_){y.e(T_)}finally{y.f()}}}catch(T_){p.e(T_)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{tr:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),wd.apply(this,arguments)}function _d(e,t){var n=po(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=$o.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);ho(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Bc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function xd(e){var t=po(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Fs.getLastRemoteSnapshotVersion(e)}))}function Ed(e,t){var n=po(e),r=t.snapshotVersion,i=n.Hi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Hi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Zu.EMPTY_BYTE_STRING,Oo.min()).withLastLimboFreeSnapshotVersion(Oo.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Fs.updateTargetData(e,c))}}));var u=Nc(),s=Bc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Sd(e,a,t.documentUpdates).next((function(e){u=e.er,s=e.nr}))),!r.isEqual(Oo.min())){var c=n.Fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return $o.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Hi=i,e}))}function Sd(e,t,n){var r=Bc(),i=Bc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Nc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Oo.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):uo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{er:r,nr:i}}))}function Ad(e,t){var n=po(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Td(e,t){var n=po(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Fs.getTargetData(e,t).next((function(i){return i?(r=i,$o.resolve(r)):n.Fs.allocateTargetId(e).next((function(i){return r=new Tf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Hi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Hi=n.Hi.insert(e.targetId,e),n.Ji.set(t,e.targetId)),e}))}function Id(e,t,n){return Cd.apply(this,arguments)}function Cd(){return Cd=l(s().mark((function e(t,n,r){var i,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=po(t),a=i.Hi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),nu(e.t1)){e.next=12;break}throw e.t1;case 12:uo("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Hi=i.Hi.remove(n),i.Ji.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Cd.apply(this,arguments)}function Dd(e,t,n){var r=po(e),i=Oo.min(),a=Bc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=po(e),i=r.Ji.get(n);return void 0!==i?$o.resolve(r.Hi.get(i)):r.Fs.getTargetData(t,n)}(r,e,bc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Wi.getDocumentsMatchingQuery(e,t,n?i:Oo.min(),n?a:Bc())})).next((function(e){return Md(r,Ac(t),e),{documents:e,sr:a}}))}))}function Nd(e,t){var n=po(e),r=po(n.Fs),i=n.Hi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.he(e,t).next((function(e){return e?e.target:null}))}))}function Od(e,t){var n=po(e),r=n.Yi.get(t)||Oo.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Xi.getAllFromCollectionGroup(e,t,qo(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Md(n,t,e),e}))}function Md(e,t,n){var r=e.Yi.get(t)||Oo.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Yi.set(t,r)}function Ld(e,t,n,r){return Rd.apply(this,arguments)}function Rd(){return Rd=l(s().mark((function e(t,n,r,i){var a,o,u,c,l,f,h,d,p,v;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=po(t),o=Bc(),u=Nc(),c=g(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.ir(f.metadata.name),f.document&&(o=o.add(h)),(d=n.rr(f)).setReadTime(n.ur(f.metadata.readTime)),u=u.insert(h,d)}catch(T_){c.e(T_)}finally{c.f()}return p=a.Xi.newChangeBuffer({trackRemovals:!0}),e.next=7,Td(a,function(e){return bc(dc(Lo.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Sd(e,p,u).next((function(t){return p.apply(e),t})).next((function(t){return a.Fs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Fs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.er,t.nr)})).next((function(){return t.er}))}))})));case 9:case"end":return e.stop()}}),e)}))),Rd.apply(this,arguments)}function Pd(e,t){return Fd.apply(this,arguments)}function Fd(){return Fd=l(s().mark((function e(t,n){var r,i,a,o=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Bc(),e.next=3,Td(t,bc(Pf(n.bundledQuery)));case 3:return i=e.sent,a=po(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ef(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ls.saveNamedQuery(e,n);var o=i.withResumeToken(Zu.EMPTY_BYTE_STRING,t);return a.Hi=a.Hi.insert(o.targetId,o),a.Fs.updateTargetData(e,o).next((function(){return a.Fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ls.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Fd.apply(this,arguments)}function Vd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ud(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Bd(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var jd=function(){function e(t,n,r,i){v(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return y(e,[{key:"ar",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new mo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(so("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),zd=function(){function e(t,n,r){v(this,e),this.targetId=t,this.state=n,this.error=r}return y(e,[{key:"ar",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new mo(i.error.code,i.error.message))),a?new e(t,i.state,r):(so("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),qd=function(){function e(t,n){v(this,e),this.clientId=t,this.activeTargetIds=n}return y(e,null,[{key:"cr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=zc(),o=0;i&&o<r.activeTargetIds.length;++o)i=hu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(so("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Gd=function(){function e(t,n){v(this,e),this.clientId=t,this.onlineState=n}return y(e,null,[{key:"cr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(so("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Wd=function(){function e(){v(this,e),this.activeTargetIds=zc()}return y(e,[{key:"hr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ar",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Kd=function(){function e(t,n,r,i,a){v(this,e),this.window=t,this.si=n,this.persistenceKey=r,this.dr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new Wu(Io),this.started=!1,this.gr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.yr=Vd(this.persistenceKey,this.dr),this.pr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.mr=this.mr.insert(this.dr,new Wd),this.Ir=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Tr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Er=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Ar=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return y(e,[{key:"start",value:function(){var e=l(s().mark((function e(){var t,n,r,i,a,o,u,c,l,f,h,d=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Mi();case 2:t=e.sent,n=g(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.dr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Vd(this.persistenceKey,i)))&&(o=qd.cr(i,a))&&(this.mr=this.mr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.vr(),(u=this.storage.getItem(this.Ar))&&(c=this.Pr(u))&&this.br(c),l=g(this.gr);try{for(l.s();!(f=l.n()).done;)h=f.value,this.wr(h)}catch(T_){l.e(T_)}finally{l.f()}this.gr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.pr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Vr(this.mr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.mr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Sr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Sr(e,t,n),this.Dr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Bd(this.persistenceKey,e));if(n){var r=zd.cr(e,n);r&&(t=r.state)}}return this.Cr.hr(e),this.vr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Cr.lr(e),this.vr()}},{key:"isLocalQueryTarget",value:function(e){return this.Cr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Bd(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Nr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Dr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.kr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Mr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return uo("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){uo("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){uo("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"wr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(uo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.yr)return void so("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(l(s().mark((function e(){var r,i,a,o,u,c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Ir.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.$r(r,null));case 6:if(!(i=t.Fr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.$r(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Tr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Br(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Lr(a));case 16:e.next=41;break;case 18:if(!t.Er.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.qr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Ur(o));case 23:e.next=41;break;case 25:if(n.key!==t.Ar){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.br(u));case 30:e.next=41;break;case 32:if(n.key!==t.pr){e.next=37;break}c=function(e){var t=cu.ct;if(null!=e)try{var n=JSON.parse(e);ho("number"==typeof n),t=n}catch(e){so("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),c!==cu.ct&&t.sequenceNumberHandler(c),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return l=t.Kr(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.Gr(e)})));case 41:e.next=44;break;case 43:t.gr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Cr",get:function(){return this.mr.get(this.dr)}},{key:"vr",value:function(){this.setItem(this.yr,this.Cr.ar())}},{key:"Sr",value:function(e,t,n){var r=new jd(this.currentUser,e,t,n),i=Ud(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ar())}},{key:"Dr",value:function(e){var t=Ud(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"kr",value:function(e){var t={clientId:this.dr,onlineState:e};this.storage.setItem(this.Ar,JSON.stringify(t))}},{key:"Nr",value:function(e,t,n){var r=Bd(this.persistenceKey,e),i=new zd(e,t,n);this.setItem(r,i.ar())}},{key:"Mr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Ir.exec(e);return t?t[1]:null}},{key:"Fr",value:function(e,t){var n=this.Or(e);return qd.cr(n,t)}},{key:"Br",value:function(e,t){var n=this.Tr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return jd.cr(new ro(i),r,t)}},{key:"qr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]);return zd.cr(r,t)}},{key:"Pr",value:function(e){return Gd.cr(e)}},{key:"Kr",value:function(e){return JSON.parse(e)}},{key:"Lr",value:function(){var e=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Qr(t.batchId,t.state,t.error));case 2:uo("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ur",value:function(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}},{key:"$r",value:function(e,t){var n=this,r=t?this.mr.insert(e,t):this.mr.remove(e),i=this.Vr(this.mr),a=this.Vr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.zr(o,u).then((function(){n.mr=r}))}},{key:"br",value:function(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Vr",value:function(e){var t=zc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Hd=function(){function e(){v(this,e),this.Wr=new Wd,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Hr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Wr.lr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Wr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Hr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Wr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Wr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Wr=new Wd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Qd=function(){function e(){v(this,e)}return y(e,[{key:"Jr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Yd=function(){function e(){var t=this;v(this,e),this.Yr=function(){return t.Xr()},this.Zr=function(){return t.eo()},this.no=[],this.so()}return y(e,[{key:"Jr",value:function(e){this.no.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}},{key:"so",value:function(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}},{key:"Xr",value:function(){uo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=g(this.no);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(T_){t.e(T_)}finally{t.f()}}},{key:"eo",value:function(){uo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=g(this.no);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(T_){t.e(T_)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Xd=null;function $d(){return null===Xd?Xd=268435456+Math.round(2147483648*Math.random()):Xd++,"0x"+Xd.toString(16)}var Jd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Zd=function(){function e(t){v(this,e),this.io=t.io,this.ro=t.ro}return y(e,[{key:"oo",value:function(e){this.uo=e}},{key:"co",value:function(e){this.ao=e}},{key:"onMessage",value:function(e){this.ho=e}},{key:"close",value:function(){this.ro()}},{key:"send",value:function(e){this.io(e)}},{key:"lo",value:function(){this.uo()}},{key:"fo",value:function(e){this.ao(e)}},{key:"_o",value:function(e){this.ho(e)}}]),e}(),ep="WebChannelConnection",tp=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return y(n,[{key:"Eo",value:function(e,t,n,r){var i=$d();return new Promise((function(a,o){var u=new Za;u.setWithCredentials(!0),u.listenOnce(Qa.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Ha.NO_ERROR:var t=u.getResponseJson();uo(ep,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Ha.TIMEOUT:uo(ep,"RPC '".concat(e,"' ").concat(i," timed out")),o(new mo(vo.DEADLINE_EXCEEDED,"Request time out"));break;case Ha.HTTP_ERROR:var n=u.getStatus();if(uo(ep,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(vo).indexOf(t)>=0?t:vo.UNKNOWN}(s.status);o(new mo(c,s.message))}else o(new mo(vo.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new mo(vo.UNAVAILABLE,"Connection failed."));break;default:fo()}}finally{uo(ep,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);uo(ep,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=$d(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Wa(),o=Ka(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new $a({})),this.To(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");uo(ep,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new Zd({io:function(t){f?uo(ep,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(uo(ep,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),uo(ep,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ro:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Ja.EventType.OPEN,(function(){f||uo(ep,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Ja.EventType.CLOSE,(function(){f||(f=!0,uo(ep,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.fo())})),d(c,Ja.EventType.ERROR,(function(t){f||(f=!0,co(ep,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.fo(new mo(vo.UNAVAILABLE,"The operation could not be completed")))})),d(c,Ja.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];ho(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){uo(ep,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=bl[e];if(void 0!==t)return Il(t)}(u),l=o.message;void 0===s&&(s=vo.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.fo(new mo(s,l)),c.close()}else uo(ep,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h._o(i)}})),d(o,Ya.STAT_EVENT,(function(t){t.stat===Xa.PROXY?uo(ep,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Xa.NOPROXY&&uo(ep,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.lo()}),0),h}}]),n}(function(){function e(t){v(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.wo=n+"://"+t.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return y(e,[{key:"yo",get:function(){return!1}},{key:"po",value:function(e,t,n,r,i){var a=$d(),o=this.Io(e,t);uo("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.To(u,r,i),this.Eo(e,o,u,n).then((function(t){return uo("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw co("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Ao",value:function(e,t,n,r,i,a){return this.po(e,t,n,r,i)}},{key:"To",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+io,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Io",value:function(e,t){var n=Jd[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}}]),e}());function np(){return"undefined"!=typeof window?window:null}function rp(){return"undefined"!=typeof document?document:null}function ip(e){return new Yl(e,!0)}var ap=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;v(this,e),this.si=t,this.timerId=n,this.vo=r,this.Po=i,this.bo=a,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.Vo=0}},{key:"Co",value:function(){this.Vo=this.bo}},{key:"xo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Vo+this.No()),r=Math.max(0,Date.now()-this.Do),i=Math.max(0,n-r);i>0&&uo("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Vo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.So=this.si.enqueueAfterDelay(this.timerId,i,(function(){return t.Do=Date.now(),e()})),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}},{key:"ko",value:function(){null!==this.So&&(this.So.skipDelay(),this.So=null)}},{key:"cancel",value:function(){null!==this.So&&(this.So.cancel(),this.So=null)}},{key:"No",value:function(){return(Math.random()-.5)*this.Vo}}]),e}(),op=function(){function e(t,n,r,i,a,o,u,s){v(this,e),this.si=t,this.Mo=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new ap(t,n)}return y(e,[{key:"qo",value:function(){return 1===this.state||5===this.state||this.Uo()}},{key:"Uo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Ko()}},{key:"stop",value:function(){var e=l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.qo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Go",value:function(){this.state=0,this.Lo.reset()}},{key:"Qo",value:function(){var e=this;this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,(function(){return e.jo()})))}},{key:"zo",value:function(e){this.Wo(),this.stream.send(e)}},{key:"jo",value:function(){var e=l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Uo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wo",value:function(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"close",value:function(){var e=l(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,4!==t?this.Lo.reset():n&&n.code===vo.RESOURCE_EXHAUSTED?(so(n.toString()),so("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):n&&n.code===vo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Jo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.co(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Jo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Yo(this.$o),n=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=o(t,2),i=r[0],a=r[1];e.$o===n&&e.Xo(i,a)}),(function(n){t((function(){var t=new mo(vo.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Zo(t)}))}))}},{key:"Xo",value:function(e,t){var n=this,r=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo((function(){r((function(){return n.state=2,n.Bo=n.si.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Uo()&&(n.state=3),Promise.resolve()})),n.listener.oo()}))})),this.stream.co((function(e){r((function(){return n.Zo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Ko",value:function(){var e=this;this.state=5,this.Lo.xo(l(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Zo",value:function(e){return uo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Yo",value:function(e){var t=this;return function(n){t.si.enqueueAndForget((function(){return t.$o===e?n():(uo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),up=function(e){w(n,e);var t=S(n);function n(e,r,i,a,o,u){var s;return v(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return y(n,[{key:"tu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.Lo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:fo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(ho(void 0===t||"string"==typeof t),Zu.fromBase64String(t||"")):(ho(void 0===t||t instanceof Uint8Array),Zu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?vo.UNKNOWN:Il(e.code);return new mo(t,e.message||"")}(o);n=new jl(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=af(e,s.document.name),l=ef(s.document.updateTime),f=s.document.createTime?ef(s.document.createTime):Oo.min(),h=new Ds({mapValue:{fields:s.document.fields}}),d=Os.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Ul(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=af(e,m.document),g=m.readTime?ef(m.readTime):Oo.min(),b=Os.newNoDocument(y,g),k=m.removedTargetIds||[];n=new Ul([],k,b.key,b)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=af(e,w.document),x=w.removedTargetIds||[];n=new Ul([],x,_,null)}else{if(!("filter"in t))return fo();t.filter;var E=t.filter;E.targetId;var S=E.count,A=void 0===S?0:S,T=E.unchangedNames,I=new Al(A,T),C=E.targetId;n=new Bl(C,I)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Oo.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Oo.min():t.readTime?ef(t.readTime):Oo.min()}(e);return this.listener.eu(t,n)}},{key:"nu",value:function(e){var t={};t.database=sf(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=uc(r)?{documents:vf(e,r)}:{query:mf(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Jl(e,t.resumeToken);var i=Xl(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Oo.min())>0){n.readTime=$l(e,t.snapshotVersion.toTimestamp());var a=Xl(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.zo(t)}},{key:"su",value:function(e){var t={};t.database=sf(this.serializer),t.removeTarget=e,this.zo(t)}}]),n}(op),sp=function(e){w(n,e);var t=S(n);function n(e,r,i,a,o,u){var s;return v(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.iu=!1,s}return y(n,[{key:"ru",get:function(){return this.iu}},{key:"start",value:function(){this.iu=!1,this.lastStreamToken=void 0,Ct(_(n.prototype),"start",this).call(this)}},{key:"Jo",value:function(){this.iu&&this.ou([])}},{key:"tu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(ho(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();var t=function(e,t){return e&&e.length>0?(ho(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ef(e.updateTime):ef(t);return n.isEqual(Oo.min())&&(n=ef(t)),new al(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ef(e.commitTime);return this.listener.uu(n,t)}return ho(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}},{key:"au",value:function(){var e={};e.database=sf(this.serializer),this.zo(e)}},{key:"ou",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return df(t.serializer,e)}))};this.zo(n)}}]),n}(op),cp=function(e){w(n,e);var t=S(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.hu=!1,o}return y(n,[{key:"lu",value:function(){if(this.hu)throw new mo(vo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"po",value:function(e,t,n){var r=this;return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=o(i,2),u=a[0],s=a[1];return r.connection.po(e,t,n,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===vo.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new mo(vo.UNKNOWN,e.toString())}))}},{key:"Ao",value:function(e,t,n,r){var i=this;return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var u=o(a,2),s=u[0],c=u[1];return i.connection.Ao(e,t,n,s,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===vo.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new mo(vo.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.hu=!0}}]),n}(function(){return y((function e(){v(this,e)}))}());var lp=function(){function e(t,n){v(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}return y(e,[{key:"mu",value:function(){var e=this;0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.yu("Backend didn't respond within 10 seconds."),e.gu("Offline"),Promise.resolve()})))}},{key:"pu",value:function(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.gu("Offline")))}},{key:"set",value:function(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}},{key:"gu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"yu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.wu?(so(t),this.wu=!1):uo("OnlineStateTracker",t)}},{key:"Iu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),fp=y((function e(t,n,r,i,a){var o=this;v(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=a,this.vu.Jr((function(e){r.enqueueAndForget(l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=_p(o),!e.t0){e.next=5;break}return uo("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=l(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=po(t)).Au.add(4),e.next=4,pp(n);case 4:return n.Pu.set("Unknown"),n.Au.delete(4),e.next=8,hp(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Pu=new lp(r,i)}));function hp(e){return dp.apply(this,arguments)}function dp(){return(dp=l(s().mark((function e(t){var n,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_p(t)){e.next=18;break}n=g(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function pp(e){return vp.apply(this,arguments)}function vp(){return(vp=l(s().mark((function e(t){var n,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function mp(e,t){var n=po(e);n.Eu.has(t.targetId)||(n.Eu.set(t.targetId,t),wp(n)?kp(n):$p(n).Uo()&&gp(n,t))}function yp(e,t){var n=po(e),r=$p(n);n.Eu.delete(t),r.Uo()&&bp(n,t),0===n.Eu.size&&(r.Uo()?r.Qo():_p(n)&&n.Pu.set("Unknown"))}function gp(e,t){if(e.bu.Lt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Oo.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}$p(e).nu(t)}function bp(e,t){e.bu.Lt(t),$p(e).su(t)}function kp(e){e.bu=new ql({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},he:function(t){return e.Eu.get(t)||null},oe:function(){return e.datastore.serializer.databaseId}}),$p(e).start(),e.Pu.mu()}function wp(e){return _p(e)&&!$p(e).qo()&&e.Eu.size>0}function _p(e){return 0===po(e).Au.size}function xp(e){e.bu=void 0}function Ep(e){return Sp.apply(this,arguments)}function Sp(){return(Sp=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Eu.forEach((function(e,n){gp(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ap(e,t){return Tp.apply(this,arguments)}function Tp(){return(Tp=l(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xp(t),wp(t)?(t.Pu.pu(n),kp(t)):t.Pu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ip(e,t,n){return Cp.apply(this,arguments)}function Cp(){return Cp=l(s().mark((function e(t,n,r){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Pu.set("Online"),!(n instanceof jl&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=l(s().mark((function e(t,n){var r,i,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=g(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Eu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Eu.delete(o),t.bu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),uo("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Dp(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Ul?t.bu.Wt(n):n instanceof Bl?t.bu.ee(n):t.bu.Yt(n),r.isEqual(Oo.min())){e.next=29;break}return e.prev=14,e.next=17,xd(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.bu.ue(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Eu.get(r);i&&e.Eu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Eu.get(t);if(r){e.Eu.set(t,r.withResumeToken(Zu.EMPTY_BYTE_STRING,r.snapshotVersion)),bp(e,t);var i=new Tf(r.target,t,n,r.sequenceNumber);gp(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),uo("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Dp(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Cp.apply(this,arguments)}function Dp(e,t,n){return Np.apply(this,arguments)}function Np(){return(Np=l(s().mark((function e(t,n,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nu(n)){e.next=2;break}throw n;case 2:return t.Au.add(1),e.next=5,pp(t);case 5:t.Pu.set("Offline"),r||(r=function(){return xd(t.localStore)}),t.asyncQueue.enqueueRetryable(l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uo("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Au.delete(1),e.next=6,hp(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Op(e,t){return t().catch((function(n){return Dp(e,n,t)}))}function Mp(e){return Lp.apply(this,arguments)}function Lp(){return(Lp=l(s().mark((function e(t){var n,r,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=po(t),r=Jp(n),i=n.Tu.length>0?n.Tu[n.Tu.length-1].batchId:-1;case 2:if(!Rp(n)){e.next=19;break}return e.prev=3,e.next=6,Ad(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Tu.length&&r.Qo(),e.abrupt("break",19);case 10:i=a.batchId,Pp(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Dp(n,e.t0);case 17:e.next=2;break;case 19:Fp(n)&&Vp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function Rp(e){return _p(e)&&e.Tu.length<10}function Pp(e,t){e.Tu.push(t);var n=Jp(e);n.Uo()&&n.ru&&n.ou(t.mutations)}function Fp(e){return _p(e)&&!Jp(e).qo()&&e.Tu.length>0}function Vp(e){Jp(e).start()}function Up(e){return Bp.apply(this,arguments)}function Bp(){return(Bp=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Jp(t).au();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jp(e){return zp.apply(this,arguments)}function zp(){return zp=l(s().mark((function e(t){var n,r,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Jp(t),r=g(t.Tu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.ou(a.mutations)}catch(T_){r.e(T_)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),zp.apply(this,arguments)}function qp(e,t,n){return Gp.apply(this,arguments)}function Gp(){return(Gp=l(s().mark((function e(t,n,r){var i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Tu.shift(),a=El.from(i,n,r),e.next=3,Op(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Mp(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wp(e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=l(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Jp(t).ru,!e.t0){e.next=4;break}return e.next=4,function(){var e=l(s().mark((function e(t,n){var r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Tl(i=n.code)||i===vo.ABORTED){e.next=7;break}return r=t.Tu.shift(),Jp(t).Go(),e.next=5,Op(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Mp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Fp(t)&&Vp(t);case 5:case"end":return e.stop()}}),e)}))),Kp.apply(this,arguments)}function Hp(e,t){return Qp.apply(this,arguments)}function Qp(){return(Qp=l(s().mark((function e(t,n){var r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=po(t)).asyncQueue.verifyOperationInProgress(),uo("RemoteStore","RemoteStore received new credentials"),i=_p(r),r.Au.add(3),e.next=6,pp(r);case 6:return i&&r.Pu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Au.delete(3),e.next=12,hp(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yp(e,t){return Xp.apply(this,arguments)}function Xp(){return(Xp=l(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=po(t),!n){e.next=7;break}return r.Au.delete(2),e.next=5,hp(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Au.add(2),e.next=12,pp(r);case 12:r.Pu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $p(e){return e.Vu||(e.Vu=function(e,t,n){var r=po(e);return r.lu(),new up(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{oo:Ep.bind(null,e),co:Ap.bind(null,e),eu:Ip.bind(null,e)}),e.Ru.push(function(){var t=l(s().mark((function t(n){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Vu.Go(),wp(e)?kp(e):e.Pu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Vu.stop();case 6:xp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Vu}function Jp(e){return e.Su||(e.Su=function(e,t,n){var r=po(e);return r.lu(),new sp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{oo:Up.bind(null,e),co:Wp.bind(null,e),cu:jp.bind(null,e),uu:qp.bind(null,e)}),e.Ru.push(function(){var t=l(s().mark((function t(n){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Su.Go(),t.next=4,Mp(e);case 4:t.next=9;break;case 6:return t.next=8,e.Su.stop();case 8:e.Tu.length>0&&(uo("RemoteStore","Stopping write stream with ".concat(e.Tu.length," pending writes")),e.Tu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}var Zp=function(){function e(t,n,r,i,a){v(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new mo(vo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ev(e,t){if(so("AsyncQueue","".concat(t,": ").concat(e)),nu(e))return new mo(vo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var tv=function(){function e(t){v(this,e),this.comparator=t?function(e,n){return t(e,n)||Fo.comparator(e.key,n.key)}:function(e,t){return Fo.comparator(e.key,t.key)},this.keyedMap=Mc(),this.sortedSet=new Wu(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),nv=function(){function e(){v(this,e),this.Du=new Wu(Fo.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Du.get(t);n?0!==e.type&&3===n.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==n.type?this.Du=this.Du.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Du=this.Du.remove(t):1===e.type&&2===n.type?this.Du=this.Du.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):fo():this.Du=this.Du.insert(t,e)}},{key:"Cu",value:function(){var e=[];return this.Du.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),rv=function(){function e(t,n,r,i,a,o,u,s,c){v(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,tv.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),iv=y((function e(){v(this,e),this.xu=void 0,this.listeners=[]})),av=y((function e(){v(this,e),this.queries=new Cc((function(e){return xc(e)}),_c),this.onlineState="Unknown",this.Nu=new Set}));function ov(e,t){return uv.apply(this,arguments)}function uv(){return uv=l(s().mark((function e(t,n){var r,i,a,o,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=po(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new iv),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.xu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=ev(e.t0,"Initialization of query '".concat(Ec(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.ku(r.onlineState),o.xu&&n.Mu(o.xu)&&hv(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),uv.apply(this,arguments)}function sv(e,t){return cv.apply(this,arguments)}function cv(){return cv=l(s().mark((function e(t,n){var r,i,a,o,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=po(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),cv.apply(this,arguments)}function lv(e,t){var n,r=po(e),i=!1,a=g(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=g(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Mu(o)&&(i=!0)}}catch(T_){l.e(T_)}finally{l.f()}s.xu=o}}}catch(T_){a.e(T_)}finally{a.f()}i&&hv(r)}function fv(e,t,n){var r=po(e),i=r.queries.get(t);if(i){var a,o=g(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(T_){o.e(T_)}finally{o.f()}}r.queries.delete(t)}function hv(e){e.Nu.forEach((function(e){e.next()}))}var dv=function(){function e(t,n,r){v(this,e),this.query=t,this.Ou=n,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"Mu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=g(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(T_){r.e(T_)}finally{r.f()}e=new rv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),a=!0):this.Lu(e,this.onlineState)&&(this.qu(e),a=!0),this.Fu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"ku",value:function(e){this.onlineState=e;var t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}},{key:"Lu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Uu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Bu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"qu",value:function(e){e=rv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}]),e}(),pv=function(){function e(t,n){v(this,e),this.Ku=t,this.byteLength=n}return y(e,[{key:"Gu",value:function(){return"metadata"in this.Ku}}]),e}(),vv=function(){function e(t){v(this,e),this.serializer=t}return y(e,[{key:"ir",value:function(e){return af(this.serializer,e)}},{key:"rr",value:function(e){return e.metadata.exists?ff(this.serializer,e.document,!1):Os.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}},{key:"ur",value:function(e){return ef(e)}}]),e}(),mv=function(){function e(t,n,r){v(this,e),this.Qu=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yv(t)}return y(e,[{key:"ju",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;var n=Lo.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"zu",value:function(e){var t,n=new Map,r=new vv(this.serializer),i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.ir(a.metadata.name),s=g(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Bc()).add(u);n.set(c,l)}}catch(T_){s.e(T_)}finally{s.f()}}}}catch(T_){i.e(T_)}finally{i.f()}return n}},{key:"complete",value:function(){var e=l(s().mark((function e(){var t,n,r,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ld(this.localStore,new vv(this.serializer),this.documents,this.Qu.id);case 2:t=e.sent,n=this.zu(this.documents),r=g(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Pd(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Wu:this.collectionGroups,Hu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function yv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var gv=y((function e(t){v(this,e),this.key=t})),bv=y((function e(t){v(this,e),this.key=t})),kv=function(){function e(t,n){v(this,e),this.query=t,this.Ju=n,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=Bc(),this.mutatedKeys=Bc(),this.Zu=Tc(t),this.tc=new tv(this.Zu)}return y(e,[{key:"ec",get:function(){return this.Ju}},{key:"nc",value:function(e,t){var n=this,r=t?t.sc:new nv,i=t?t.tc:this.tc,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Sc(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.ic(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Zu(f,s)>0||c&&n.Zu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{tc:o,sc:r,ji:u,mutatedKeys:a}}},{key:"ic",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;var a=e.sc.Cu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fo()}};return n(e)-n(t)}(e.type,t.type)||r.Zu(e.doc,t.doc)})),this.rc(n);var o=t?this.oc():[],u=0===this.Xu.size&&this.current?1:0,s=u!==this.Yu;return this.Yu=u,0!==a.length||s?{snapshot:new rv(this.query,e.tc,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),uc:o}:{uc:o}}},{key:"ku",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new nv,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}},{key:"cc",value:function(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}},{key:"rc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ju=t.Ju.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ju=t.Ju.delete(e)})),this.current=e.current)}},{key:"oc",value:function(){var e=this;if(!this.current)return[];var t=this.Xu;this.Xu=Bc(),this.tc.forEach((function(t){e.cc(t.key)&&(e.Xu=e.Xu.add(t.key))}));var n=[];return t.forEach((function(t){e.Xu.has(t)||n.push(new bv(t))})),this.Xu.forEach((function(e){t.has(e)||n.push(new gv(e))})),n}},{key:"ac",value:function(e){this.Ju=e.sr,this.Xu=Bc();var t=this.nc(e.documents);return this.applyChanges(t,!0)}},{key:"hc",value:function(){return rv.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}]),e}(),wv=y((function e(t,n,r){v(this,e),this.query=t,this.targetId=n,this.view=r})),_v=y((function e(t){v(this,e),this.key=t,this.lc=!1})),xv=function(){function e(t,n,r,i,a,o){v(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.fc={},this.dc=new Cc((function(e){return xc(e)}),_c),this._c=new Map,this.wc=new Set,this.mc=new Wu(Fo.comparator),this.gc=new Map,this.yc=new ed,this.Ic={},this.Tc=new Map,this.Ec=Ch.kn(),this.onlineState="Unknown",this.Ac=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.Ac}}]),e}();function Ev(e,t){return Sv.apply(this,arguments)}function Sv(){return Sv=l(s().mark((function e(t,n){var r,i,a,o,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ym(t),!(o=r.dc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.hc(),e.next=15;break;case 6:return e.next=8,Td(r.localStore,bc(n));case 8:return u=e.sent,c=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,Av(r,n,i,"current"===c,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&mp(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Sv.apply(this,arguments)}function Av(e,t,n,r,i){return Tv.apply(this,arguments)}function Tv(){return Tv=l(s().mark((function e(t,n,r,i,a){var o,u,c,f,h,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=l(s().mark((function e(t,n,r,i){var a,o,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.nc(r),e.t0=a.ji,!e.t0){e.next=6;break}return e.next=5,Dd(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.nc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Hv(t,n.targetId,u.uc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Dd(t.localStore,n,!0);case 3:return o=e.sent,u=new kv(n,o.sr),c=u.nc(o.documents),f=Vl.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),h=u.applyChanges(c,t.isPrimaryClient,f),Hv(t,r,h.uc),d=new wv(n,r,u),e.abrupt("return",(t.dc.set(n,d),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),h.snapshot));case 11:case"end":return e.stop()}}),e)}))),Tv.apply(this,arguments)}function Iv(e,t){return Cv.apply(this,arguments)}function Cv(){return(Cv=l(s().mark((function e(t,n){var r,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=po(t),i=r.dc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!_c(e,n)}))),void r.dc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Id(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),yp(r.remoteStore,i.targetId),Wv(r,i.targetId)})).catch(Yo);case 9:e.next=14;break;case 11:return Wv(r,i.targetId),e.next=14,Id(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dv(e,t,n){return Nv.apply(this,arguments)}function Nv(){return Nv=l(s().mark((function e(t,n,r){var i,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gm(t),e.prev=1,e.next=4,function(e,t){var n,r,i=po(e),a=No.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Bc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Nc(),s=Bc();return i.Xi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=g(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=hl(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new vl(c.key,l,Ns(l.value.mapValue),ol.exists(!0)))}}catch(T_){s.e(T_)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Lc(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ic[e.currentUser.toKey()];r||(r=new Wu(Io)),r=r.insert(t,n),e.Ic[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Xv(i,a.changes);case 9:return e.next=11,Mp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ev(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Nv.apply(this,arguments)}function Ov(e,t){return Mv.apply(this,arguments)}function Mv(){return(Mv=l(s().mark((function e(t,n){var r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=po(t),e.prev=1,e.next=4,Ed(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.gc.get(t);n&&(ho(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.lc=!0:e.modifiedDocuments.size>0?ho(n.lc):e.removedDocuments.size>0&&(ho(n.lc),n.lc=!1))})),e.next=8,Xv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Yo(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Lv(e,t,n){var r=po(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.dc.forEach((function(e,n){var r=n.view.ku(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=po(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=g(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ku(t)&&(r=!0)}}catch(T_){a.e(T_)}finally{a.f()}})),r&&hv(n)}(r.eventManager,t),i.length&&r.fc.eu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Rv(e,t,n){return Pv.apply(this,arguments)}function Pv(){return Pv=l(s().mark((function e(t,n,r){var i,a,o,u,c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=po(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.gc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Wu(Fo.comparator)).insert(o,Os.newNoDocument(o,Oo.min())),c=Bc().add(o),l=new Fl(Oo.min(),new Map,new Wu(Io),u,c),e.next=9,Ov(i,l);case 9:i.mc=i.mc.remove(o),i.gc.delete(n),Yv(i),e.next=16;break;case 14:return e.next=16,Id(i.localStore,n,!1).then((function(){return Wv(i,n,r)})).catch(Yo);case 16:case"end":return e.stop()}}),e)}))),Pv.apply(this,arguments)}function Fv(e,t){return Vv.apply(this,arguments)}function Vv(){return(Vv=l(s().mark((function e(t,n){var r,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=po(t),i=n.batch.batchId,e.prev=1,e.next=4,_d(r.localStore,n);case 4:return a=e.sent,Gv(r,i,null),qv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Xv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Yo(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Uv(e,t,n){return Bv.apply(this,arguments)}function Bv(){return(Bv=l(s().mark((function e(t,n,r){var i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=po(t),e.prev=1,e.next=4,function(e,t){var n=po(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return ho(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Gv(i,n,r),qv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Xv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Yo(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function jv(e,t){return zv.apply(this,arguments)}function zv(){return(zv=l(s().mark((function e(t,n){var r,i,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _p((r=po(t)).remoteStore)||uo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=po(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Tc.get(i)||[]).push(n),r.Tc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ev(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function qv(e,t){(e.Tc.get(t)||[]).forEach((function(e){e.resolve()})),e.Tc.delete(t)}function Gv(e,t,n){var r=po(e),i=r.Ic[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ic[r.currentUser.toKey()]=i}}function Wv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=g(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.dc.delete(a),n&&e.fc.vc(a,n)}}catch(T_){i.e(T_)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.yc.ps(t).forEach((function(t){e.yc.containsKey(t)||Kv(e,t)}))}function Kv(e,t){e.wc.delete(t.path.canonicalString());var n=e.mc.get(t);null!==n&&(yp(e.remoteStore,n),e.mc=e.mc.remove(t),e.gc.delete(n),Yv(e))}function Hv(e,t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof gv?(e.yc.addReference(a.key,t),Qv(e,a)):a instanceof bv?(uo("SyncEngine","Document no longer in limbo: "+a.key),e.yc.removeReference(a.key,t),e.yc.containsKey(a.key)||Kv(e,a.key)):fo()}}catch(T_){i.e(T_)}finally{i.f()}}function Qv(e,t){var n=t.key,r=n.path.canonicalString();e.mc.get(n)||e.wc.has(r)||(uo("SyncEngine","New document in limbo: "+n),e.wc.add(r),Yv(e))}function Yv(e){for(;e.wc.size>0&&e.mc.size<e.maxConcurrentLimboResolutions;){var t=e.wc.values().next().value;e.wc.delete(t);var n=new Fo(Lo.fromString(t)),r=e.Ec.next();e.gc.set(r,new _v(n)),e.mc=e.mc.insert(n,r),mp(e.remoteStore,new Tf(bc(dc(n.path)),r,"TargetPurposeLimboResolution",cu.ct))}}function Xv(e,t,n){return $v.apply(this,arguments)}function $v(){return $v=l(s().mark((function e(t,n,r){var i,a,o,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=po(t),a=[],o=[],u=[],e.t0=i.dc.isEmpty(),e.t0){e.next=9;break}return i.dc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=md.Bi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.fc.eu(a),e.next=9,function(){var e=l(s().mark((function e(t,n){var r,i,a,o,u,c,l,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=po(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return $o.forEach(n,(function(t){return $o.forEach(t.$i,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return $o.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),nu(e.t0)){e.next=10;break}throw e.t0;case 10:uo("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=g(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(c=r.Hi.get(u),l=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(l),r.Hi=r.Hi.insert(u,f))}catch(T_){i.e(T_)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),$v.apply(this,arguments)}function Jv(e,t){return Zv.apply(this,arguments)}function Zv(){return(Zv=l(s().mark((function e(t,n){var r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=po(t)).currentUser.isEqual(n)){e.next=11;break}return uo("SyncEngine","User change. New user:",n.toKey()),e.next=5,kd(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Tc.forEach((function(e){e.forEach((function(e){e.reject(new mo(vo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Tc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Xv(r,i.tr);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function em(e,t){var n=po(e),r=n.gc.get(t);if(r&&r.lc)return Bc().add(r.key);var i=Bc(),a=n._c.get(t);if(!a)return i;var o,u=g(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.dc.get(s);i=i.unionWith(c.view.ec)}}catch(T_){u.e(T_)}finally{u.f()}return i}function tm(e,t){return nm.apply(this,arguments)}function nm(){return(nm=l(s().mark((function e(t,n){var r,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=po(t),e.next=3,Dd(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ac(i),e.abrupt("return",(r.isPrimaryClient&&Hv(r,n.targetId,a.uc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rm(e,t){return im.apply(this,arguments)}function im(){return(im=l(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=po(t),e.abrupt("return",Od(r.localStore,n).then((function(e){return Xv(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function am(e,t,n,r){return om.apply(this,arguments)}function om(){return om=l(s().mark((function e(t,n,r,i){var a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=po(t),e.next=3,function(e,t){var n=po(e),r=po(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Vn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):$o.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Mp(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Gv(a,n,i||null),qv(a,n),function(e,t){po(po(e).mutationQueue).Dn(t)}(a.localStore,n)):fo();case 11:return e.next=13,Xv(a,o);case 13:e.next=16;break;case 15:uo("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),om.apply(this,arguments)}function um(e,t){return sm.apply(this,arguments)}function sm(){return sm=l(s().mark((function e(t,n){var r,i,a,o,u,c,l,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ym(r=po(t)),gm(r),!0!==n||!0===r.Ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,cm(r,i.toArray());case 5:return a=e.sent,r.Ac=!0,e.next=9,Yp(r.remoteStore,!0);case 9:o=g(a);try{for(o.s();!(u=o.n()).done;)c=u.value,mp(r.remoteStore,c)}catch(T_){o.e(T_)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Ac){e.next=25;break}return l=[],f=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then((function(){return Wv(r,t),Id(r.localStore,t,!0)})),yp(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,cm(r,l);case 21:return function(e){var t=po(e);t.gc.forEach((function(e,n){yp(t.remoteStore,n)})),t.yc.Is(),t.gc=new Map,t.mc=new Wu(Fo.comparator)}(r),r.Ac=!1,e.next=25,Yp(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),sm.apply(this,arguments)}function cm(e,t,n){return lm.apply(this,arguments)}function lm(){return lm=l(s().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p,v,m,y,b;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=po(t),a=[],o=[],u=g(n),e.prev=2,u.s();case 4:if((c=u.n()).done){e.next=45;break}if(l=c.value,f=void 0,!(h=i._c.get(l))||0===h.length){e.next=34;break}return e.next=11,Td(i.localStore,bc(h[0]));case 11:f=e.sent,d=g(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,m=i.dc.get(v),e.next=20,tm(i,m);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Nd(i.localStore,l);case 36:return b=e.sent,e.next=39,Td(i.localStore,b);case 39:return f=e.sent,e.next=42,Av(i,fm(b),l,!1,f.resumeToken);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.fc.eu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),lm.apply(this,arguments)}function fm(e){return hc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function hm(e){var t=po(e);return po(po(t.localStore).persistence).Mi()}function dm(e,t,n,r){return pm.apply(this,arguments)}function pm(){return pm=l(s().mark((function e(t,n,r,i){var a,o,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=po(t)).Ac){e.next=3;break}return e.abrupt("return",void uo("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Od(a.localStore,Ac(o[0]));case 10:return u=e.sent,c=Fl.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Zu.EMPTY_BYTE_STRING),e.next=14,Xv(a,u,c);case 14:return e.abrupt("break",20);case 15:return e.next=17,Id(a.localStore,n,!0);case 17:return Wv(a,n,i),e.abrupt("break",20);case 19:fo();case 20:case"end":return e.stop()}}),e)}))),pm.apply(this,arguments)}function vm(e,t,n){return mm.apply(this,arguments)}function mm(){return(mm=l(s().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=ym(t)).Ac){e.next=45;break}a=g(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return uo("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Nd(i.localStore,u);case 12:return c=e.sent,e.next=15,Td(i.localStore,c);case 15:return l=e.sent,e.next=18,Av(i,fm(c),l.targetId,!1,l.resumeToken);case 18:mp(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=g(r),e.prev=30,d=s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,Id(i.localStore,t,!1).then((function(){yp(i.remoteStore,t),Wv(i,t)})).catch(Yo);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function ym(e){var t=po(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ov.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=em.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Rv.bind(null,t),t.fc.eu=lv.bind(null,t.eventManager),t.fc.vc=fv.bind(null,t.eventManager),t}function gm(e){var t=po(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Uv.bind(null,t),t}function bm(e,t,n){var r=po(e);(function(){var e=l(s().mark((function e(t,n,r){var i,a,o,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=po(e),r=ef(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ls.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(yv(i)),a=new mv(i,t.localStore,n.serializer),e.next=15,n.Pc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ju(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.Pc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return c=e.sent,e.next=31,Xv(t,c.Hu,void 0);case 31:return e.next=33,function(e,t){var n=po(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ls.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(c.progress),e.abrupt("return",Promise.resolve(c.Wu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(co("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var km=function(){function e(){v(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=ip(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return bd(this.persistence,new yd,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new od(sd.js,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Hd}},{key:"terminate",value:function(){var e=l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),wm=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).bc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return y(n,[{key:"initialize",value:function(){var e=l(s().mark((function e(t){var r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct(_(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.bc.initialize(this,t);case 4:return e.next=6,gm(this.bc.syncEngine);case 6:return e.next=8,Mp(this.bc.remoteStore);case 8:return e.next=10,this.persistence.pi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return bd(this.persistence,new yd,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Ph(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new su(t,this.persistence);return new uu(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=vd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?wh.withCacheSize(this.cacheSizeBytes):wh.DEFAULT;return new hd(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,np(),rp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Hd}}]),n}(km),_m=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r,!1)).bc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return y(n,[{key:"initialize",value:function(){var e=l(s().mark((function e(t){var r,i=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct(_(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.bc.syncEngine,e.t0=this.sharedClientState instanceof Kd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Qr:am.bind(null,r),jr:dm.bind(null,r),zr:vm.bind(null,r),Mi:hm.bind(null,r),Gr:rm.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.pi(function(){var e=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,um(i.bc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=np();if(!Kd.D(t))throw new mo(vo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=vd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Kd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(wm),xm=function(){function e(){v(this,e)}return y(e,[{key:"initialize",value:function(){var e=l(s().mark((function e(t,n){var r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Lv(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Jv.bind(null,this.syncEngine),e.next=12,Yp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new av}},{key:"createDatastore",value:function(e){var t,n=ip(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new tp(t));return function(e,t,n,r){return new cp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Lv(o.syncEngine,e,0)},a=Yd.D()?new Yd:new Qd,new fp(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new xv(e,t,n,r,i,a);return o&&(u.Ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=l(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=po(t),uo("RemoteStore","RemoteStore shutting down."),n.Au.add(5),e.next=5,pp(n);case 5:n.vu.shutdown(),n.Pu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Em(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return l(s().mark((function r(){var i;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var Sm=function(){function e(t){v(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.Vc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Vc(this.observer.error,e):so("Uncaught Error in snapshot listener:",e.toString())}},{key:"Sc",value:function(){this.muted=!0}},{key:"Vc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Am=function(){function e(t,n){var r=this;v(this,e),this.Dc=t,this.serializer=n,this.metadata=new yo,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then((function(e){e&&e.Gu()?r.metadata.resolve(e.Ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Ku))))}),(function(e){return r.metadata.reject(e)}))}return y(e,[{key:"close",value:function(){return this.Dc.cancel()}},{key:"getMetadata",value:function(){var e=l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pc",value:function(){var e=l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.xc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){var e=l(s().mark((function e(){var t,n,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Nc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Cc.decode(t),r=Number(n),isNaN(r)&&this.kc("length string (".concat(n,") is not valid number")),e.next=9,this.Mc(r);case 9:return i=e.sent,e.abrupt("return",new pv(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Nc",value:function(){var e=l(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.$c();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.kc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mc",value:function(){var e=l(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.$c();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.kc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Cc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kc",value:function(e){throw this.Dc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"$c",value:function(){var e=l(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Dc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Tm=function(){function e(t){v(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return y(e,[{key:"lookup",value:function(){var e=l(s().mark((function e(t){var n,r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new mo(vo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=l(s().mark((function e(t,n){var r,i,a,o,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=po(t),i=sf(r.serializer)+"/documents",a={documents:n.map((function(e){return rf(r.serializer,e)}))},e.next=5,r.Ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=hf(r.serializer,e);u.set(t.key.toString(),t)})),c=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());ho(!!t),c.push(t)})),c));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new wl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=l(s().mark((function e(){var t,n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Fo.fromPath(t);n.mutations.push(new _l(r,n.precondition(r)))})),e.next=7,function(){var e=l(s().mark((function e(t,n){var r,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=po(t),i=sf(r.serializer)+"/documents",a={writes:n.map((function(e){return df(r.serializer,e)}))},e.next=3,r.po("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw fo();t=Oo.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new mo(vo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Oo.min())?ol.exists(!1):ol.updateTime(t):ol.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Oo.min()))throw new mo(vo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ol.updateTime(t)}return ol.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Im=function(){function e(t,n,r,i,a){v(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Fc=r.maxAttempts,this.Lo=new ap(this.asyncQueue,"transaction_retry")}return y(e,[{key:"run",value:function(){this.Fc-=1,this.Bc()}},{key:"Bc",value:function(){var e=this;this.Lo.xo(l(s().mark((function t(){var n,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Tm(e.datastore),(r=e.Lc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.qc(t)}))}))})).catch((function(t){e.qc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Lc",value:function(e){try{var t=this.updateFunction(e);return!lu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"qc",value:function(e){var t=this;this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Bc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Uc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Tl(t)}return!1}}]),e}(),Cm=function(){function e(t,n,r,i){var a=this;v(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ro.UNAUTHENTICATED,this.clientId=To.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uo("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return uo("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return y(e,[{key:"getConfiguration",value:function(){var e=l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new mo(vo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(l(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ev(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Dm(e,t){return Nm.apply(this,arguments)}function Nm(){return Nm=l(s().mark((function e(t,n){var r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),uo("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,kd(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Nm.apply(this,arguments)}function Om(e,t){return Mm.apply(this,arguments)}function Mm(){return(Mm=l(s().mark((function e(t,n){var r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Rm(t);case 3:return r=e.sent,uo("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Hp(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Hp(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lm(e){return"FirebaseError"===e.name?e.code===vo.FAILED_PRECONDITION||e.code===vo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Rm(e){return Pm.apply(this,arguments)}function Pm(){return(Pm=l(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return uo("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Dm(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Lm(n=e.t0)){e.next=13;break}throw n;case 13:return co("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Dm(t,new km);case 16:e.next=21;break;case 18:return uo("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Dm(t,new km);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function Fm(e){return Vm.apply(this,arguments)}function Vm(){return(Vm=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return uo("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Om(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return uo("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Om(t,new xm);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Um(e){return Rm(e).then((function(e){return e.persistence}))}function Bm(e){return Rm(e).then((function(e){return e.localStore}))}function jm(e){return Fm(e).then((function(e){return e.remoteStore}))}function zm(e){return Fm(e).then((function(e){return e.syncEngine}))}function qm(e){return Fm(e).then((function(e){return e.datastore}))}function Gm(e){return Wm.apply(this,arguments)}function Wm(){return(Wm=l(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Ev.bind(null,n.syncEngine),r.onUnlisten=Iv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Km(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new yo;return e.asyncQueue.enqueueAndForget(l(s().mark((function i(){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Sm({next:function(a){t.enqueueAndForget((function(){return sv(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new mo(vo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new mo(vo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new dv(dc(n.path),a,{includeMetadataChanges:!0,Uu:!0});return ov(e,o)},i.next=3,Gm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Hm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new yo;return e.asyncQueue.enqueueAndForget(l(s().mark((function i(){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Sm({next:function(n){t.enqueueAndForget((function(){return sv(e,o)})),n.fromCache&&"server"===r.source?i.reject(new mo(vo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new dv(n,a,{includeMetadataChanges:!0,Uu:!0});return ov(e,o)},i.next=3,Gm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Qm=new Map;function Ym(e,t,n){if(!n)throw new mo(vo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Xm(e,t,n,r){if(!0===t&&!0===r)throw new mo(vo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function $m(e){if(!Fo.isDocumentKey(e))throw new mo(vo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Jm(e){if(Fo.isDocumentKey(e))throw new mo(vo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Zm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":fo()}function ey(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new mo(vo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Zm(e);throw new mo(vo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function ty(e,t){if(t<=0)throw new mo(vo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var ny=function(){function e(t){var n;if(v(this,e),void 0===t.host){if(void 0!==t.ssl)throw new mo(vo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new mo(vo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Xm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling||void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),ry=function(){function e(t,n,r,i){v(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ny({}),this._settingsFrozen=!1}return y(e,[{key:"app",get:function(){if(!this._app)throw new mo(vo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new mo(vo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ny(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new bo;switch(e.type){case"firstParty":return new xo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new mo(vo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Qm.get(e);t&&(uo("ComponentProvider","Removing Datastore"),Qm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function iy(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=ey(e,ry))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&co("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=ro.MOCK_USER;else{o=B(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new mo(vo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ro(s)}e._authCredentials=new ko(new go(o,u))}}var ay=function(){function e(t,n,r){v(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new uy(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),oy=function(){function e(t,n,r){v(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),uy=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,r,dc(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ay(this.firestore,null,new Fo(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(oy);function sy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Z(e),Ym("collection","path",t),e instanceof ry){var a=Lo.fromString.apply(Lo,[t].concat(r));return Jm(a),new uy(e,null,a)}if(!(e instanceof ay||e instanceof uy))throw new mo(vo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Lo.fromString.apply(Lo,[t].concat(r)));return Jm(o),new uy(e.firestore,null,o)}function cy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Z(e),1===arguments.length&&(t=To.A()),Ym("doc","path",t),e instanceof ry){var a=Lo.fromString.apply(Lo,[t].concat(r));return $m(a),new ay(e,null,new Fo(a))}if(!(e instanceof ay||e instanceof uy))throw new mo(vo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Lo.fromString.apply(Lo,[t].concat(r)));return $m(o),new ay(e.firestore,e instanceof uy?e.converter:null,new Fo(o))}function ly(e,t){return e=Z(e),t=Z(t),(e instanceof ay||e instanceof uy)&&(t instanceof ay||t instanceof uy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function fy(e,t){return e=Z(e),t=Z(t),e instanceof oy&&t instanceof oy&&e.firestore===t.firestore&&_c(e._query,t._query)&&e.converter===t.converter}var hy=function(){function e(){var t=this;v(this,e),this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new ap(this,"async_queue_retry"),this.Yc=function(){var e=rp();e&&uo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Lo.ko()};var n=rp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Yc)}return y(e,[{key:"isShuttingDown",get:function(){return this.Qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Xc(),this.Zc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;var t=rp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Xc(),this.Qc)return new Promise((function(){}));var n=new yo;return this.Zc((function(){return t.Qc&&t.Hc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Gc.push(e),t.ta()}))}},{key:"ta",value:function(){var e=l(s().mark((function e(){var t=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Gc.length){e.next=14;break}return e.prev=1,e.next=4,this.Gc[0]();case 4:this.Gc.shift(),this.Lo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),nu(e.t0)){e.next=12;break}throw e.t0;case 12:uo("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Gc.length>0&&this.Lo.xo((function(){return t.ta()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t=this,n=this.Kc.then((function(){return t.Wc=!0,e().catch((function(e){t.zc=e,t.Wc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw so("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Wc=!1,e}))}));return this.Kc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);var i=Zp.createAndSchedule(this,e,t,n,(function(e){return r.ea(e)}));return this.jc.push(i),i}},{key:"Xc",value:function(){this.zc&&fo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"na",value:function(){var e=l(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Kc,e.next=3,t;case 3:if(t!==this.Kc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sa",value:function(e){var t,n=g(this.jc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(T_){n.e(T_)}finally{n.f()}return!1}},{key:"ia",value:function(e){var t=this;return this.na().then((function(){t.jc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=g(t.jc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(T_){r.e(T_)}finally{r.f()}return t.na()}))}},{key:"ra",value:function(e){this.Jc.push(e)}},{key:"ea",value:function(e){var t=this.jc.indexOf(e);this.jc.splice(t,1)}}]),e}();function dy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=g(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(T_){i.e(T_)}finally{i.f()}return!1}(e)}var py=function(){function e(){v(this,e),this._progressObserver={},this._taskCompletionResolver=new yo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return y(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),vy=function(e){w(n,e);var t=S(n);function n(e,r,i,a){var o;return v(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new hy,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||yy(this),this._firestoreClient.terminate()}}]),n}(ry);function my(e){return e._firestoreClient||yy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function yy(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new us(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Cm(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function gy(e,t,n){var r=new yo;return e.asyncQueue.enqueue(l(s().mark((function i(){var a;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Dm(e,n);case 3:return i.next=5,Om(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),Lm(a=i.t0)){i.next=13;break}throw a;case 13:co("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function by(e){return function(e){return e.asyncQueue.enqueue(l(s().mark((function t(){var n,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Um(e);case 2:return n=t.sent,t.next=5,jm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=po(e);return t.Au.delete(0),hp(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(my(e=ey(e,vy)))}function ky(e){return function(e){return e.asyncQueue.enqueue(l(s().mark((function t(){var n,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Um(e);case 2:return n=t.sent,t.next=5,jm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=l(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=po(t)).Au.add(0),e.next=4,pp(n);case 4:n.Pu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(my(e=ey(e,vy)))}function wy(e,t){var n=my(e=ey(e,vy)),r=new py;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Am(e,t)}(function(e,t){if(e instanceof Uint8Array)return Em(e,t);if(e instanceof ArrayBuffer)return Em(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Nl().encode(e):e),t)}(n,ip(t));e.asyncQueue.enqueueAndForget(l(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=bm,t.next=3,zm(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function _y(e,t){return function(e,t){return e.asyncQueue.enqueue(l(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=po(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ls.getNamedQuery(e,t)}))},n.next=3,Bm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(my(e=ey(e,vy)),t).then((function(t){return t?new oy(e,null,t.query):null}))}function xy(e){if(e._initialized||e._terminated)throw new mo(vo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ey=function(){function e(t){v(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Zu.fromBase64String(t))}catch(t){throw new mo(vo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Zu.fromUint8Array(t))}}]),e}(),Sy=function(){function e(){v(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new mo(vo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Po(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Ay=y((function e(t){v(this,e),this._methodName=t})),Ty=function(){function e(t,n){if(v(this,e),!isFinite(t)||t<-90||t>90)throw new mo(vo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new mo(vo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Io(this._lat,e._lat)||Io(this._long,e._long)}}]),e}(),Iy=/^__.*__$/,Cy=function(){function e(t,n,r){v(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new vl(e,this.data,this.fieldMask,t,this.fieldTransforms):new pl(e,this.data,t,this.fieldTransforms)}}]),e}(),Dy=function(){function e(t,n,r){v(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return new vl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Ny(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fo()}}var Oy=function(){function e(t,n,r,i,a,o){v(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.oa(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"ua",get:function(){return this.settings.ua}},{key:"ca",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"aa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ca({path:n,ha:!1});return r.la(e),r}},{key:"fa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ca({path:n,ha:!1});return r.oa(),r}},{key:"da",value:function(e){return this.ca({path:void 0,ha:!0})}},{key:"_a",value:function(e){return Jy(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"oa",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.la(this.path.get(e))}},{key:"la",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Ny(this.ua)&&Iy.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),My=function(){function e(t,n,r){v(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ip(t)}return y(e,[{key:"ga",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Oy({ua:e,methodName:t,ma:n,path:Po.emptyPath(),ha:!1,wa:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Ly(e){var t=e._freezeSettings(),n=ip(e._databaseId);return new My(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ry(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ga(a.merge||a.mergeFields?2:0,t,n,i);Qy("Data must be an object, but it was:",o,r);var u,s,c=Ky(r,o);if(a.merge)u=new $u(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=g(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Yy(t,l.value,n);if(!o.contains(d))throw new mo(vo.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Zy(f,d)||f.push(d)}}catch(T_){h.e(T_)}finally{h.f()}u=new $u(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Cy(new Ds(c),u,s)}var Py=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ua)throw 1===e.ua?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ay);function Fy(e,t,n){return new Oy({ua:3,ma:t.settings.ma,methodName:e._methodName,ha:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Vy=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){return new il(e.path,new Xc)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ay),Uy=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).ya=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=Fy(this,e,!0),n=this.ya.map((function(e){return Wy(e,t)})),r=new $c(n);return new il(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ay),By=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).ya=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=Fy(this,e,!0),n=this.ya.map((function(e){return Wy(e,t)})),r=new Zc(n);return new il(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ay),jy=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).pa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=new tl(e.serializer,Wc(e.serializer,this.pa));return new il(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ay);function zy(e,t,n,r){var i=e.ga(1,t,n);Qy("Data must be an object, but it was:",i,r);var a=[],o=Ds.empty();qu(r,(function(e,r){var u=$y(t,e,n);r=Z(r);var s=i.fa(u);if(r instanceof Py)a.push(u);else{var c=Wy(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new $u(a);return new Dy(o,u,i.fieldTransforms)}function qy(e,t,n,r,i,a){var o=e.ga(1,t,n),u=[Yy(t,r,n)],s=[i];if(a.length%2!=0)throw new mo(vo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Yy(t,a[c])),s.push(a[c+1]);for(var l=[],f=Ds.empty(),h=u.length-1;h>=0;--h)if(!Zy(l,u[h])){var d=u[h],p=s[h];p=Z(p);var v=o.fa(d);if(p instanceof Py)l.push(d);else{var m=Wy(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new $u(l);return new Dy(f,y,o.fieldTransforms)}function Gy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Wy(n,e.ga(r?4:3,t))}function Wy(e,t){if(Hy(e=Z(e)))return Qy("Unsupported field value:",t,e),Ky(e,t);if(e instanceof Ay)return function(e,t){if(!Ny(t.ua))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ha&&4!==t.ua)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=g(e);try{for(a.s();!(n=a.n()).done;){var o=Wy(n.value,t.da(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(T_){a.e(T_)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Z(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Wc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=No.fromDate(e);return{timestampValue:$l(t.serializer,n)}}if(e instanceof No){var r=new No(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:$l(t.serializer,r)}}if(e instanceof Ty)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ey)return{bytesValue:Jl(t.serializer,e._byteString)};if(e instanceof ay){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:tf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Zm(e)))}(e,t)}function Ky(e,t){var n={};return Gu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qu(e,(function(e,r){var i=Wy(r,t.aa(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Hy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof No||e instanceof Ty||e instanceof Ey||e instanceof ay||e instanceof Ay)}function Qy(e,t,n){if(!Hy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Zm(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Yy(e,t,n){if((t=Z(t))instanceof Sy)return t._internalPath;if("string"==typeof t)return $y(e,t);throw Jy("Field path arguments must be of type string or ",e,!1,void 0,n)}var Xy=new RegExp("[~\\*/\\[\\]]");function $y(e,t,n){if(t.search(Xy)>=0)throw Jy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return A(Sy,ee(t.split(".")))._internalPath}catch(r){throw Jy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Jy(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new mo(vo.INVALID_ARGUMENT,u+e+s)}function Zy(e,t){return e.some((function(e){return e.isEqual(t)}))}var eg=function(){function e(t,n,r,i,a){v(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ay(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new tg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(ng("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),tg=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return Ct(_(n.prototype),"data",this).call(this)}}]),n}(eg);function ng(e,t){return"string"==typeof t?$y(e,t):t instanceof Sy?t._internalPath:t._delegate._internalPath}function rg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new mo(vo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ig=y((function e(){v(this,e)})),ag=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n)}(ig);function og(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof ig&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof sg})).length,n=e.filter((function(e){return e instanceof ug})).length;if(t>1||t>0&&n>0)throw new mo(vo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=g(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(T_){u.e(T_)}finally{u.f()}return e}var ug=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=this._parse(e);return kg(e._query,t),new oy(e.firestore,e.converter,kc(e._query,t))}},{key:"_parse",value:function(e){var t=Ly(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new mo(vo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){bg(o,a);var s,c=[],l=g(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(gg(r,e,f))}}catch(T_){l.e(T_)}finally{l.f()}u={arrayValue:{values:c}}}else u=gg(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||bg(o,a),u=Gy(n,"where",o,"in"===a||"not-in"===a);return Us.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ag);var sg=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return y(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Bs.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=g(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;kg(r,a),r=kc(r,a)}}catch(T_){i.e(T_)}finally{i.f()}}(e._query,t),new oy(e.firestore,e.converter,kc(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ig);var cg=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return y(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new mo(vo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new mo(vo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ps(t,n);return function(e,t){if(null===vc(e)){var n=mc(e);null!==n&&wg(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new oy(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new fc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ag);var lg=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return y(n,[{key:"_apply",value:function(e){return new oy(e.firestore,e.converter,wc(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ag);var fg=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=yg(e,this.type,this._docOrFields,this._inclusive);return new oy(e.firestore,e.converter,function(e,t){return new fc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ag);function hg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fg._create("startAt",t,!0)}function dg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fg._create("startAfter",t,!1)}var pg=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=yg(e,this.type,this._docOrFields,this._inclusive);return new oy(e.firestore,e.converter,function(e,t){return new fc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ag);function vg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pg._create("endBefore",t,!1)}function mg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pg._create("endAt",t,!0)}function yg(e,t,n,r){if(n[0]=Z(n[0]),n[0]instanceof eg)return function(e,t,n,r,i){if(!r)throw new mo(vo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=g(gc(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(gs(t,r.key));else{var c=r.data.field(s.field);if(is(c))throw new mo(vo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new mo(vo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(T_){u.e(T_)}finally{u.f()}return new Ms(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Ly(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new mo(vo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new mo(vo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!yc(e)&&-1!==c.indexOf("/"))throw new mo(vo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Lo.fromString(c));if(!Fo.isDocumentKey(l))throw new mo(vo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Fo(l);u.push(gs(t,f))}else{var h=Gy(n,r,c);u.push(h)}}return new Ms(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function gg(e,t,n){if("string"==typeof(n=Z(n))){if(""===n)throw new mo(vo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yc(t)&&-1!==n.indexOf("/"))throw new mo(vo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Lo.fromString(n));if(!Fo.isDocumentKey(r))throw new mo(vo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return gs(e,new Fo(r))}if(n instanceof ay)return gs(e,n._key);throw new mo(vo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Zm(n),"."))}function bg(e,t){if(!Array.isArray(e)||0===e.length)throw new mo(vo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function kg(e,t){if(t.isInequality()){var n=mc(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new mo(vo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=vc(e);null!==i&&wg(e,r,i)}var a=function(e,t){var n,r=g(e);try{for(r.s();!(n=r.n()).done;){var i,a=g(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(T_){a.e(T_)}finally{a.f()}}}catch(T_){r.e(T_)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new mo(vo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new mo(vo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function wg(e,t,n){if(!n.isEqual(t))throw new mo(vo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var _g=function(){function e(){v(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ns(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw fo()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return qu(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new Ty(ns(e.latitude),ns(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=as(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(os(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=ts(e);return new No(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Lo.fromString(e);ho(Af(n));var r=new ss(n.get(1),n.get(3)),i=new Fo(n.popFirst(5));return r.isEqual(t)||so("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function xg(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Eg=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new Ey(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ay(this.firestore,null,t)}}]),n}(_g);var Sg=function(){function e(t,n){v(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Ag=function(e){w(n,e);var t=S(n);function n(e,r,i,a,o,u){var s;return v(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return y(n,[{key:"exists",value:function(){return Ct(_(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Tg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(ng("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(eg),Tg=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ct(_(n.prototype),"data",this).call(this,e)}}]),n}(Ag),Ig=function(){function e(t,n,r,i){v(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Sg(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Tg(n._firestore,n._userDataWriter,r.key,r,new Sg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new mo(vo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Tg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Tg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Cg(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Cg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fo()}}function Dg(e,t){return e instanceof Ag&&t instanceof Ag?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ig&&t instanceof Ig&&e._firestore===t._firestore&&fy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Ng=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new Ey(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ay(this.firestore,null,t)}}]),n}(_g);function Og(e){e=ey(e,ay);var t=ey(e.firestore,vy),n=my(t),r=new Ng(t);return function(e,t){var n=new yo;return e.asyncQueue.enqueueAndForget(l(s().mark((function r(){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=l(s().mark((function e(t,n,r){var i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=po(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new mo(vo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ev(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Bm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Ag(t,r,e._key,n,new Sg(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Mg(e){e=ey(e,oy);var t=ey(e.firestore,vy),n=my(t),r=new Ng(t);return function(e,t){var n=new yo;return e.asyncQueue.enqueueAndForget(l(s().mark((function r(){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=l(s().mark((function e(t,n,r){var i,a,o,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dd(t,n,!0);case 3:i=e.sent,a=new kv(n,i.sr),o=a.nc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=ev(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Bm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Ig(t,r,e,n)}))}function Lg(e,t,n){e=ey(e,ay);var r=ey(e.firestore,vy),i=xg(e.converter,t,n);return Vg(r,[Ry(Ly(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ol.none())])}function Rg(e,t,n){e=ey(e,ay);for(var r=ey(e.firestore,vy),i=Ly(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Vg(r,[("string"==typeof(t=Z(t))||t instanceof Sy?qy(i,"updateDoc",e._key,t,n,o):zy(i,"updateDoc",e._key,t)).toMutation(e._key,ol.exists(!0))])}function Pg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Z(e);var u={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||dy(n[c])||(u=n[c],c++);var f,h,d,p={includeMetadataChanges:u.includeMetadataChanges};if(dy(n[c])){var v=n[c];n[c]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[c+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[c+2]=null===(o=v.complete)||void 0===o?void 0:o.bind(v)}if(e instanceof ay)h=ey(e.firestore,vy),d=dc(e._key.path),f={next:function(t){n[c]&&n[c](Ug(h,e,t))},error:n[c+1],complete:n[c+2]};else{var m=ey(e,oy);h=ey(m.firestore,vy),d=m._query;var y=new Ng(h);f={next:function(e){n[c]&&n[c](new Ig(h,y,m,e))},error:n[c+1],complete:n[c+2]},rg(e._query)}return function(e,t,n,r){var i=new Sm(r),a=new dv(t,i,n);return e.asyncQueue.enqueueAndForget(l(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ov,t.next=3,Gm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Sc(),e.asyncQueue.enqueueAndForget(l(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=sv,t.next=3,Gm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(my(h),d,p,f)}function Fg(e,t){return function(e,t){var n=new Sm(t);return e.asyncQueue.enqueueAndForget(l(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){po(e).Nu.add(t),t.next()},t.next=3,Gm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Sc(),e.asyncQueue.enqueueAndForget(l(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){po(e).Nu.delete(t)},t.next=3,Gm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(my(e=ey(e,vy)),dy(t)?t:{next:t})}function Vg(e,t){return function(e,t){var n=new yo;return e.asyncQueue.enqueueAndForget(l(s().mark((function r(){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Dv,r.next=3,zm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(my(e),t)}function Ug(e,t,n){var r=n.docs.get(t._key),i=new Ng(e);return new Ag(e,i,t._key,r,new Sg(n.hasPendingWrites,n.fromCache),t.converter)}var Bg={maxAttempts:5},jg=function(){function e(t,n){v(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ly(t)}return y(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=zg(e,this._firestore),i=xg(r.converter,t,n),a=Ry(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,ol.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=zg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Z(t))||t instanceof Sy?qy(this._dataReader,"WriteBatch.update",i._key,t,n,o):zy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,ol.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=zg(e,this._firestore);return this._mutations=this._mutations.concat(new wl(t._key,ol.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new mo(vo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function zg(e,t){if((e=Z(e)).firestore!==t)throw new mo(vo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var qg=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r))._firestore=e,i}return y(n,[{key:"get",value:function(e){var t=this,r=zg(e,this._firestore),i=new Ng(this._firestore);return Ct(_(n.prototype),"get",this).call(this,e).then((function(e){return new Ag(t._firestore,i,r._key,e._document,new Sg(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){v(this,e),this._firestore=t,this._transaction=n,this._dataReader=Ly(t)}return y(e,[{key:"get",value:function(e){var t=this,n=zg(e,this._firestore),r=new Eg(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return fo();var i=e[0];if(i.isFoundDocument())return new eg(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new eg(t._firestore,r,n._key,null,n.converter);throw fo()}))}},{key:"set",value:function(e,t,n){var r=zg(e,this._firestore),i=xg(r.converter,t,n),a=Ry(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=zg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Z(t))||t instanceof Sy?qy(this._dataReader,"Transaction.update",i._key,t,n,o):zy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=zg(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Gg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Uy("arrayUnion",t)}function Wg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new By("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){io=e}(Xe),qe(new te("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new vy(new wo(e.getProvider("auth-internal")),new So(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new mo(vo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ss(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),nt(no,"3.11.0",e),nt(no,"3.11.0","esm2017")}();function Kg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new mo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Hg(){if("undefined"===typeof Uint8Array)throw new mo("unimplemented","Uint8Arrays are not available in this environment.")}function Qg(){if("undefined"==typeof atob)throw new mo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Yg=function(){function e(t){v(this,e),this._delegate=t}return y(e,[{key:"toBase64",value:function(){return Qg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Hg(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Qg(),new e(Ey.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Hg(),new e(Ey.fromUint8Array(t))}}]),e}();function Xg(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=g(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(T_){i.e(T_)}finally{i.f()}return!1}(e,["next","error","complete"])}var $g=function(){function e(){v(this,e)}return y(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){xy(e=ey(e,vy));var n=my(e);if(n._uninitializedComponentsProvider)throw new mo(vo.FAILED_PRECONDITION,"SDK cache is already specified.");co("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new xm;return gy(n,i,new wm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){xy(e=ey(e,vy));var t=my(e);if(t._uninitializedComponentsProvider)throw new mo(vo.FAILED_PRECONDITION,"SDK cache is already specified.");co("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new xm;return gy(t,r,new _m(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new mo(vo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new yo;return e._queue.enqueueAndForgetEvenWhileRestricted(l(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=l(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zo.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Zo.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(vd(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Jg=function(){function e(t,n,r){var i=this;v(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof ss||(this._appCompat=t)}return y(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||co("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};iy(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return by(this._delegate)}},{key:"disableNetwork",value:function(){return ky(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Xm("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new yo;return e.asyncQueue.enqueueAndForget(l(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=jv,n.next=3,zm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(my(ey(this._delegate,vy)))}},{key:"onSnapshotsInSync",value:function(e){return Fg(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new mo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new hb(this,sy(this._delegate,e))}catch(t){throw ib(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new rb(this,cy(this._delegate,e))}catch(t){throw ib(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new cb(this,function(e,t){if(e=ey(e,ry),Ym("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new mo(vo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new oy(e,null,function(e){return new fc(Lo.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw ib(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=ey(e,vy);var r=Object.assign(Object.assign({},Bg),n);return function(e){if(e.maxAttempts<1)throw new mo(vo.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new yo;return e.asyncQueue.enqueueAndForget(l(s().mark((function i(){var a;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,qm(e);case 2:a=i.sent,new Im(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(my(e),(function(n){return t(new qg(e,n))}),r)}(this._delegate,(function(n){return e(new eb(t,n))}))}},{key:"batch",value:function(){var e=this;return my(this._delegate),new tb(new jg(this._delegate,(function(t){return Vg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return wy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return _y(this._delegate,e).then((function(e){return e?new cb(t,e):null}))}}]),e}(),Zg=function(e){w(n,e);var t=S(n);function n(e){var r;return v(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new Yg(new Ey(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return rb.forKey(t,this.firestore,null)}}]),n}(_g);var eb=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Zg(t)}return y(e,[{key:"get",value:function(e){var t=this,n=db(e);return this._delegate.get(n).then((function(e){return new ub(t._firestore,new Ag(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=db(e);return n?(Kg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=db(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=db(e);return this._delegate.delete(t),this}}]),e}(),tb=function(){function e(t){v(this,e),this._delegate=t}return y(e,[{key:"set",value:function(e,t,n){var r=db(e);return n?(Kg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=db(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=db(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),nb=function(){function e(t,n,r){v(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return y(e,[{key:"fromFirestore",value:function(e,t){var n=new Tg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sb(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Zg(t),n),i.set(n,a)),a}}]),e}();nb.INSTANCES=new WeakMap;var rb=function(){function e(t,n){v(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Zg(t)}return y(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new hb(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new hb(this.firestore,sy(this._delegate,e))}catch(t){throw ib(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Z(e))instanceof ay&&ly(this._delegate,e)}},{key:"set",value:function(e,t){t=Kg("DocumentReference.set",t);try{return t?Lg(this._delegate,e,t):Lg(this._delegate,e)}catch(n){throw ib(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Rg(this._delegate,e):Rg.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw ib(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Vg(ey((e=this._delegate).firestore,vy),[new wl(e._key,ol.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ab(n),a=ob(n,(function(t){return new ub(e.firestore,new Ag(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Pg(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Og(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ey(e,ay);var t=ey(e.firestore,vy);return Km(my(t),e._key,{source:"server"}).then((function(n){return Ug(t,e,n)}))}(this._delegate):function(e){e=ey(e,ay);var t=ey(e.firestore,vy);return Km(my(t),e._key).then((function(n){return Ug(t,e,n)}))}(this._delegate)).then((function(e){return new ub(t.firestore,new Ag(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nb.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new mo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new ay(n._delegate,r,new Fo(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new ay(n._delegate,r,t))}}]),e}();function ib(e,t,n){return e.message=e.message.replace(t,n),e}function ab(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Xg(r))return r}}catch(T_){n.e(T_)}finally{n.f()}return{}}function ob(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Xg(e[0])?e[0]:Xg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ub=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"ref",get:function(){return new rb(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Dg(this._delegate,e._delegate)}}]),e}(),sb=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||fo(),t}}]),n}(ub),cb=function(){function e(t,n){v(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Zg(t)}return y(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,og(this._delegate,function(e,t,n){var r=t,i=ng("where",e);return ug._create(i,r,n)}(t,n,r)))}catch(i){throw ib(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,og(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ng("orderBy",e);return cg._create(n,t)}(t,n)))}catch(r){throw ib(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,og(this._delegate,(ty("limit",n=t),lg._create("limit",n,"F"))))}catch(r){throw ib(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,og(this._delegate,(ty("limitToLast",n=t),lg._create("limitToLast",n,"L"))))}catch(r){throw ib(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,og(this._delegate,hg.apply(void 0,arguments)))}catch(t){throw ib(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,og(this._delegate,dg.apply(void 0,arguments)))}catch(t){throw ib(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,og(this._delegate,vg.apply(void 0,arguments)))}catch(t){throw ib(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,og(this._delegate,mg.apply(void 0,arguments)))}catch(t){throw ib(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return fy(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Mg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ey(e,oy);var t=ey(e.firestore,vy),n=my(t),r=new Ng(t);return Hm(n,e._query,{source:"server"}).then((function(n){return new Ig(t,r,e,n)}))}(this._delegate):function(e){e=ey(e,oy);var t=ey(e.firestore,vy),n=my(t),r=new Ng(t);return rg(e._query),Hm(n,e._query).then((function(n){return new Ig(t,r,e,n)}))}(this._delegate)).then((function(e){return new fb(t.firestore,new Ig(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ab(n),a=ob(n,(function(t){return new fb(e.firestore,new Ig(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Pg(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nb.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),lb=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new sb(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),fb=function(){function e(t,n){v(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"query",get:function(){return new cb(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new sb(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new lb(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new sb(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Dg(this._delegate,e._delegate)}}]),e}(),hb=function(e){w(n,e);var t=S(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return y(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new rb(this.firestore,e):null}},{key:"doc",value:function(e){try{return new rb(this.firestore,void 0===e?cy(this._delegate):cy(this._delegate,e))}catch(t){throw ib(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=ey(e.firestore,vy),r=cy(e),i=xg(e.converter,t);return Vg(n,[Ry(Ly(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ol.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new rb(t.firestore,e)}))}},{key:"isEqual",value:function(e){return ly(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(nb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(cb);function db(e){return ey(e,ay)}var pb,vb=function(){function e(){v(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=A(Sy,n)}return y(e,[{key:"isEqual",value:function(e){return(e=Z(e))instanceof Sy&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Po.keyField().canonicalString())}}]),e}(),mb=function(){function e(t){v(this,e),this._delegate=t}return y(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Vy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Py("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Gg.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Wg.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new jy("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),yb={Firestore:Jg,GeoPoint:Ty,Timestamp:No,Blob:Yg,Transaction:eb,WriteBatch:tb,DocumentReference:rb,DocumentSnapshot:ub,Query:cb,QueryDocumentSnapshot:sb,QuerySnapshot:fb,CollectionReference:hb,FieldPath:vb,FieldValue:mb,setLogLevel:function(e){var t;t=e,ao.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new te("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},yb)))})(pb=It,(function(e,t){return new Jg(e,t,new $g)})),pb.registerVersion("@firebase/firestore-compat","0.3.8");var gb,bb=It.initializeApp({apiKey:"AIzaSyDAT32tS2mFvUII7CLPWqQ5GyKttjv9WRA",authDomain:"soviet-tunes.firebaseapp.com",projectId:"soviet-tunes",storageBucket:"soviet-tunes.appspot.com",messagingSenderId:"292500037377",appId:"1:292500037377:web:cb1813bd61d46576b70500"}).firestore(),kb="firebasestorage.googleapis.com",wb="storageBucket",_b=function(e){w(n,e);var t=S(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return v(this,n),(i=t.call(this,xb(e),"Firebase Storage: ".concat(r," (").concat(xb(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(b(i),n.prototype),i}return y(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return xb(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(G);function xb(e){return"storage/"+e}function Eb(){return new _b(gb.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Sb(){return new _b(gb.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ab(){return new _b(gb.CANCELED,"User canceled the upload/download.")}function Tb(){return new _b(gb.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ib(e){return new _b(gb.INVALID_ARGUMENT,e)}function Cb(){return new _b(gb.APP_DELETED,"The Firebase app was deleted.")}function Db(e,t){return new _b(gb.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Nb(e){throw new _b(gb.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(gb||(gb={}));var Ob,Mb=function(){function e(t,n){v(this,e),this.bucket=t,this.path_=n}return y(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new _b(gb.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===kb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new _b(gb.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Lb=function(){function e(t){v(this,e),this.promise_=Promise.reject(t)}return y(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Rb(e){return"string"===typeof e||e instanceof String}function Pb(e){return Fb()&&e instanceof Blob}function Fb(){return"undefined"!==typeof Blob&&!z()}function Vb(e,t,n,r){if(r<t)throw Ib("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Ib("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Ub(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Bb(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function jb(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ob||(Ob={}));var zb=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];v(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return y(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=Eb();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?Cb():Ab());else i(Sb())}};this.canceled_?t(0,new qb(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new qb(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Ob.NO_ERROR,a=r.getStatus();if(!n||jb(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===Ob.ABORT;t(!1,new qb(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new qb(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),qb=y((function e(t,n,r){v(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Gb(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Wb(){for(var e=Gb(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Fb())return new Blob(n);throw new _b(gb.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Kb(e){if("undefined"===typeof atob)throw t="base-64",new _b(gb.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var Hb={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Qb=y((function e(t,n){v(this,e),this.data=t,this.contentType=n||null}));function Yb(e,t){switch(e){case Hb.RAW:return new Qb(Xb(t));case Hb.BASE64:case Hb.BASE64URL:return new Qb($b(e,t));case Hb.DATA_URL:return new Qb(function(e){var t=new Jb(e);return t.base64?$b(Hb.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Db(Hb.DATA_URL,"Malformed data URL.")}return Xb(t)}(t.rest)}(t),new Jb(t).contentType)}throw Eb()}function Xb(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function $b(e,t){switch(e){case Hb.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Db(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Hb.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Db(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=Kb(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw Db(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var Jb=y((function e(t){v(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Db(Hb.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var Zb=function(){function e(t,n){v(this,e);var r=0,i="";Pb(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return y(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Pb(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Fb()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Wb.apply(null,i))}var a=n.map((function(e){return Rb(e)?Yb(Hb.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function ek(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function tk(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function nk(e,t){return t}var rk=y((function e(t,n,r,i){v(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||nk})),ik=null;function ak(){if(ik)return ik;var e=[];e.push(new rk("bucket")),e.push(new rk("generation")),e.push(new rk("metageneration")),e.push(new rk("name","fullPath",!0));var t=new rk("name");t.xform=function(e,t){return function(e){return!Rb(e)||e.length<2?e:tk(e)}(t)},e.push(t);var n=new rk("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new rk("timeCreated")),e.push(new rk("updated")),e.push(new rk("md5Hash",null,!0)),e.push(new rk("cacheControl",null,!0)),e.push(new rk("contentDisposition",null,!0)),e.push(new rk("contentEncoding",null,!0)),e.push(new rk("contentLanguage",null,!0)),e.push(new rk("contentType",null,!0)),e.push(new rk("metadata","customMetadata",!0)),ik=e}function ok(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Mb(n,r);return t._makeStorageReference(i)}})}(r,e),r}function uk(e,t,n){var r=ek(t);return null===r?null:ok(e,r,n)}function sk(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var ck=y((function e(t,n,r,i){v(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function lk(e){if(!e)throw Eb()}function fk(e,t){return function(n,r){var i=uk(e,r,t);return lk(null!==i),i}}function hk(e,t){return function(n,r){var i=uk(e,r,t);return lk(null!==i),function(e,t,n,r){var i=ek(t);if(null===i)return null;if(!Rb(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Ub("/b/"+o(i)+"/o/"+o(a),n,r)+Bb({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function dk(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new _b(gb.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new _b(gb.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new _b(gb.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new _b(gb.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function pk(e){var t=dk(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new _b(gb.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function vk(e,t,n){var r=Ub(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new ck(r,"GET",fk(e,n),i);return a.errorHandler=pk(t),a}function mk(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function yk(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=mk(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+sk(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=Zb.getBlob(c,r,l);if(null===f)throw Tb();var h={name:s.fullPath},d=Ub(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new ck(d,"POST",fk(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=dk(t),v}var gk=y((function e(t,n,r,i){v(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function bk(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){lk(!1)}return lk(!!n&&-1!==(t||["active"]).indexOf(n)),n}var kk=262144;function wk(e,t,n,r,i,a,o,u){var s=new gk(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new _b(gb.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw Tb();var v=t.maxUploadRetryTime,m=new ck(n,"POST",(function(e,n){var i,o=bk(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?fk(t,a)(e,n):null,new gk(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=dk(e),m}var _k={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function xk(e){switch(e){case"running":case"pausing":case"canceling":return _k.RUNNING;case"paused":return _k.PAUSED;case"success":return _k.SUCCESS;case"canceled":return _k.CANCELED;default:return _k.ERROR}}var Ek=y((function e(t,n,r){v(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function Sk(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Ak=null,Tk=function(){function e(){var t=this;v(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ob.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Ob.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Ob.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return y(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Nb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Nb("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Nb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Nb("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Nb("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Ik=function(e){w(n,e);var t=S(n);function n(){return v(this,n),t.apply(this,arguments)}return y(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Tk);function Ck(){return Ak?Ak():new Ik}var Dk=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;v(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=ak(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(gb.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(jb(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=Sb()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(gb.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return y(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=o(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=mk(t,r,i),u={name:o.fullPath},s=Ub(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=sk(o,n),f=e.maxUploadRetryTime,h=new ck(s,"POST",(function(e){var t;bk(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){lk(!1)}return lk(Rb(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=dk(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Ck,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new ck(n,"POST",(function(e){var t=bk(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){lk(!1)}n||lk(!1);var i=Number(n);return lk(!isNaN(i)),new gk(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=dk(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Ck,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=kk*this._chunkMultiplier,n=new gk(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=wk(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,Ck,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(kk*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=vk(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Ck,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=yk(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Ck,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ab(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=xk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Ek(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(xk(this._state)){case _k.SUCCESS:Sk(this._resolve.bind(null,this.snapshot))();break;case _k.CANCELED:case _k.ERROR:Sk(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(xk(this._state)){case _k.RUNNING:case _k.PAUSED:e.next&&Sk(e.next.bind(e,this.snapshot))();break;case _k.SUCCESS:e.complete&&Sk(e.complete.bind(e))();break;case _k.CANCELED:case _k.ERROR:default:e.error&&Sk(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Nk=function(){function e(t,n){v(this,e),this._service=t,this._location=n instanceof Mb?n:Mb.makeFromUrl(n,t.host)}return y(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Mb(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return tk(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Mb(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new _b(gb.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function Ok(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Ub(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new ck(r,"GET",hk(e,n),i);return a.errorHandler=pk(t),a}(e.storage,e._location,ak());return e.storage.makeRequestWithTokens(t,Ck).then((function(e){if(null===e)throw new _b(gb.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Mk(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Mb(e._location.bucket,n);return new Nk(e.storage,r)}function Lk(e,t){if(e instanceof Fk){var n=e;if(null==n._bucket)throw new _b(gb.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wb+"' property when initializing the app?");var r=new Nk(n,n._bucket);return null!=t?Lk(r,t):r}return void 0!==t?Mk(e,t):e}function Rk(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Fk)return new Nk(e,t);throw Ib("To use ref(service, url), the first argument must be a Storage instance.")}return Lk(e,t)}function Pk(e,t){var n=null===t||void 0===t?void 0:t[wb];return null==n?null:Mb.makeFromBucketSpec(n,e)}var Fk=function(){function e(t,n,r,i,a){v(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=kb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Mb.makeFromBucketSpec(i,this._host):Pk(this._host,this.app.options)}return y(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Mb.makeFromBucketSpec(this._url,e):this._bucket=Pk(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Vb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Vb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=l(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=l(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Nk(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Lb(Cb());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=Bb(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new zb(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=l(s().mark((function e(t,n){var r,i,a,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=o(r,2),a=i[0],u=i[1],e.abrupt("return",this._makeRequest(t,n,a,u).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Vk="@firebase/storage",Uk="0.11.2",Bk="storage";function jk(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Dk(e,new Zb(t),n)}(e=Z(e),t,n)}function zk(e){return Ok(e=Z(e))}function qk(e,t){return Rk(e=Z(e),t)}function Gk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je(),t=arguments.length>1?arguments[1]:void 0,n=Ge(e=Z(e),Bk).getImmediate({identifier:t}),r=F("storage");return r&&Wk.apply(void 0,[n].concat(ee(r))),n}function Wk(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:B(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Kk(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Fk(r,i,a,n,Xe)}qe(new te(Bk,Kk,"PUBLIC").setMultipleInstances(!0)),nt(Vk,Uk,""),nt(Vk,Uk,"esm2017");var Hk=n(184),Qk=function(e){var n=e.active,r=e.setActive,i=o((0,t.useState)({title:"",author:""}),2),a=i[0],u=i[1],c=function(e){u(p(p({},a),{},h({},e.target.name,e.target.value)))},f=o((0,t.useState)([]),2),d=(f[0],f[1],o((0,t.useState)(null),2)),v=d[0],m=d[1],y=o((0,t.useState)(null),2),g=y[0],b=y[1],k=function(){var e=l(s().mark((function e(t){var n,r,i,o,c,l,f,h,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t.preventDefault(),n=v,r=g,i=Gk(),o="uploads/images/"+n.name,c="uploads/audio/"+r.name,l=qk(i,o),f=qk(i,c),h=jk(l,n),d=jk(f,r),h.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done")}),(function(e){console.log(e)}),(function(){zk(h.snapshot.ref).then((function(e){zk(d.snapshot.ref).then((function(t){console.log("File available at",e),bb.collection("tracks").add({title:a.title,images:e,audio:t,author:a.author,datetime:It.firestore.FieldValue.serverTimestamp()}),u(p(p({},a),{},{title:"",author:""})),m(null),b(null)}))}))})),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,Hk.jsxs)("div",{className:n?"modal active":"modal",onClick:function(){return r(!1)},children:[(0,Hk.jsxs)("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},children:[(0,Hk.jsx)("h1",{style:{fontSize:24,textAlign:"center"},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0442\u0440\u0435\u043a\u0430"}),(0,Hk.jsx)("div",{className:"wrapper",children:(0,Hk.jsx)("form",{onSubmit:k,children:(0,Hk.jsxs)("div",{className:"upload-main-block",children:[(0,Hk.jsxs)("div",{className:"upload-block",children:[" ",(0,Hk.jsx)("input",{type:"text",id:"title",name:"title",value:a.title,onChange:c,placeholder:" \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0440\u0435\u043a\u0430 ",required:!0})]}),(0,Hk.jsxs)("div",{className:"upload-block",children:[" ",(0,Hk.jsx)("input",{type:"text",id:"title",name:"author",value:a.author,onChange:c,placeholder:" \u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c ",required:!0})]}),(0,Hk.jsxs)("div",{className:"upload-block",children:[" ",(0,Hk.jsx)("p",{children:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430 \u0442\u0440\u0435\u043a\u0430 "}),(0,Hk.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){m(e.target.files[0])}})]}),(0,Hk.jsxs)("div",{className:"upload-block",children:[" ",(0,Hk.jsx)("p",{children:"\u0422\u0440\u0435\u043a "}),(0,Hk.jsx)("input",{type:"file",accept:"audio/*",onChange:function(e){b(e.target.files[0])}})]}),(0,Hk.jsxs)("div",{className:"upload-block",children:[" ",(0,Hk.jsx)("button",{type:"submit",className:"btn__default btn__add",children:" \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c "})]})]})})})]}),(0,Hk.jsx)("style",{jsx:"true",children:"\n                  .modal {\n                    height: 100vh;\n                    width: 100%;\n                    background-color: rgba(0, 0, 0, 0.4);\n                    position: fixed;\n                    top: 0;\n                    left: 0;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    opacity: 0;\n                    pointer-events: none;\n                    transition: .5s;\n                    z-index:999;\n                  }\n\n                  .modal.active {\n                    opacity: 1;\n                    pointer-events: all;\n                  }\n\n                  .modal-content {\n                    padding: 20px;\n                    border-radius: 12px;\n                    background-color: #55eac3;\n                    width: 50%;\n                    height: 40%;\n                  }\n\n                  @media (max-width: 600px) {\n                    .modal-content {\n                      width: 80%;\n                      height: 50%;\n                    }\n                  }\n                  .upload-main-block{\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    flex-direction: column;\n                  }\n                  .upload-block{\n                    margin:10px auto;\n                    font-size: 20px;\n                  }\n\n                "})]})},Yk=/^[a-z0-9]+(-[a-z0-9]+)*$/,Xk=Object.freeze({left:0,top:0,width:16,height:16,rotate:0,vFlip:!1,hFlip:!1});function $k(e){return p(p({},Xk),e)}var Jk=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=e.split(":");if("@"===e.slice(0,1)){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){var a=i.pop(),o=i.pop(),u={provider:i.length>0?i[0]:r,prefix:o,name:a};return t&&!Zk(u)?null:u}var s=i[0],c=s.split("-");if(c.length>1){var l={provider:r,prefix:c.shift(),name:c.join("-")};return t&&!Zk(l)?null:l}if(n&&""===r){var f={provider:r,prefix:"",name:s};return t&&!Zk(f,n)?null:f}return null},Zk=function(e,t){return!!e&&!(""!==e.provider&&!e.provider.match(Yk)||!(t&&""===e.prefix||e.prefix.match(Yk))||!e.name.match(Yk))};function ew(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r=function t(n,r){if(void 0!==e.icons[n])return Object.assign({},e.icons[n]);if(r>5)return null;var i=e.aliases;if(i&&void 0!==i[n]){var a=i[n],o=t(a.parent,r+1);return o?function(e,t){var n=p({},e);for(var r in Xk){var i=r;if(void 0!==t[i]){var a=t[i];if(void 0===n[i]){n[i]=a;continue}switch(i){case"rotate":n[i]=(n[i]+a)%4;break;case"hFlip":case"vFlip":n[i]=a!==n[i];break;default:n[i]=a}}}return n}(o,a):o}var u=e.chars;return!r&&u&&void 0!==u[n]?t(u[n],r+1):null}(t,0);if(r)for(var i in Xk)void 0===r[i]&&void 0!==e[i]&&(r[i]=e[i]);return r&&n?$k(r):r}function tw(e,t,n){n=n||{};var r=[];if("object"!==typeof e||"object"!==typeof e.icons)return r;e.not_found instanceof Array&&e.not_found.forEach((function(e){t(e,null),r.push(e)}));var i=e.icons;Object.keys(i).forEach((function(n){var i=ew(e,n,!0);i&&(t(n,i),r.push(n))}));var a=n.aliases||"all";if("none"!==a&&"object"===typeof e.aliases){var o=e.aliases;Object.keys(o).forEach((function(n){if("variations"!==a||!function(e){for(var t in Xk)if(void 0!==e[t])return!0;return!1}(o[n])){var i=ew(e,n,!0);i&&(t(n,i),r.push(n))}}))}return r}var nw={provider:"string",aliases:"object",not_found:"object"};for(var rw in Xk)nw[rw]=typeof Xk[rw];function iw(e){if("object"!==typeof e||null===e)return null;var t=e;if("string"!==typeof t.prefix||!e.icons||"object"!==typeof e.icons)return null;for(var n in nw)if(void 0!==e[n]&&typeof e[n]!==nw[n])return null;var r=t.icons;for(var i in r){var a=r[i];if(!i.match(Yk)||"string"!==typeof a.body)return null;for(var o in Xk)if(void 0!==a[o]&&typeof a[o]!==typeof Xk[o])return null}var u=t.aliases;if(u)for(var s in u){var c=u[s],l=c.parent;if(!s.match(Yk)||"string"!==typeof l||!r[l]&&!u[l])return null;for(var f in Xk)if(void 0!==c[f]&&typeof c[f]!==typeof Xk[f])return null}return t}var aw=Object.create(null);try{var ow=window||self;ow&&1===ow._iconifyStorage.version&&(aw=ow._iconifyStorage.storage)}catch(T_){}function uw(e,t){void 0===aw[e]&&(aw[e]=Object.create(null));var n=aw[e];return void 0===n[t]&&(n[t]=function(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:Object.create(null)}}(e,t)),n[t]}function sw(e,t){if(!iw(t))return[];var n=Date.now();return tw(t,(function(t,r){r?e.icons[t]=r:e.missing[t]=n}))}function cw(e,t){var n=e.icons[t];return void 0===n?null:n}var lw=!1;function fw(e){return"boolean"===typeof e&&(lw=e),lw}function hw(e){var t="string"===typeof e?Jk(e,!0,lw):e;return t?cw(uw(t.provider,t.prefix),t.name):null}function dw(e,t){var n=Jk(e,!0,lw);return!!n&&function(e,t,n){try{if("string"===typeof n.body)return e.icons[t]=Object.freeze($k(n)),!0}catch(T_){}return!1}(uw(n.provider,n.prefix),n.name,t)}var pw=Object.freeze({inline:!1,width:null,height:null,hAlign:"center",vAlign:"middle",slice:!1,hFlip:!1,vFlip:!1,rotate:0});function vw(e,t){var n={};for(var r in e){var i=r;if(n[i]=e[i],void 0!==t[i]){var a=t[i];switch(i){case"inline":case"slice":"boolean"===typeof a&&(n[i]=a);break;case"hFlip":case"vFlip":!0===a&&(n[i]=!n[i]);break;case"hAlign":case"vAlign":"string"===typeof a&&""!==a&&(n[i]=a);break;case"width":case"height":("string"===typeof a&&""!==a||"number"===typeof a&&a||null===a)&&(n[i]=a);break;case"rotate":"number"===typeof a&&(n[i]+=a)}}}return n}var mw=/(-?[0-9.]*[0-9]+[0-9.]*)/g,yw=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function gw(e,t,n){if(1===t)return e;if(n=void 0===n?100:n,"number"===typeof e)return Math.ceil(e*t*n)/n;if("string"!==typeof e)return e;var r=e.split(mw);if(null===r||!r.length)return e;for(var i=[],a=r.shift(),o=yw.test(a);;){if(o){var u=parseFloat(a);isNaN(u)?i.push(a):i.push(Math.ceil(u*t*n)/n)}else i.push(a);if(void 0===(a=r.shift()))return i.join("");o=!o}}function bw(e){var t="";switch(e.hAlign){case"left":t+="xMin";break;case"right":t+="xMax";break;default:t+="xMid"}switch(e.vAlign){case"top":t+="YMin";break;case"bottom":t+="YMax";break;default:t+="YMid"}return t+=e.slice?" slice":" meet"}function kw(e,t){var n,r,i={left:e.left,top:e.top,width:e.width,height:e.height},a=e.body;[e,t].forEach((function(e){var t,n=[],r=e.hFlip,o=e.vFlip,u=e.rotate;switch(r?o?u+=2:(n.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),n.push("scale(-1 1)"),i.top=i.left=0):o&&(n.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),n.push("scale(1 -1)"),i.top=i.left=0),u<0&&(u-=4*Math.floor(u/4)),u%=4){case 1:t=i.height/2+i.top,n.unshift("rotate(90 "+t.toString()+" "+t.toString()+")");break;case 2:n.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:t=i.width/2+i.left,n.unshift("rotate(-90 "+t.toString()+" "+t.toString()+")")}u%2===1&&(0===i.left&&0===i.top||(t=i.left,i.left=i.top,i.top=t),i.width!==i.height&&(t=i.width,i.width=i.height,i.height=t)),n.length&&(a='<g transform="'+n.join(" ")+'">'+a+"</g>")})),null===t.width&&null===t.height?n=gw(r="1em",i.width/i.height):null!==t.width&&null!==t.height?(n=t.width,r=t.height):null!==t.height?n=gw(r=t.height,i.width/i.height):r=gw(n=t.width,i.height/i.width),"auto"===n&&(n=i.width),"auto"===r&&(r=i.height);var o={attributes:{width:n="string"===typeof n?n:n.toString()+"",height:r="string"===typeof r?r:r.toString()+"",preserveAspectRatio:bw(t),viewBox:i.left.toString()+" "+i.top.toString()+" "+i.width.toString()+" "+i.height.toString()},body:a};return t.inline&&(o.inline=!0),o}var ww=/\sid="(\S+)"/g,_w="IconifyId"+Date.now().toString(16)+(16777216*Math.random()|0).toString(16),xw=0;function Ew(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_w,r=[];t=ww.exec(e);)r.push(t[1]);return r.length?(r.forEach((function(t){var r="function"===typeof n?n(t):n+(xw++).toString(),i=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+i+')([")]|\\.[a-z])',"g"),"$1"+r+"$3")})),e):e}var Sw=Object.create(null);function Aw(e,t){Sw[e]=t}function Tw(e){return Sw[e]||Sw[""]}function Iw(e){var t;if("string"===typeof e.resources)t=[e.resources];else if(!((t=e.resources)instanceof Array)||!t.length)return null;return{resources:t,path:void 0===e.path?"/":e.path,maxURL:e.maxURL?e.maxURL:500,rotate:e.rotate?e.rotate:750,timeout:e.timeout?e.timeout:5e3,random:!0===e.random,index:e.index?e.index:0,dataAfterTimeout:!1!==e.dataAfterTimeout}}for(var Cw=Object.create(null),Dw=["https://api.simplesvg.com","https://api.unisvg.com"],Nw=[];Dw.length>0;)1===Dw.length||Math.random()>.5?Nw.push(Dw.shift()):Nw.push(Dw.pop());function Ow(e,t){var n=Iw(t);return null!==n&&(Cw[e]=n,!0)}function Mw(e){return Cw[e]}Cw[""]=Iw({resources:["https://api.iconify.design"].concat(Nw)});var Lw=function(e,t){var n=e,r=-1!==n.indexOf("?");return Object.keys(t).forEach((function(e){var i;try{i=function(e){switch(typeof e){case"boolean":return e?"true":"false";case"number":case"string":return encodeURIComponent(e);default:throw new Error("Invalid parameter")}}(t[e])}catch(T_){return}n+=(r?"&":"?")+encodeURIComponent(e)+"="+i,r=!0})),n},Rw={},Pw={},Fw=function(){var e;try{if("function"===typeof(e=fetch))return e}catch(T_){}return null}();var Vw={prepare:function(e,t,n){var r=[],i=Rw[t];void 0===i&&(i=function(e,t){var n,r=Mw(e);if(!r)return 0;if(r.maxURL){var i=0;r.resources.forEach((function(e){var t=e;i=Math.max(i,t.length)}));var a=Lw(t+".json",{icons:""});n=r.maxURL-i-r.path.length-a.length}else n=0;var o=e+":"+t;return Pw[e]=r.path,Rw[o]=n,n}(e,t));var a="icons",o={type:a,provider:e,prefix:t,icons:[]},u=0;return n.forEach((function(n,s){(u+=n.length+1)>=i&&s>0&&(r.push(o),o={type:a,provider:e,prefix:t,icons:[]},u=n.length),o.icons.push(n)})),r.push(o),r},send:function(e,t,n){if(Fw){var r=function(e){if("string"===typeof e){if(void 0===Pw[e]){var t=Mw(e);if(!t)return"/";Pw[e]=t.path}return Pw[e]}return"/"}(t.provider);switch(t.type){case"icons":var i=t.prefix,a=t.icons.join(",");r+=Lw(i+".json",{icons:a});break;case"custom":var o=t.uri;r+="/"===o.slice(0,1)?o.slice(1):o;break;default:return void n("abort",400)}var u=503;Fw(e+r).then((function(e){var t=e.status;if(200===t)return u=501,e.json();setTimeout((function(){n(function(e){return 404===e}(t)?"abort":"next",t)}))})).then((function(e){"object"===typeof e&&null!==e?setTimeout((function(){n("success",e)})):setTimeout((function(){n("next",u)}))})).catch((function(){n("next",u)}))}else n("abort",424)}};var Uw=Object.create(null),Bw=Object.create(null);function jw(e,t){e.forEach((function(e){var n=e.provider;if(void 0!==Uw[n]){var r=Uw[n],i=e.prefix,a=r[i];a&&(r[i]=a.filter((function(e){return e.id!==t})))}}))}var zw=0;var qw={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Gw(e,t,n,r){var i,a=e.resources.length,o=e.random?Math.floor(Math.random()*a):e.index;if(e.random){var u=e.resources.slice(0);for(i=[];u.length>1;){var s=Math.floor(Math.random()*u.length);i.push(u[s]),u=u.slice(0,s).concat(u.slice(s+1))}i=i.concat(u)}else i=e.resources.slice(o).concat(e.resources.slice(0,o));var c,l=Date.now(),f="pending",h=0,d=null,p=[],v=[];function m(){d&&(clearTimeout(d),d=null)}function y(){"pending"===f&&(f="aborted"),m(),p.forEach((function(e){"pending"===e.status&&(e.status="aborted")})),p=[]}function g(e,t){t&&(v=[]),"function"===typeof e&&v.push(e)}function b(){f="failed",v.forEach((function(e){e(void 0,c)}))}function k(){p.forEach((function(e){"pending"===e.status&&(e.status="aborted")})),p=[]}function w(){if("pending"===f){m();var r=i.shift();if(void 0===r)return p.length?void(d=setTimeout((function(){m(),"pending"===f&&(k(),b())}),e.timeout)):void b();var a={status:"pending",resource:r,callback:function(t,n){!function(t,n,r){var a="success"!==n;switch(p=p.filter((function(e){return e!==t})),f){case"pending":break;case"failed":if(a||!e.dataAfterTimeout)return;break;default:return}if("abort"===n)return c=r,void b();if(a)return c=r,void(p.length||(i.length?w():b()));if(m(),k(),!e.random){var o=e.resources.indexOf(t.resource);-1!==o&&o!==e.index&&(e.index=o)}f="completed",v.forEach((function(e){e(r)}))}(a,t,n)}};p.push(a),h++,d=setTimeout(w,e.rotate),n(r,t,a.callback)}}return"function"===typeof r&&v.push(r),setTimeout(w),function(){return{startTime:l,payload:t,status:f,queriesSent:h,queriesPending:p.length,subscribe:g,abort:y}}}function Ww(e){var t=function(e){if("object"!==typeof e||"object"!==typeof e.resources||!(e.resources instanceof Array)||!e.resources.length)throw new Error("Invalid Reduncancy configuration");var t,n=Object.create(null);for(t in qw)void 0!==e[t]?n[t]=e[t]:n[t]=qw[t];return n}(e),n=[];function r(){n=n.filter((function(e){return"pending"===e().status}))}var i={query:function(e,i,a){var o=Gw(t,e,i,(function(e,t){r(),a&&a(e,t)}));return n.push(o),o},find:function(e){var t=n.find((function(t){return e(t)}));return void 0!==t?t:null},setIndex:function(e){t.index=e},getIndex:function(){return t.index},cleanup:r};return i}function Kw(){}var Hw=Object.create(null);function Qw(e,t,n){var r,i;if("string"===typeof e){var a=Tw(e);if(!a)return n(void 0,424),Kw;i=a.send;var o=function(e){if(void 0===Hw[e]){var t=Mw(e);if(!t)return;var n={config:t,redundancy:Ww(t)};Hw[e]=n}return Hw[e]}(e);o&&(r=o.redundancy)}else{var u=Iw(e);if(u){r=Ww(u);var s=Tw(e.resources?e.resources[0]:"");s&&(i=s.send)}}return r&&i?r.query(t,i,n)().abort:(n(void 0,424),Kw)}var Yw={};function Xw(){}var $w=Object.create(null),Jw=Object.create(null),Zw=Object.create(null),e_=Object.create(null);function t_(e,t){void 0===Zw[e]&&(Zw[e]=Object.create(null));var n=Zw[e];n[t]||(n[t]=!0,setTimeout((function(){n[t]=!1,function(e,t){void 0===Bw[e]&&(Bw[e]=Object.create(null));var n=Bw[e];n[t]||(n[t]=!0,setTimeout((function(){if(n[t]=!1,void 0!==Uw[e]&&void 0!==Uw[e][t]){var r=Uw[e][t].slice(0);if(r.length){var i=uw(e,t),a=!1;r.forEach((function(n){var r=n.icons,o=r.pending.length;r.pending=r.pending.filter((function(n){if(n.prefix!==t)return!0;var o=n.name;if(void 0!==i.icons[o])r.loaded.push({provider:e,prefix:t,name:o});else{if(void 0===i.missing[o])return a=!0,!0;r.missing.push({provider:e,prefix:t,name:o})}return!1})),r.pending.length!==o&&(a||jw([{provider:e,prefix:t}],n.id),n.callback(r.loaded.slice(0),r.missing.slice(0),r.pending.slice(0),n.abort))}))}}})))}(e,t)})))}var n_=Object.create(null);function r_(e,t,n){void 0===Jw[e]&&(Jw[e]=Object.create(null));var r=Jw[e];void 0===e_[e]&&(e_[e]=Object.create(null));var i=e_[e];void 0===$w[e]&&($w[e]=Object.create(null));var a=$w[e];void 0===r[t]?r[t]=n:r[t]=r[t].concat(n).sort(),i[t]||(i[t]=!0,setTimeout((function(){i[t]=!1;var n=r[t];delete r[t];var o=Tw(e);o?o.prepare(e,t,n).forEach((function(n){Qw(e,n,(function(r,i){var o=uw(e,t);if("object"!==typeof r){if(404!==i)return;var u=Date.now();n.icons.forEach((function(e){o.missing[e]=u}))}else try{var s=sw(o,r);if(!s.length)return;var c=a[t];s.forEach((function(e){delete c[e]})),Yw.store&&Yw.store(e,r)}catch(l){console.error(l)}t_(e,t)}))})):function(){var n=(""===e?"":"@"+e+":")+t,r=Math.floor(Date.now()/6e4);n_[n]<r&&(n_[n]=r,console.error('Unable to retrieve icons for "'+n+'" because API is not configured properly.'))}()})))}var i_=function(e,t){var n=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];return e.forEach((function(e){var i="string"===typeof e?Jk(e,!1,n):e;t&&!Zk(i,n)||r.push({provider:i.provider,prefix:i.prefix,name:i.name})})),r}(e,!0,fw()),r=function(e){var t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((function(e,t){return e.provider!==t.provider?e.provider.localeCompare(t.provider):e.prefix!==t.prefix?e.prefix.localeCompare(t.prefix):e.name.localeCompare(t.name)}));var r={provider:"",prefix:"",name:""};return e.forEach((function(e){if(r.name!==e.name||r.prefix!==e.prefix||r.provider!==e.provider){r=e;var i=e.provider,a=e.prefix,o=e.name;void 0===n[i]&&(n[i]=Object.create(null));var u=n[i];void 0===u[a]&&(u[a]=uw(i,a));var s=u[a],c={provider:i,prefix:a,name:o};(void 0!==s.icons[o]?t.loaded:""===a||void 0!==s.missing[o]?t.missing:t.pending).push(c)}})),t}(n);if(!r.pending.length){var i=!0;return t&&setTimeout((function(){i&&t(r.loaded,r.missing,r.pending,Xw)})),function(){i=!1}}var a,o,u=Object.create(null),s=[];r.pending.forEach((function(e){var t=e.provider,n=e.prefix;if(n!==o||t!==a){a=t,o=n,s.push({provider:t,prefix:n}),void 0===$w[t]&&($w[t]=Object.create(null));var r=$w[t];void 0===r[n]&&(r[n]=Object.create(null)),void 0===u[t]&&(u[t]=Object.create(null));var i=u[t];void 0===i[n]&&(i[n]=[])}}));var c=Date.now();return r.pending.forEach((function(e){var t=e.provider,n=e.prefix,r=e.name,i=$w[t][n];void 0===i[r]&&(i[r]=c,u[t][n].push(r))})),s.forEach((function(e){var t=e.provider,n=e.prefix;u[t][n].length&&r_(t,n,u[t][n])})),t?function(e,t,n){var r=zw++,i=jw.bind(null,n,r);if(!t.pending.length)return i;var a={id:r,icons:t,callback:e,abort:i};return n.forEach((function(e){var t=e.provider,n=e.prefix;void 0===Uw[t]&&(Uw[t]=Object.create(null));var r=Uw[t];void 0===r[n]&&(r[n]=[]),r[n].push(a)})),i}(t,r,s):Xw},a_="iconify2",o_="iconify",u_=o_+"-count",s_=o_+"-version",c_=36e5,l_={local:!0,session:!0},f_=!1,h_={local:0,session:0},d_={local:[],session:[]},p_="undefined"===typeof window?{}:window;function v_(e){var t=e+"Storage";try{if(p_&&p_[t]&&"number"===typeof p_[t].length)return p_[t]}catch(T_){}return l_[e]=!1,null}function m_(e,t,n){try{return e.setItem(u_,n.toString()),h_[t]=n,!0}catch(T_){return!1}}function y_(e){var t=e.getItem(u_);if(t){var n=parseInt(t);return n||0}return 0}var g_=function(){if(!f_){f_=!0;var e=Math.floor(Date.now()/c_)-168;for(var t in l_)n(t)}function n(t){var n=v_(t);if(n){var r=function(t){var r=o_+t.toString(),i=n.getItem(r);if("string"!==typeof i)return!1;var a=!0;try{var o=JSON.parse(i);if("object"!==typeof o||"number"!==typeof o.cached||o.cached<e||"string"!==typeof o.provider||"object"!==typeof o.data||"string"!==typeof o.data.prefix)a=!1;else a=sw(uw(o.provider,o.data.prefix),o.data).length>0}catch(T_){a=!1}return a||n.removeItem(r),a};try{var i=n.getItem(s_);if(i!==a_)return i&&function(e){try{for(var t=y_(e),n=0;n<t;n++)e.removeItem(o_+n.toString())}catch(T_){}}(n),void function(e,t){try{e.setItem(s_,a_)}catch(T_){}m_(e,t,0)}(n,t);for(var a=y_(n),o=a-1;o>=0;o--)r(o)||(o===a-1?a--:d_[t].push(o));m_(n,t,a)}catch(T_){}}}};var b_=/[\s,]+/;function k_(e,t){t.split(b_).forEach((function(t){switch(t.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0}}))}function w_(e,t){t.split(b_).forEach((function(t){var n=t.trim();switch(n){case"left":case"center":case"right":e.hAlign=n;break;case"top":case"middle":case"bottom":e.vAlign=n;break;case"slice":case"crop":e.slice=!0;break;case"meet":e.slice=!1}}))}function __(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.replace(/^-?[0-9.]*/,"");function r(e){for(;e<0;)e+=4;return e%4}if(""===n){var i=parseInt(e);return isNaN(i)?0:r(i)}if(n!==e){var a=0;switch(n){case"%":a=25;break;case"deg":a=90}if(a){var o=parseFloat(e.slice(0,e.length-n.length));return isNaN(o)?0:(o/=a)%1===0?r(o):0}}return t}var x_={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img",style:{}},E_=p(p({},pw),{},{inline:!0});if(fw(!0),Aw("",Vw),"undefined"!==typeof document&&"undefined"!==typeof window){Yw.store=function(e,t){function n(n){if(!l_[n])return!1;var r=v_(n);if(!r)return!1;var i=d_[n].shift();if(void 0===i&&!m_(r,n,(i=h_[n])+1))return!1;try{var a={cached:Math.floor(Date.now()/c_),provider:e,data:t};r.setItem(o_+i.toString(),JSON.stringify(a))}catch(T_){return!1}return!0}f_||g_(),Object.keys(t.icons).length&&(t.not_found&&delete(t=Object.assign({},t)).not_found,n("local")||n("session"))},g_();var S_=window;if(void 0!==S_.IconifyPreload){var A_=S_.IconifyPreload,T_="Invalid IconifyPreload syntax.";"object"===typeof A_&&null!==A_&&(A_ instanceof Array?A_:[A_]).forEach((function(e){try{("object"!==typeof e||null===e||e instanceof Array||"object"!==typeof e.icons||"string"!==typeof e.prefix||!function(e,t){if("object"!==typeof e)return!1;if("string"!==typeof t&&(t="string"===typeof e.provider?e.provider:""),lw&&""===t&&("string"!==typeof e.prefix||""===e.prefix)){var n=!1;return iw(e)&&(e.prefix="",tw(e,(function(e,t){t&&dw(e,t)&&(n=!0)}))),n}return!("string"!==typeof e.prefix||!Zk({provider:t,prefix:e.prefix,name:"a"}))&&!!sw(uw(t,e.prefix),e)}(e))&&console.error(T_)}catch(t){console.error(T_)}}))}if(void 0!==S_.IconifyProviders){var I_=S_.IconifyProviders;if("object"===typeof I_&&null!==I_)for(var C_ in I_){var D_="IconifyProviders["+C_+"] is invalid.";try{var N_=I_[C_];if("object"!==typeof N_||!N_||void 0===N_.resources)continue;Ow(C_,N_)||console.error(D_)}catch(dx){console.error(D_)}}}}var O_=function(e){w(r,e);var n=S(r);function r(e){var t;return v(this,r),(t=n.call(this,e)).state={icon:null},t}return y(r,[{key:"_abortLoading",value:function(){this._loading&&(this._loading.abort(),this._loading=null)}},{key:"_setData",value:function(e){this.state.icon!==e&&this.setState({icon:e})}},{key:"_checkIcon",value:function(e){var t,n=this.state,r=this.props.icon;if("object"===typeof r&&null!==r&&"string"===typeof r.body)return this._icon="",this._abortLoading(),void((e||null===n.icon)&&this._setData({data:$k(r)}));if("string"!==typeof r||null===(t=Jk(r,!1,!0)))return this._abortLoading(),void this._setData(null);var i=hw(t);if(null!==i){if(this._icon!==r||null===n.icon){this._abortLoading(),this._icon=r;var a=["iconify"];""!==t.prefix&&a.push("iconify--"+t.prefix),""!==t.provider&&a.push("iconify--"+t.provider),this._setData({data:i,classes:a}),this.props.onLoad&&this.props.onLoad(r)}}else this._loading&&this._loading.name===r||(this._abortLoading(),this._icon="",this._setData(null),this._loading={name:r,abort:i_([t],this._checkIcon.bind(this,!1))})}},{key:"componentDidMount",value:function(){this._checkIcon(!1)}},{key:"componentDidUpdate",value:function(e){e.icon!==this.props.icon&&this._checkIcon(!0)}},{key:"componentWillUnmount",value:function(){this._abortLoading()}},{key:"render",value:function(){var e=this.props,n=this.state.icon;if(null===n)return e.children?e.children:t.createElement("span",{});var r=e;return n.classes&&(r=p(p({},e),{},{className:("string"===typeof e.className?e.className+" ":"")+n.classes.join(" ")})),function(e,n,r,i){var a=r?E_:pw,o=vw(a,n),u="object"===typeof n.style&&null!==n.style?n.style:{},s=p(p({},x_),{},{ref:i,style:u});for(var c in n){var l=n[c];if(void 0!==l)switch(c){case"icon":case"style":case"children":case"onLoad":case"_ref":case"_inline":break;case"inline":case"hFlip":case"vFlip":o[c]=!0===l||"true"===l||1===l;break;case"flip":"string"===typeof l&&k_(o,l);break;case"align":"string"===typeof l&&w_(o,l);break;case"color":u.color=l;break;case"rotate":"string"===typeof l?o[c]=__(l):"number"===typeof l&&(o[c]=l);break;case"ariaHidden":case"aria-hidden":!0!==l&&"true"!==l&&delete s["aria-hidden"];break;default:void 0===a[c]&&(s[c]=l)}}var f=kw(e,o),h=0,d=n.id;for(var v in"string"===typeof d&&(d=d.replace(/-/g,"_")),s.dangerouslySetInnerHTML={__html:Ew(f.body,d?function(){return d+"ID"+h++}:"iconifyReact")},f.attributes)s[v]=f.attributes[v];return f.inline&&void 0===u.verticalAlign&&(u.verticalAlign="-0.125em"),t.createElement("svg",s)}(n.data,r,e._inline,e._ref)}}]),r}(t.Component),M_=t.forwardRef((function(e,n){var r=p(p({},e),{},{_ref:n,_inline:!1});return t.createElement(O_,r)})),L_=(t.forwardRef((function(e,n){var r=p(p({},e),{},{_ref:n,_inline:!0});return t.createElement(O_,r)})),n(978)),R_=n(147),P_=n(967),F_=n(685),V_=n(109),U_=n(974),B_=n(922),j_=n(382),z_=n(858),q_=n(467);function G_(){return G_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G_.apply(this,arguments)}var W_=function(e){switch(e){case"stacked":default:return"rhap_stacked";case"stacked-reverse":return"rhap_stacked-reverse";case"horizontal":return"rhap_horizontal";case"horizontal-reverse":return"rhap_horizontal-reverse"}},K_=function(e){return e instanceof MouseEvent?e.clientX:e.touches[0].clientX},H_=function(e){return e>9?e.toString():"0".concat(e)},Q_=function(e,t,n){if(!isFinite(e))return null;var r=Math.floor(e/60),i=H_(r),a=H_(Math.floor(e%60)),o=H_(Math.floor(r%60)),u=Math.floor(r/60),s="".concat(i,":").concat(a),c="".concat(u,":").concat(o,":").concat(a);return"auto"===n?t>=3600?c:s:"mm:ss"===n?s:"hh:mm:ss"===n?c:void 0};function Y_(e,t){var n=!1;return function(r){n||(e(r),n=!0,setTimeout((function(){return n=!1}),t))}}function X_(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(dx){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}var $_=function(e){w(r,e);var n=X_(r);function r(){var e;v(this,r);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return h(b(e=n.call.apply(n,[this].concat(i))),"audio",void 0),h(b(e),"timeOnMouseMove",0),h(b(e),"hasAddedAudioEventListener",!1),h(b(e),"downloadProgressAnimationTimer",void 0),h(b(e),"state",{isDraggingProgress:!1,currentTimePos:"0%",hasDownloadProgressAnimation:!1,downloadProgressArr:[],waitingForSeekCallback:!1}),h(b(e),"getCurrentProgress",(function(t){var n=e.props,r=n.audio,i=n.progressBar;if(0!==r.src.indexOf("blob:")&&"undefined"===typeof e.props.srcDuration&&(!r.src||!isFinite(r.currentTime)||!i.current))return{currentTime:0,currentTimePos:"0%"};var a=i.current.getBoundingClientRect(),o=a.width,u=K_(t)-a.left;return u<0?u=0:u>o&&(u=o),{currentTime:e.getDuration()*u/o,currentTimePos:"".concat((u/o*100).toFixed(2),"%")}})),h(b(e),"handleContextMenu",(function(e){e.preventDefault()})),h(b(e),"handleMouseDownOrTouchStartProgressBar",(function(t){t.stopPropagation();var n=e.getCurrentProgress(t.nativeEvent),r=n.currentTime,i=n.currentTimePos;isFinite(r)&&(e.timeOnMouseMove=r,e.setState({isDraggingProgress:!0,currentTimePos:i}),t.nativeEvent instanceof MouseEvent?(window.addEventListener("mousemove",e.handleWindowMouseOrTouchMove),window.addEventListener("mouseup",e.handleWindowMouseOrTouchUp)):(window.addEventListener("touchmove",e.handleWindowMouseOrTouchMove),window.addEventListener("touchend",e.handleWindowMouseOrTouchUp)))})),h(b(e),"handleWindowMouseOrTouchMove",(function(t){t instanceof MouseEvent&&t.preventDefault(),t.stopPropagation();var n=window.getSelection();if(n&&"Range"===n.type&&n.empty(),e.state.isDraggingProgress){var r=e.getCurrentProgress(t),i=r.currentTime,a=r.currentTimePos;e.timeOnMouseMove=i,e.setState({currentTimePos:a})}})),h(b(e),"handleWindowMouseOrTouchUp",(function(t){t.stopPropagation();var n=e.timeOnMouseMove,r=e.props,i=r.audio,a=r.onChangeCurrentTimeError,o=r.onSeek;if(o)e.setState({isDraggingProgress:!1,waitingForSeekCallback:!0},(function(){o(i,n).then((function(){return e.setState({waitingForSeekCallback:!1})}),(function(e){throw new Error(e)}))}));else{var u={isDraggingProgress:!1};i.readyState!==i.HAVE_NOTHING&&i.readyState!==i.HAVE_METADATA&&isFinite(n)?i.currentTime=n:(u.currentTimePos="0%",a&&a()),e.setState(u)}t instanceof MouseEvent?(window.removeEventListener("mousemove",e.handleWindowMouseOrTouchMove),window.removeEventListener("mouseup",e.handleWindowMouseOrTouchUp)):(window.removeEventListener("touchmove",e.handleWindowMouseOrTouchMove),window.removeEventListener("touchend",e.handleWindowMouseOrTouchUp))})),h(b(e),"handleAudioTimeUpdate",Y_((function(t){var n=e.state.isDraggingProgress,r=t.target;if(!n&&!0!==e.state.waitingForSeekCallback){var i=r.currentTime,a=e.getDuration();e.setState({currentTimePos:"".concat((i/a*100||0).toFixed(2),"%")})}}),e.props.progressUpdateInterval)),h(b(e),"handleAudioDownloadProgressUpdate",(function(t){for(var n=t.target,r=e.getDuration(),i=[],a=0;a<n.buffered.length;a++){var o=n.buffered.start(a),u=n.buffered.end(a);i.push({left:"".concat(Math.round(100/r*o)||0,"%"),width:"".concat(Math.round(100/r*(u-o))||0,"%")})}clearTimeout(e.downloadProgressAnimationTimer),e.setState({downloadProgressArr:i,hasDownloadProgressAnimation:!0}),e.downloadProgressAnimationTimer=setTimeout((function(){e.setState({hasDownloadProgressAnimation:!1})}),200)})),e}return y(r,[{key:"getDuration",value:function(){var e=this.props,t=e.audio,n=e.srcDuration;return"undefined"===typeof n?t.duration:n}},{key:"componentDidUpdate",value:function(){var e=this.props.audio;e&&!this.hasAddedAudioEventListener&&(this.audio=e,this.hasAddedAudioEventListener=!0,e.addEventListener("timeupdate",this.handleAudioTimeUpdate),e.addEventListener("progress",this.handleAudioDownloadProgressUpdate))}},{key:"componentWillUnmount",value:function(){this.audio&&this.hasAddedAudioEventListener&&(this.audio.removeEventListener("timeupdate",this.handleAudioTimeUpdate),this.audio.removeEventListener("progress",this.handleAudioDownloadProgressUpdate)),clearTimeout(this.downloadProgressAnimationTimer)}},{key:"render",value:function(){var e=this.props,n=e.showDownloadProgress,r=e.showFilledProgress,i=e.progressBar,a=e.i18nProgressBar,o=this.state,u=o.currentTimePos,s=o.downloadProgressArr,c=o.hasDownloadProgressAnimation;return t.createElement("div",{className:"rhap_progress-container",ref:i,"aria-label":a,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Number(u.split("%")[0]),tabIndex:0,onMouseDown:this.handleMouseDownOrTouchStartProgressBar,onTouchStart:this.handleMouseDownOrTouchStartProgressBar,onContextMenu:this.handleContextMenu},t.createElement("div",{className:"rhap_progress-bar ".concat(n?"rhap_progress-bar-show-download":"")},t.createElement("div",{className:"rhap_progress-indicator",style:{left:u}}),r&&t.createElement("div",{className:"rhap_progress-filled",style:{width:u}}),n&&s.map((function(e,n){var r=e.left,i=e.width;return t.createElement("div",{key:n,className:"rhap_download-progress",style:{left:r,width:i,transitionDuration:c?".2s":"0s"}})}))))}}]),r}(t.Component),J_=(0,t.forwardRef)((function(e,n){return t.createElement($_,G_({},e,{progressBar:n}))}));function Z_(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(dx){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}var ex=function(e){w(n,e);var t=Z_(n);function n(e){var r;v(this,n),h(b(r=t.call(this,e)),"audio",void 0),h(b(r),"hasAddedAudioEventListener",!1),h(b(r),"state",{currentTime:r.props.defaultCurrentTime}),h(b(r),"handleAudioCurrentTimeChange",(function(e){var t=e.target,n=r.props,i=n.isLeftTime,a=n.timeFormat,o=n.defaultCurrentTime;r.setState({currentTime:Q_(i?t.duration-t.currentTime:t.currentTime,t.duration,a)||o})})),h(b(r),"addAudioEventListeners",(function(){var e=r.props.audio;e&&!r.hasAddedAudioEventListener&&(r.audio=e,r.hasAddedAudioEventListener=!0,e.addEventListener("timeupdate",r.handleAudioCurrentTimeChange),e.addEventListener("loadedmetadata",r.handleAudioCurrentTimeChange))}));var i=e.audio,a=e.defaultCurrentTime,o=e.isLeftTime,u=e.timeFormat,s=a;return i&&(s=Q_(o?i.duration-i.currentTime:i.currentTime,i.duration,u)),r.state={currentTime:s},r}return y(n,[{key:"componentDidMount",value:function(){this.addAudioEventListeners()}},{key:"componentDidUpdate",value:function(){this.addAudioEventListeners()}},{key:"componentWillUnmount",value:function(){this.audio&&this.hasAddedAudioEventListener&&(this.audio.removeEventListener("timeupdate",this.handleAudioCurrentTimeChange),this.audio.removeEventListener("loadedmetadata",this.handleAudioCurrentTimeChange))}},{key:"render",value:function(){return this.state.currentTime}}]),n}(t.PureComponent);function tx(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(dx){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}var nx=function(e){w(n,e);var t=tx(n);function n(e){var r;v(this,n),h(b(r=t.call(this,e)),"audio",void 0),h(b(r),"hasAddedAudioEventListener",!1),h(b(r),"state",{duration:r.props.audio?Q_(r.props.audio.duration,r.props.audio.duration,r.props.timeFormat):r.props.defaultDuration}),h(b(r),"handleAudioDurationChange",(function(e){var t=e.target,n=r.props,i=n.timeFormat,a=n.defaultDuration;r.setState({duration:Q_(t.duration,t.duration,i)||a})})),h(b(r),"addAudioEventListeners",(function(){var e=r.props.audio;e&&!r.hasAddedAudioEventListener&&(r.audio=e,r.hasAddedAudioEventListener=!0,e.addEventListener("durationchange",r.handleAudioDurationChange),e.addEventListener("abort",r.handleAudioDurationChange))}));var i=e.audio,a=e.timeFormat,o=e.defaultDuration;return r.state={duration:i?Q_(i.duration,i.duration,a):o},r}return y(n,[{key:"componentDidMount",value:function(){this.addAudioEventListeners()}},{key:"componentDidUpdate",value:function(){this.addAudioEventListeners()}},{key:"componentWillUnmount",value:function(){this.audio&&this.hasAddedAudioEventListener&&(this.audio.removeEventListener("durationchange",this.handleAudioDurationChange),this.audio.removeEventListener("abort",this.handleAudioDurationChange))}},{key:"render",value:function(){return this.state.duration}}]),n}(t.PureComponent);function rx(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(dx){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}var ix,ax=function(e){w(r,e);var n=rx(r);function r(){var e;v(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return h(b(e=n.call.apply(n,[this].concat(a))),"audio",void 0),h(b(e),"hasAddedAudioEventListener",!1),h(b(e),"volumeBar",(0,t.createRef)()),h(b(e),"volumeAnimationTimer",0),h(b(e),"lastVolume",e.props.volume),h(b(e),"state",{currentVolumePos:"".concat((e.lastVolume/1*100||0).toFixed(2),"%"),hasVolumeAnimation:!1,isDraggingVolume:!1}),h(b(e),"getCurrentVolume",(function(t){var n=e.props.audio;if(!e.volumeBar.current)return{currentVolume:n.volume,currentVolumePos:e.state.currentVolumePos};var r,i,a=e.volumeBar.current.getBoundingClientRect(),o=a.width,u=K_(t)-a.left;return u<0?(r=0,i="0%"):u>a.width?(r=1,i="100%"):(r=u/o,i="".concat(u/o*100,"%")),{currentVolume:r,currentVolumePos:i}})),h(b(e),"handleContextMenu",(function(e){e.preventDefault()})),h(b(e),"handleClickVolumeButton",(function(){var t=e.props.audio;t.volume>0?(e.lastVolume=t.volume,t.volume=0):t.volume=e.lastVolume})),h(b(e),"handleVolumnControlMouseOrTouchDown",(function(t){t.stopPropagation();var n=e.props.audio,r=e.getCurrentVolume(t.nativeEvent),i=r.currentVolume,a=r.currentVolumePos;n.volume=i,e.setState({isDraggingVolume:!0,currentVolumePos:a}),t.nativeEvent instanceof MouseEvent?(window.addEventListener("mousemove",e.handleWindowMouseOrTouchMove),window.addEventListener("mouseup",e.handleWindowMouseOrTouchUp)):(window.addEventListener("touchmove",e.handleWindowMouseOrTouchMove),window.addEventListener("touchend",e.handleWindowMouseOrTouchUp))})),h(b(e),"handleWindowMouseOrTouchMove",(function(t){t instanceof MouseEvent&&t.preventDefault(),t.stopPropagation();var n=e.props.audio,r=window.getSelection();if(r&&"Range"===r.type&&r.empty(),e.state.isDraggingVolume){var i=e.getCurrentVolume(t),a=i.currentVolume,o=i.currentVolumePos;n.volume=a,e.setState({currentVolumePos:o})}})),h(b(e),"handleWindowMouseOrTouchUp",(function(t){t.stopPropagation(),e.setState({isDraggingVolume:!1}),t instanceof MouseEvent?(window.removeEventListener("mousemove",e.handleWindowMouseOrTouchMove),window.removeEventListener("mouseup",e.handleWindowMouseOrTouchUp)):(window.removeEventListener("touchmove",e.handleWindowMouseOrTouchMove),window.removeEventListener("touchend",e.handleWindowMouseOrTouchUp))})),h(b(e),"handleAudioVolumeChange",(function(t){var n=e.state.isDraggingVolume,r=t.target.volume;(e.lastVolume>0&&0===r||0===e.lastVolume&&r>0)&&e.props.onMuteChange(),e.lastVolume=r,n||(e.setState({hasVolumeAnimation:!0,currentVolumePos:"".concat((r/1*100||0).toFixed(2),"%")}),clearTimeout(e.volumeAnimationTimer),e.volumeAnimationTimer=setTimeout((function(){e.setState({hasVolumeAnimation:!1})}),100))})),e}return y(r,[{key:"componentDidUpdate",value:function(){var e=this.props.audio;e&&!this.hasAddedAudioEventListener&&(this.audio=e,this.hasAddedAudioEventListener=!0,e.addEventListener("volumechange",this.handleAudioVolumeChange))}},{key:"componentWillUnmount",value:function(){this.audio&&this.hasAddedAudioEventListener&&this.audio.removeEventListener("volumechange",this.handleAudioVolumeChange),clearTimeout(this.volumeAnimationTimer)}},{key:"render",value:function(){var e=this.props,n=e.audio,r=e.showFilledVolume,i=e.i18nVolumeControl,a=this.state,o=a.currentVolumePos,u=a.hasVolumeAnimation,s=(n||{}).volume;return t.createElement("div",{ref:this.volumeBar,onMouseDown:this.handleVolumnControlMouseOrTouchDown,onTouchStart:this.handleVolumnControlMouseOrTouchDown,onContextMenu:this.handleContextMenu,role:"progressbar","aria-label":i,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Number((100*s).toFixed(0)),tabIndex:0,className:"rhap_volume-bar-area"},t.createElement("div",{className:"rhap_volume-bar"},t.createElement("div",{className:"rhap_volume-indicator",style:{left:o,transitionDuration:u?".1s":"0s"}}),r&&t.createElement("div",{className:"rhap_volume-filled",style:{width:o}})))}}]),r}(t.Component),ox=ax;function ux(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(dx){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}!function(e){e.CURRENT_TIME="CURRENT_TIME",e.CURRENT_LEFT_TIME="CURRENT_LEFT_TIME",e.PROGRESS_BAR="PROGRESS_BAR",e.DURATION="DURATION",e.ADDITIONAL_CONTROLS="ADDITIONAL_CONTROLS",e.MAIN_CONTROLS="MAIN_CONTROLS",e.VOLUME_CONTROLS="VOLUME_CONTROLS",e.LOOP="LOOP",e.VOLUME="VOLUME"}(ix||(ix={}));var sx=function(e){w(r,e);var n=ux(r);function r(){var e;v(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return h(b(e=n.call.apply(n,[this].concat(a))),"audio",(0,t.createRef)()),h(b(e),"progressBar",(0,t.createRef)()),h(b(e),"container",(0,t.createRef)()),h(b(e),"lastVolume",e.props.volume),h(b(e),"listenTracker",void 0),h(b(e),"volumeAnimationTimer",void 0),h(b(e),"downloadProgressAnimationTimer",void 0),h(b(e),"togglePlay",(function(t){t.stopPropagation();var n=e.audio.current;(n.paused||n.ended)&&n.src?e.playAudioPromise():n.paused||n.pause()})),h(b(e),"playAudioPromise",(function(){var t=e.audio.current.play();t?t.then(null).catch((function(t){var n=e.props.onPlayError;n&&n(new Error(t))})):e.forceUpdate()})),h(b(e),"isPlaying",(function(){var t=e.audio.current;return!!t&&(!t.paused&&!t.ended)})),h(b(e),"handlePlay",(function(t){e.forceUpdate(),e.props.onPlay&&e.props.onPlay(t)})),h(b(e),"handlePause",(function(t){e.audio&&(e.forceUpdate(),e.props.onPause&&e.props.onPause(t))})),h(b(e),"handleEnded",(function(t){e.audio&&(e.forceUpdate(),e.props.onEnded&&e.props.onEnded(t))})),h(b(e),"handleAbort",(function(t){e.props.onAbort&&e.props.onAbort(t)})),h(b(e),"handleClickVolumeButton",(function(){var t=e.audio.current;t.volume>0?(e.lastVolume=t.volume,t.volume=0):t.volume=e.lastVolume})),h(b(e),"handleMuteChange",(function(){e.forceUpdate()})),h(b(e),"handleClickLoopButton",(function(){e.audio.current.loop=!e.audio.current.loop,e.forceUpdate()})),h(b(e),"handleClickRewind",(function(){var t=e.props,n=t.progressJumpSteps,r=t.progressJumpStep,i=n.backward||r;e.setJumpTime(-i)})),h(b(e),"handleClickForward",(function(){var t=e.props,n=t.progressJumpSteps,r=t.progressJumpStep,i=n.forward||r;e.setJumpTime(i)})),h(b(e),"setJumpTime",(function(t){var n=e.audio.current,r=n.duration,i=n.currentTime;if(n.readyState===n.HAVE_NOTHING||n.readyState===n.HAVE_METADATA||!isFinite(r)||!isFinite(i))return e.props.onChangeCurrentTimeError&&e.props.onChangeCurrentTimeError();var a=i+t/1e3;a<0?(n.currentTime=0,a=0):a>r?(n.currentTime=r,a=r):n.currentTime=a})),h(b(e),"setJumpVolume",(function(t){var n=e.audio.current.volume+t;n<0?n=0:n>1&&(n=1),e.audio.current.volume=n})),h(b(e),"handleKeyDown",(function(t){if(e.props.hasDefaultKeyBindings)switch(t.key){case" ":t.target!==e.container.current&&t.target!==e.progressBar.current||(t.preventDefault(),e.togglePlay(t));break;case"ArrowLeft":e.handleClickRewind();break;case"ArrowRight":e.handleClickForward();break;case"ArrowUp":t.preventDefault(),e.setJumpVolume(e.props.volumeJumpStep);break;case"ArrowDown":t.preventDefault(),e.setJumpVolume(-e.props.volumeJumpStep);break;case"l":e.handleClickLoopButton();break;case"m":e.handleClickVolumeButton()}})),h(b(e),"renderUIModules",(function(t){return t.map((function(t,n){return e.renderUIModule(t,n)}))})),h(b(e),"renderUIModule",(function(n,r){var i=e.props,a=i.defaultCurrentTime,o=i.progressUpdateInterval,u=i.showDownloadProgress,s=i.showFilledProgress,c=i.showFilledVolume,l=i.defaultDuration,f=i.customIcons,h=i.showSkipControls,d=i.onClickPrevious,p=i.onClickNext,v=i.onChangeCurrentTimeError,m=i.showJumpControls,y=i.customAdditionalControls,g=i.customVolumeControls,b=i.muted,k=i.timeFormat,w=i.volume,_=i.loop,x=i.mse,E=i.i18nAriaLabels;switch(n){case ix.CURRENT_TIME:return t.createElement("div",{key:r,id:"rhap_current-time",className:"rhap_time rhap_current-time"},t.createElement(ex,{audio:e.audio.current,isLeftTime:!1,defaultCurrentTime:a,timeFormat:k}));case ix.CURRENT_LEFT_TIME:return t.createElement("div",{key:r,id:"rhap_current-left-time",className:"rhap_time rhap_current-left-time"},t.createElement(ex,{audio:e.audio.current,isLeftTime:!0,defaultCurrentTime:a,timeFormat:k}));case ix.PROGRESS_BAR:return t.createElement(J_,{key:r,ref:e.progressBar,audio:e.audio.current,progressUpdateInterval:o,showDownloadProgress:u,showFilledProgress:s,onSeek:x&&x.onSeek,onChangeCurrentTimeError:v,srcDuration:x&&x.srcDuration,i18nProgressBar:E.progressControl});case ix.DURATION:return t.createElement("div",{key:r,className:"rhap_time rhap_total-time"},x&&x.srcDuration?Q_(x.srcDuration,x.srcDuration,e.props.timeFormat):t.createElement(nx,{audio:e.audio.current,defaultDuration:l,timeFormat:k}));case ix.ADDITIONAL_CONTROLS:return t.createElement("div",{key:r,className:"rhap_additional-controls"},e.renderUIModules(y));case ix.MAIN_CONTROLS:var S,A=e.isPlaying();return S=A?f.pause?f.pause:t.createElement(M_,{icon:R_.Z}):f.play?f.play:t.createElement(M_,{icon:L_.Z}),t.createElement("div",{key:r,className:"rhap_main-controls"},h&&t.createElement("button",{"aria-label":E.previous,className:"rhap_button-clear rhap_main-controls-button rhap_skip-button",type:"button",onClick:d},f.previous?f.previous:t.createElement(M_,{icon:P_.Z})),m&&t.createElement("button",{"aria-label":E.rewind,className:"rhap_button-clear rhap_main-controls-button rhap_rewind-button",type:"button",onClick:e.handleClickRewind},f.rewind?f.rewind:t.createElement(M_,{icon:U_.Z})),t.createElement("button",{"aria-label":A?E.pause:E.play,className:"rhap_button-clear rhap_main-controls-button rhap_play-pause-button",type:"button",onClick:e.togglePlay},S),m&&t.createElement("button",{"aria-label":E.forward,className:"rhap_button-clear rhap_main-controls-button rhap_forward-button",type:"button",onClick:e.handleClickForward},f.forward?f.forward:t.createElement(M_,{icon:V_.Z})),h&&t.createElement("button",{"aria-label":E.next,className:"rhap_button-clear rhap_main-controls-button rhap_skip-button",type:"button",onClick:p},f.next?f.next:t.createElement(M_,{icon:F_.Z})));case ix.VOLUME_CONTROLS:return t.createElement("div",{key:r,className:"rhap_volume-controls"},e.renderUIModules(g));case ix.LOOP:var T,I=e.audio.current?e.audio.current.loop:_;return T=I?f.loop?f.loop:t.createElement(M_,{icon:z_.Z}):f.loopOff?f.loopOff:t.createElement(M_,{icon:q_.Z}),t.createElement("button",{key:r,"aria-label":I?E.loop:E.loopOff,className:"rhap_button-clear rhap_repeat-button",type:"button",onClick:e.handleClickLoopButton},T);case ix.VOLUME:var C,D=(e.audio.current||{}).volume,N=void 0===D?b?0:w:D;return C=N?f.volume?f.volume:t.createElement(M_,{icon:B_.Z}):f.volume?f.volumeMute:t.createElement(M_,{icon:j_.Z}),t.createElement("div",{key:r,className:"rhap_volume-container"},t.createElement("button",{"aria-label":N?E.volume:E.volumeMute,onClick:e.handleClickVolumeButton,type:"button",className:"rhap_button-clear rhap_volume-button"},C),t.createElement(ox,{audio:e.audio.current,volume:N,onMuteChange:e.handleMuteChange,showFilledVolume:c,i18nVolumeControl:E.volumeControl}));default:return(0,t.isValidElement)(n)?n.key?n:(0,t.cloneElement)(n,{key:r}):null}})),e}return y(r,[{key:"componentDidMount",value:function(){var e=this;this.forceUpdate();var t=this.audio.current;this.props.muted?t.volume=0:t.volume=this.lastVolume,t.addEventListener("error",(function(t){e.props.onError&&e.props.onError(t)})),t.addEventListener("canplay",(function(t){e.props.onCanPlay&&e.props.onCanPlay(t)})),t.addEventListener("canplaythrough",(function(t){e.props.onCanPlayThrough&&e.props.onCanPlayThrough(t)})),t.addEventListener("play",this.handlePlay),t.addEventListener("abort",this.handleAbort),t.addEventListener("ended",this.handleEnded),t.addEventListener("playing",(function(t){e.props.onPlaying&&e.props.onPlaying(t)})),t.addEventListener("seeking",(function(t){e.props.onSeeking&&e.props.onSeeking(t)})),t.addEventListener("seeked",(function(t){e.props.onSeeked&&e.props.onSeeked(t)})),t.addEventListener("waiting",(function(t){e.props.onWaiting&&e.props.onWaiting(t)})),t.addEventListener("emptied",(function(t){e.props.onEmptied&&e.props.onEmptied(t)})),t.addEventListener("stalled",(function(t){e.props.onStalled&&e.props.onStalled(t)})),t.addEventListener("suspend",(function(t){e.props.onSuspend&&e.props.onSuspend(t)})),t.addEventListener("loadstart",(function(t){e.props.onLoadStart&&e.props.onLoadStart(t)})),t.addEventListener("loadedmetadata",(function(t){e.props.onLoadedMetaData&&e.props.onLoadedMetaData(t)})),t.addEventListener("loadeddata",(function(t){e.props.onLoadedData&&e.props.onLoadedData(t)})),t.addEventListener("pause",this.handlePause),t.addEventListener("timeupdate",Y_((function(t){e.props.onListen&&e.props.onListen(t)}),this.props.listenInterval)),t.addEventListener("volumechange",(function(t){e.props.onVolumeChange&&e.props.onVolumeChange(t)})),t.addEventListener("encrypted",(function(t){var n=e.props.mse;n&&n.onEcrypted&&n.onEcrypted(t)}))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.src,r=t.autoPlayAfterSrcChange;e.src!==n&&(r?this.playAudioPromise():this.forceUpdate())}},{key:"render",value:function(){var e=this.props,n=e.className,r=e.src,i=e.loop,a=e.preload,o=e.autoPlay,u=e.crossOrigin,s=e.mediaGroup,c=e.header,l=e.footer,f=e.layout,h=e.customProgressBarSection,d=e.customControlsSection,p=e.children,v=e.style,m=e.i18nAriaLabels,y=this.audio.current?this.audio.current.loop:i,g=y?"rhap_loop--on":"rhap_loop--off",b=this.isPlaying()?"rhap_play-status--playing":"rhap_play-status--paused";return t.createElement("div",{role:"group",tabIndex:0,"aria-label":m.player,className:"rhap_container ".concat(g," ").concat(b," ").concat(n),onKeyDown:this.handleKeyDown,ref:this.container,style:v},t.createElement("audio",{src:r,controls:!1,loop:y,autoPlay:o,preload:a,crossOrigin:u,mediaGroup:s,ref:this.audio},p),c&&t.createElement("div",{className:"rhap_header"},c),t.createElement("div",{className:"rhap_main ".concat(W_(f))},t.createElement("div",{className:"rhap_progress-section"},this.renderUIModules(h)),t.createElement("div",{className:"rhap_controls-section"},this.renderUIModules(d))),l&&t.createElement("div",{className:"rhap_footer"},l))}}]),r}(t.Component);h(sx,"defaultProps",{autoPlay:!1,autoPlayAfterSrcChange:!0,listenInterval:1e3,progressJumpStep:5e3,progressJumpSteps:{},volumeJumpStep:.1,loop:!1,muted:!1,preload:"auto",progressUpdateInterval:20,defaultCurrentTime:"--:--",defaultDuration:"--:--",timeFormat:"auto",volume:1,className:"",showJumpControls:!0,showSkipControls:!1,showDownloadProgress:!0,showFilledProgress:!0,showFilledVolume:!1,customIcons:{},customProgressBarSection:[ix.CURRENT_TIME,ix.PROGRESS_BAR,ix.DURATION],customControlsSection:[ix.ADDITIONAL_CONTROLS,ix.MAIN_CONTROLS,ix.VOLUME_CONTROLS],customAdditionalControls:[ix.LOOP],customVolumeControls:[ix.VOLUME],layout:"stacked",hasDefaultKeyBindings:!0,i18nAriaLabels:{player:"Audio player",progressControl:"Audio progress control",volumeControl:"Volume control",play:"Play",pause:"Pause",rewind:"Rewind",forward:"Forward",previous:"Previous",next:"Skip",loop:"Disable loop",loopOff:"Enable loop",volume:"Mute",volumeMute:"Unmute"}});var cx=sx,lx=n(899),fx=function(){var e=o((0,t.useState)([]),2),n=e[0],r=e[1];(0,t.useEffect)((function(){bb.collection("tracks").orderBy("datetime","desc").onSnapshot((function(e){r(e.docs.map((function(e){return{id:e.id,title:e.data().title,author:e.data().author,image:e.data().images,audio:e.data().audio,datetime:e.data().datetime}})))}))}),[]);var i=o((0,t.useState)(""),2),a=i[0],u=i[1],s=function(e){var t=n.indexOf(n.find((function(e){return e.audio===a})));t<n.length-1&&"next"===e?u(n[t+1].audio):t>0&&"prev"===e&&u(n[t-1].audio)},c=function(){var e=document.querySelector(".canvasElmId"),n=document.querySelector("audio"),r=o((0,t.useState)(null),2),i=r[0],a=r[1],u=o((0,t.useState)(0),2),s=u[0],c=u[1];function l(e){null===i||void 0===i||i.clearAnimations(),1===e&&(null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#64C8FF",mirroredX:!0,count:32,rounded:!0,frequencyBand:"base"})),null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#0039A6",mirroredX:!0,count:60,rounded:!0})),null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#F00000",mirroredX:!0,count:25,rounded:!0,frequencyBand:"highs"}))),0===e&&(null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"black",mirroredX:!0,count:32,rounded:!0,frequencyBand:"base"})),null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#0e3fd1",mirroredX:!0,count:60,rounded:!0})),null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#dc1f26",mirroredX:!0,count:25,rounded:!0,frequencyBand:"highs"}))),2===e&&(null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#FFFFFF",mirroredX:!0,count:32,rounded:!0,frequencyBand:"base"})),null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#0039A6",mirroredX:!0,count:60,rounded:!0})),null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#D52B1E",mirroredX:!0,count:25,rounded:!0,frequencyBand:"highs"}))),3===e&&(null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#FFFFFF",mirroredX:!0,count:32,rounded:!0,frequencyBand:"base"})),null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#FF0000",mirroredX:!0,count:60,rounded:!0})),null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#FFDF00",mirroredX:!0,count:25,rounded:!0,frequencyBand:"highs"}))),4===e&&(null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#de0000",mirroredX:!0,count:32,rounded:!0,frequencyBand:"base"})),null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#068e6b",mirroredX:!0,count:60,rounded:!0})),null===i||void 0===i||i.addAnimation(new i.animations.Wave({lineColor:"white",lineWidth:10,fillColor:"#de0000",mirroredX:!0,count:25,rounded:!0,frequencyBand:"highs"})))}return(0,t.useEffect)((function(){e&&n&&(i||a(new lx.Wave(n,e)))}),[n]),(0,t.useEffect)((function(){i&&l(0)}),[i]),{audioElm:n,canvasElm:e,setPreset:l,setActiveAnimation:c,activeAnimation:s,wave:i}}();return(0,Hk.jsxs)("div",{className:"player-block",children:[(0,Hk.jsxs)("div",{className:"visualisation",children:[(0,Hk.jsx)("p",{children:a.firstChild}),(0,Hk.jsx)("canvas",{className:"canvasElmId",width:.7*window.innerWidth,height:.5*window.innerHeight}),(0,Hk.jsxs)("div",{className:"setAnimation",children:[(0,Hk.jsx)("div",{className:"setAnimationItem ".concat(0===c.activeAnimation?"--active":""),onClick:function(){c.setPreset(0),c.setActiveAnimation(0)},children:"\u0414\u041d\u0420"}),(0,Hk.jsx)("div",{className:"setAnimationItem ".concat(1===c.activeAnimation?"--active":""),onClick:function(){c.setPreset(1),c.setActiveAnimation(1)},children:"\u041b\u041d\u0420"}),(0,Hk.jsx)("div",{className:"setAnimationItem ".concat(2===c.activeAnimation?"--active":""),onClick:function(){c.setPreset(2),c.setActiveAnimation(2)},children:"\u0420\u0424"}),(0,Hk.jsx)("div",{className:"setAnimationItem ".concat(3===c.activeAnimation?"--active":""),onClick:function(){c.setPreset(3),c.setActiveAnimation(3)},children:"\u042e\u0436\u043d\u0430\u044f \u041e\u0441\u0435\u0442\u0438\u044f"}),(0,Hk.jsx)("div",{className:"setAnimationItem ".concat(4===c.activeAnimation?"--active":""),onClick:function(){c.setPreset(4),c.setActiveAnimation(4)},children:"\u041f\u0440\u0438\u0434\u043d\u0435\u0441\u0442\u0440\u043e\u0432\u044c\u0435"})]})]}),(0,Hk.jsxs)("div",{className:"player player-list",children:[(0,Hk.jsx)(cx,{className:"audioElmId",autoPlay:!0,showJumpControls:!1,showSkipControls:!0,showFilledVolume:!1,autoPlayAfterSrcChange:!0,volume:.5,crossOrigin:"anonymous",src:a,onClickNext:function(e){return s("next")},onClickPrevious:function(e){return s("prev")}}),(0,Hk.jsx)("div",{className:"player-tracks",children:n.map((function(e,t){return(0,Hk.jsx)("div",{children:(0,Hk.jsxs)("div",{id:e.audio,className:"track",style:{display:"flex",justifyContent:"flex-start",alignItems:"center",flexDirection:"row",marginTop:30,borderRadius:10,background:"#f57d7d",padding:3},children:[(0,Hk.jsx)("div",{style:{paddingRight:20},children:(0,Hk.jsx)("img",{onClick:function(e){return u(e.target.parentElement.parentElement.id)},style:{width:"auto",height:90,borderRadius:10,cursor:"pointer"},src:e.image,alt:""})}),(0,Hk.jsxs)("div",{className:"track-text",children:[(0,Hk.jsx)("p",{style:{fontSize:24},className:"track-name",children:e.title}),(0,Hk.jsx)("p",{style:{fontSize:24,color:"#4c4a4a"},className:"track-author",children:e.author})]})]})},e.id)}))})]})]})};var hx=function(){var e=o((0,t.useState)(),2),r=e[0],i=e[1];return(0,Hk.jsxs)("div",{className:"App",children:[(0,Hk.jsx)("div",{className:"support",children:(0,Hk.jsxs)("div",{className:"support-block",children:[(0,Hk.jsx)("img",{src:n(270),alt:""}),(0,Hk.jsx)("img",{src:n(901),alt:""}),(0,Hk.jsx)("p",{children:"\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0442\u0435 \u0436\u0438\u0442\u0435\u043b\u0435\u0439 \u0414\u043e\u043d\u0431\u0430\u0441\u0441\u0430"})]})}),(0,Hk.jsxs)("header",{className:"App-header",children:[(0,Hk.jsx)("img",{src:n(200).Z,alt:""}),(0,Hk.jsx)("h1",{children:"\u0421\u043e\u0432\u0435\u0442 \u0422\u044e\u043d\u0441"})]}),(0,Hk.jsx)("div",{className:"container",children:(0,Hk.jsx)("button",{onClick:function(){i(!0)},className:"c-button",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0422\u0440\u0435\u043a"})}),(0,Hk.jsx)(Qk,{active:r,setActive:i}),(0,Hk.jsx)(fx,{})]})};r.createRoot(document.getElementById("root")).render((0,Hk.jsx)(hx,{}))}()}();
//# sourceMappingURL=main.c3cfea68.js.map